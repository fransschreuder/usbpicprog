MP2COD 3.80.03, COFF to COD File Converter
Copyright (c) 2004 Microchip Technology Inc.
Listing File Generated: Wed Dec 01 10:22:51 2004


Address  Value    Disassembly              Source                                                                           File
-------  -------  -----------------------  -------------------------------------------------------------------------------  -----
                                           /* $Id: c018i.c,v 1.1.2.1 2004/03/09 16:47:01 sealep Exp $ */                    C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           /* Copyright (c)1999 Microchip Technology */                                     C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           /* MPLAB-C18 startup code, including initialized data */                         C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           /* external reference to the user's main routine */                              C:\mcc18\src\traditional\startup\c018i.c
                                           extern void main (void);                                                         C:\mcc18\src\traditional\startup\c018i.c
                                           /* prototype for the startup function */                                         C:\mcc18\src\traditional\startup\c018i.c
                                           void _entry (void);                                                              C:\mcc18\src\traditional\startup\c018i.c
                                           void _startup (void);                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           /* prototype for the initialized data setup */                                   C:\mcc18\src\traditional\startup\c018i.c
                                           void _do_cinit (void);                                                           C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           extern volatile near unsigned long short TBLPTR;                                 C:\mcc18\src\traditional\startup\c018i.c
                                           extern near unsigned FSR0;                                                       C:\mcc18\src\traditional\startup\c018i.c
                                           extern near char FPFLAGS;                                                        C:\mcc18\src\traditional\startup\c018i.c
                                           #define RND 6                                                                    C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           #pragma code _entry_scn=0x000000                                                 C:\mcc18\src\traditional\startup\c018i.c
                                           void                                                                             C:\mcc18\src\traditional\startup\c018i.c
                                           _entry (void)                                                                    C:\mcc18\src\traditional\startup\c018i.c
                                           {                                                                                C:\mcc18\src\traditional\startup\c018i.c
000000   efed     GOTO      0x19da         _asm goto _startup _endasm                                                       C:\mcc18\src\traditional\startup\c018i.c
000002   f00c                                                                                                               
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
000004   0012     RETURN    0x0            }                                                                                C:\mcc18\src\traditional\startup\c018i.c
                                           #pragma code _startup_scn                                                        C:\mcc18\src\traditional\startup\c018i.c
                                           void                                                                             C:\mcc18\src\traditional\startup\c018i.c
                                           _startup (void)                                                                  C:\mcc18\src\traditional\startup\c018i.c
                                           {                                                                                C:\mcc18\src\traditional\startup\c018i.c
                                             _asm                                                                           C:\mcc18\src\traditional\startup\c018i.c
                                               // Initialize the stack pointer                                              C:\mcc18\src\traditional\startup\c018i.c
0019da   ee13     LFSR      0x1,0x300          lfsr 1, _stack lfsr 2, _stack clrf TBLPTRU, 0 // 1st silicon doesn't do this on POR C:\mcc18\src\traditional\startup\c018i.c
0019dc   f000                                                                                                               
0019de   ee23     LFSR      0x2,0x300                                                                                       
0019e0   f000                                                                                                               
0019e2   6af8     CLRF      0xf8,0x0                                                                                        
0019e4   9c0f     BCF       0xf,0x6,0x0        bcf FPFLAGS,RND,0 // Initialize rounding flag for floating point libs        C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                               _endasm                                                                      C:\mcc18\src\traditional\startup\c018i.c
0019e6   ecbe     CALL      0x177c,0x0         _do_cinit ();                                                                C:\mcc18\src\traditional\startup\c018i.c
0019e8   f00b                                                                                                               
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           loop:                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                             // Call the user's main routine                                                C:\mcc18\src\traditional\startup\c018i.c
0019ea   ec92     CALL      0x1924,0x0       main ();                                                                       C:\mcc18\src\traditional\startup\c018i.c
0019ec   f00c                                                                                                               
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
0019ee   d7fd     BRA       0x19ea           goto loop;                                                                     C:\mcc18\src\traditional\startup\c018i.c
0019f0   0012     RETURN    0x0            }                               /* end _startup() */                             C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           /* MPLAB-C18 initialized data memory support */                                  C:\mcc18\src\traditional\startup\c018i.c
                                           /* The linker will populate the _cinit table */                                  C:\mcc18\src\traditional\startup\c018i.c
                                           extern far rom struct                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           {                                                                                C:\mcc18\src\traditional\startup\c018i.c
                                             unsigned short num_init;                                                       C:\mcc18\src\traditional\startup\c018i.c
                                             struct _init_entry                                                             C:\mcc18\src\traditional\startup\c018i.c
                                             {                                                                              C:\mcc18\src\traditional\startup\c018i.c
                                               unsigned long from;                                                          C:\mcc18\src\traditional\startup\c018i.c
                                               unsigned long to;                                                            C:\mcc18\src\traditional\startup\c018i.c
                                               unsigned long size;                                                          C:\mcc18\src\traditional\startup\c018i.c
                                             }                                                                              C:\mcc18\src\traditional\startup\c018i.c
                                             entries[];                                                                     C:\mcc18\src\traditional\startup\c018i.c
                                           }                                                                                C:\mcc18\src\traditional\startup\c018i.c
                                           _cinit;                                                                          C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           #pragma code _cinit_scn                                                          C:\mcc18\src\traditional\startup\c018i.c
                                           void                                                                             C:\mcc18\src\traditional\startup\c018i.c
                                           _do_cinit (void)                                                                 C:\mcc18\src\traditional\startup\c018i.c
                                           {                                                                                C:\mcc18\src\traditional\startup\c018i.c
                                             /* we'll make the assumption in the following code that these statics          C:\mcc18\src\traditional\startup\c018i.c
                                              * will be allocated into the same bank.                                       C:\mcc18\src\traditional\startup\c018i.c
                                              */                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                             static short long prom;                                                        C:\mcc18\src\traditional\startup\c018i.c
                                             static unsigned short curr_byte;                                               C:\mcc18\src\traditional\startup\c018i.c
                                             static unsigned short curr_entry;                                              C:\mcc18\src\traditional\startup\c018i.c
                                             static short long data_ptr;                                                    C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                             // Initialized data...                                                         C:\mcc18\src\traditional\startup\c018i.c
00177c   0e2a     MOVLW     0x2a             TBLPTR = (short long)&_cinit;                                                  C:\mcc18\src\traditional\startup\c018i.c
00177e   6ef6     MOVWF     0xf6,0x0                                                                                        
001780   0e08     MOVLW     0x8                                                                                             
001782   6ef7     MOVWF     0xf7,0x0                                                                                        
001784   0e00     MOVLW     0x0                                                                                             
001786   6ef8     MOVWF     0xf8,0x0                                                                                        
                                             _asm                                                                           C:\mcc18\src\traditional\startup\c018i.c
001788   0101     MOVLB     0x1                movlb data_ptr                                                               C:\mcc18\src\traditional\startup\c018i.c
00178a   0009     TBLRDPOSTINC                 tblrdpostinc                                                                 C:\mcc18\src\traditional\startup\c018i.c
00178c   50f5     MOVF      0xf5,0x0,0x0       movf TABLAT, 0, 0                                                            C:\mcc18\src\traditional\startup\c018i.c
00178e   6f11     MOVWF     0x11,0x1           movwf curr_entry, 1                                                          C:\mcc18\src\traditional\startup\c018i.c
001790   0009     TBLRDPOSTINC                 tblrdpostinc                                                                 C:\mcc18\src\traditional\startup\c018i.c
001792   50f5     MOVF      0xf5,0x0,0x0       movf TABLAT, 0, 0                                                            C:\mcc18\src\traditional\startup\c018i.c
001794   6f12     MOVWF     0x12,0x1           movwf curr_entry+1, 1                                                        C:\mcc18\src\traditional\startup\c018i.c
                                             _endasm                                                                        C:\mcc18\src\traditional\startup\c018i.c
                                               //while (curr_entry)                                                         C:\mcc18\src\traditional\startup\c018i.c
                                               //{                                                                          C:\mcc18\src\traditional\startup\c018i.c
                                               test:                                                                        C:\mcc18\src\traditional\startup\c018i.c
                                               _asm                                                                         C:\mcc18\src\traditional\startup\c018i.c
001796   e103     BNZ       0x179e              bnz 3                                                                       C:\mcc18\src\traditional\startup\c018i.c
001798   6711     TSTFSZ    0x11,0x1           tstfsz curr_entry, 1                                                         C:\mcc18\src\traditional\startup\c018i.c
00179a   d001     BRA       0x179e             bra 1                                                                        C:\mcc18\src\traditional\startup\c018i.c
                                               _endasm                                                                      C:\mcc18\src\traditional\startup\c018i.c
00179c   d03d     BRA       0x1818             goto done;                                                                   C:\mcc18\src\traditional\startup\c018i.c
                                                 /* Count down so we only have to look up the data in _cinit                C:\mcc18\src\traditional\startup\c018i.c
                                                  * once.                                                                   C:\mcc18\src\traditional\startup\c018i.c
                                                  *                                                                         C:\mcc18\src\traditional\startup\c018i.c
                                                  * At this point we know that TBLPTR points to the top of the current      C:\mcc18\src\traditional\startup\c018i.c
                                                  * entry in _cinit, so we can just start reading the from, to, and         C:\mcc18\src\traditional\startup\c018i.c
                                                  * size values.                                                            C:\mcc18\src\traditional\startup\c018i.c
                                                  */                                                                        C:\mcc18\src\traditional\startup\c018i.c
                                                 _asm                                                                       C:\mcc18\src\traditional\startup\c018i.c
                                           	/* read the source address */                                                   C:\mcc18\src\traditional\startup\c018i.c
00179e   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017a0   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\mcc18\src\traditional\startup\c018i.c
0017a2   6f0c     MOVWF     0xc,0x1        	movwf prom, 1                                                                   C:\mcc18\src\traditional\startup\c018i.c
0017a4   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017a6   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\mcc18\src\traditional\startup\c018i.c
0017a8   6f0d     MOVWF     0xd,0x1        	movwf prom+1, 1                                                                 C:\mcc18\src\traditional\startup\c018i.c
0017aa   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017ac   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\mcc18\src\traditional\startup\c018i.c
0017ae   6f0e     MOVWF     0xe,0x1        	movwf prom+2, 1                                                                 C:\mcc18\src\traditional\startup\c018i.c
                                           	/* skip a byte since it's stored as a 32bit int */                              C:\mcc18\src\traditional\startup\c018i.c
0017b0   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
                                           	/* read the destination address directly into FSR0 */                           C:\mcc18\src\traditional\startup\c018i.c
0017b2   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017b4   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\mcc18\src\traditional\startup\c018i.c
0017b6   6ee9     MOVWF     0xe9,0x0       	movwf FSR0L, 0                                                                  C:\mcc18\src\traditional\startup\c018i.c
0017b8   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017ba   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\mcc18\src\traditional\startup\c018i.c
0017bc   6eea     MOVWF     0xea,0x0       	movwf FSR0H, 0                                                                  C:\mcc18\src\traditional\startup\c018i.c
                                           	/* skip two bytes since it's stored as a 32bit int */                           C:\mcc18\src\traditional\startup\c018i.c
0017be   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017c0   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
                                           	/* read the destination address directly into FSR0 */                           C:\mcc18\src\traditional\startup\c018i.c
0017c2   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017c4   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\mcc18\src\traditional\startup\c018i.c
0017c6   6f0f     MOVWF     0xf,0x1        	movwf curr_byte, 1                                                              C:\mcc18\src\traditional\startup\c018i.c
0017c8   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017ca   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\mcc18\src\traditional\startup\c018i.c
0017cc   6f10     MOVWF     0x10,0x1       	movwf curr_byte+1, 1                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           	/* skip two bytes since it's stored as a 32bit int */                           C:\mcc18\src\traditional\startup\c018i.c
0017ce   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017d0   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
                                                 _endasm                                                                    C:\mcc18\src\traditional\startup\c018i.c
                                                 //prom = data_ptr->from;                                                   C:\mcc18\src\traditional\startup\c018i.c
                                                 //FSR0 = data_ptr->to;                                                     C:\mcc18\src\traditional\startup\c018i.c
                                                 //curr_byte = (unsigned short) data_ptr->size;                             C:\mcc18\src\traditional\startup\c018i.c
                                                 /* the table pointer now points to the next entry. Save it                 C:\mcc18\src\traditional\startup\c018i.c
                                                  * off since we'll be using the table pointer to do the copying            C:\mcc18\src\traditional\startup\c018i.c
                                                  * for the entry.                                                          C:\mcc18\src\traditional\startup\c018i.c
                                                  */                                                                        C:\mcc18\src\traditional\startup\c018i.c
0017d2   cff6     MOVFF     0xff6,0x113          data_ptr = TBLPTR;                                                         C:\mcc18\src\traditional\startup\c018i.c
0017d4   f113                                                                                                               
0017d6   cff7     MOVFF     0xff7,0x114                                                                                     
0017d8   f114                                                                                                               
0017da   cff8     MOVFF     0xff8,0x115                                                                                     
0017dc   f115                                                                                                               
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                                 /* now assign the source address to the table pointer */                   C:\mcc18\src\traditional\startup\c018i.c
0017de   c10c     MOVFF     0x10c,0xff6          TBLPTR = prom;                                                             C:\mcc18\src\traditional\startup\c018i.c
0017e0   fff6                                                                                                               
0017e2   c10d     MOVFF     0x10d,0xff7                                                                                     
0017e4   fff7                                                                                                               
0017e6   c10e     MOVFF     0x10e,0xff8                                                                                     
0017e8   fff8                                                                                                               
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                                 /* do the copy loop */                                                     C:\mcc18\src\traditional\startup\c018i.c
                                                 _asm                                                                       C:\mcc18\src\traditional\startup\c018i.c
                                                   // determine if we have any more bytes to copy                           C:\mcc18\src\traditional\startup\c018i.c
0017ea   0101     MOVLB     0x1            	movlb curr_byte                                                                 C:\mcc18\src\traditional\startup\c018i.c
0017ec   530f     MOVF      0xf,0x1,0x1    	movf curr_byte, 1, 1                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           copy_loop:                                                                       C:\mcc18\src\traditional\startup\c018i.c
0017ee   e102     BNZ       0x17f4         	bnz 2 // copy_one_byte                                                          C:\mcc18\src\traditional\startup\c018i.c
0017f0   5310     MOVF      0x10,0x1,0x1   	movf curr_byte + 1, 1, 1                                                        C:\mcc18\src\traditional\startup\c018i.c
0017f2   e007     BZ        0x1802         	bz 7 // done_copying                                                            C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           copy_one_byte:                                                                   C:\mcc18\src\traditional\startup\c018i.c
0017f4   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\mcc18\src\traditional\startup\c018i.c
0017f6   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\mcc18\src\traditional\startup\c018i.c
0017f8   6eee     MOVWF     0xee,0x0       	movwf POSTINC0, 0                                                               C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           	// decrement byte counter                                                       C:\mcc18\src\traditional\startup\c018i.c
0017fa   070f     DECF      0xf,0x1,0x1    	decf curr_byte, 1, 1                                                            C:\mcc18\src\traditional\startup\c018i.c
0017fc   e2f8     BC        0x17ee         	bc -8 // copy_loop                                                              C:\mcc18\src\traditional\startup\c018i.c
0017fe   0710     DECF      0x10,0x1,0x1           decf curr_byte + 1, 1, 1                                                 C:\mcc18\src\traditional\startup\c018i.c
001800   d7f9     BRA       0x17f4         	bra -7 // copy_one_byte                                                         C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           done_copying:                                                                    C:\mcc18\src\traditional\startup\c018i.c
                                                                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                                 _endasm                                                                    C:\mcc18\src\traditional\startup\c018i.c
                                                 /* restore the table pointer for the next entry */                         C:\mcc18\src\traditional\startup\c018i.c
001802   c113     MOVFF     0x113,0xff6          TBLPTR = data_ptr;                                                         C:\mcc18\src\traditional\startup\c018i.c
001804   fff6                                                                                                               
001806   c114     MOVFF     0x114,0xff7                                                                                     
001808   fff7                                                                                                               
00180a   c115     MOVFF     0x115,0xff8                                                                                     
00180c   fff8                                                                                                               
                                                 /* next entry... */                                                        C:\mcc18\src\traditional\startup\c018i.c
00180e   0101     MOVLB     0x1                  curr_entry--;                                                              C:\mcc18\src\traditional\startup\c018i.c
001810   0711     DECF      0x11,0x1,0x1                                                                                    
001812   0e00     MOVLW     0x0                                                                                             
001814   5b12     SUBWFB    0x12,0x1,0x1                                                                                    
001816   d7bf     BRA       0x1796               goto test;                                                                 C:\mcc18\src\traditional\startup\c018i.c
                                           done:                                                                            C:\mcc18\src\traditional\startup\c018i.c
                                           ;                                                                                C:\mcc18\src\traditional\startup\c018i.c
001818   0012     RETURN    0x0            }                                                                                C:\mcc18\src\traditional\startup\c018i.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\CDC\main.c
                                            * FileName:        main.c                                                       C:\MCHPFSUSB\fw\CDC\main.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\CDC\main.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\CDC\main.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\CDC\main.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\CDC\main.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\CDC\main.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\CDC\main.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\CDC\main.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\CDC\main.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\CDC\main.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\CDC\main.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\CDC\main.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\CDC\main.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\CDC\main.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\CDC\main.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\CDC\main.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\CDC\main.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\CDC\main.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\CDC\main.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\CDC\main.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB\fw\CDC\main.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\CDC\main.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\main.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\CDC\main.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\CDC\main.c
                                           #include "system\typedefs.h"                        // Required                  C:\MCHPFSUSB\fw\CDC\main.c
                                           #include "system\usb\usb.h"                         // Required                  C:\MCHPFSUSB\fw\CDC\main.c
                                           #include "io_cfg.h"                                 // Required                  C:\MCHPFSUSB\fw\CDC\main.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\main.c
                                           #include "system\usb\usb_compile_time_validation.h" // Optional                  C:\MCHPFSUSB\fw\CDC\main.c
                                           #include "user\user.h"                              // Modifiable                C:\MCHPFSUSB\fw\CDC\main.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\main.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\CDC\main.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\CDC\main.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\main.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\CDC\main.c
                                           static void InitializeSystem(void);                                              C:\MCHPFSUSB\fw\CDC\main.c
                                           void USBTasks(void);                                                             C:\MCHPFSUSB\fw\CDC\main.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\main.c
                                           /** V E C T O R  R E M A P P I N G *******************************************/  C:\MCHPFSUSB\fw\CDC\main.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\main.c
                                           extern void _startup (void);        // See c018i.c in your C18 compiler dir      C:\MCHPFSUSB\fw\CDC\main.c
                                           #pragma code _RESET_INTERRUPT_VECTOR = 0x000800                                  C:\MCHPFSUSB\fw\CDC\main.c
                                           void _reset (void)                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\main.c
000800   efed     GOTO      0x19da             _asm goto _startup _endasm                                                   C:\MCHPFSUSB\fw\CDC\main.c
000802   f00c                                                                                                               
000804   0012     RETURN    0x0            }                                                                                C:\MCHPFSUSB\fw\CDC\main.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\CDC\main.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\main.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\CDC\main.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\CDC\main.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\main.c
                                            * Function:        void main(void)                                              C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * Overview:        Main program entry point.                                    C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\main.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\main.c
                                           void main(void)                                                                  C:\MCHPFSUSB\fw\CDC\main.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\main.c
001924   d805     RCALL     0x1930             InitializeSystem();                                                          C:\MCHPFSUSB\fw\CDC\main.c
00192c   d7fc     BRA       0x1926             while(1)                                                                     C:\MCHPFSUSB\fw\CDC\main.c
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\main.c
001926   d812     RCALL     0x194c                 USBTasks();         // USB Tasks                                         C:\MCHPFSUSB\fw\CDC\main.c
001928   ecf5     CALL      0x11ea,0x0             ProcessIO();        // See user\user.c & .h                              C:\MCHPFSUSB\fw\CDC\main.c
00192a   f008                                                                                                               
                                               }//end while                                                                 C:\MCHPFSUSB\fw\CDC\main.c
00192e   0012     RETURN    0x0            }//end main                                                                      C:\MCHPFSUSB\fw\CDC\main.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\main.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\main.c
                                            * Function:        static void InitializeSystem(void)                           C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * Overview:        InitializeSystem is a centralize initialization routine.     C:\MCHPFSUSB\fw\CDC\main.c
                                            *                  All required USB initialization routines are called from     C:\MCHPFSUSB\fw\CDC\main.c
                                            *                  here.                                                        C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            *                  User application initialization routine should also be       C:\MCHPFSUSB\fw\CDC\main.c
                                            *                  called from here.                                            C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\main.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\main.c
                                           static void InitializeSystem(void)                                               C:\MCHPFSUSB\fw\CDC\main.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\main.c
001930   0e0f     MOVLW     0xf                ADCON1 |= 0x0F;                 // Default all pins to digital               C:\MCHPFSUSB\fw\CDC\main.c
001932   12c1     IORWF     0xc1,0x1,0x0                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\CDC\main.c
                                               #if defined(USE_USB_BUS_SENSE_IO)                                            C:\MCHPFSUSB\fw\CDC\main.c
001934   8292     BSF       0x92,0x1,0x0       tris_usb_bus_sense = INPUT_PIN; // See io_cfg.h                              C:\MCHPFSUSB\fw\CDC\main.c
                                               #endif                                                                       C:\MCHPFSUSB\fw\CDC\main.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\main.c
                                               #if defined(USE_SELF_POWER_SENSE_IO)                                         C:\MCHPFSUSB\fw\CDC\main.c
001936   8492     BSF       0x92,0x2,0x0       tris_self_power = INPUT_PIN;                                                 C:\MCHPFSUSB\fw\CDC\main.c
                                               #endif                                                                       C:\MCHPFSUSB\fw\CDC\main.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\main.c
001938   0e14     MOVLW     0x14               mInitializeUSBDriver();         // See usbdrv.h                              C:\MCHPFSUSB\fw\CDC\main.c
00193a   6e6f     MOVWF     0x6f,0x0                                                                                        
00193c   0101     MOVLB     0x1                                                                                             
00193e   6b1e     CLRF      0x1e,0x1                                                                                        
001940   0101     MOVLB     0x1                                                                                             
001942   6b1f     CLRF      0x1f,0x1                                                                                        
001944   0101     MOVLB     0x1                                                                                             
001946   6b20     CLRF      0x20,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\main.c
001948   efd4     GOTO      0x11a8             UserInit();                     // See user.c & .h                           C:\MCHPFSUSB\fw\CDC\main.c
00194a   f008                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\CDC\main.c
                                           }//end InitializeSystem                                                          C:\MCHPFSUSB\fw\CDC\main.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\main.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\main.c
                                            * Function:        void USBTasks(void)                                          C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * PreCondition:    InitializeSystem has been called.                            C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * Overview:        Service loop for USB tasks.                                  C:\MCHPFSUSB\fw\CDC\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\main.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\main.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\main.c
                                           void USBTasks(void)                                                              C:\MCHPFSUSB\fw\CDC\main.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\main.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\main.c
                                                * Servicing Hardware                                                        C:\MCHPFSUSB\fw\CDC\main.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\main.c
00194c   ec97     CALL      0x152e,0x0         USBCheckBusStatus();                    // Must use polling method           C:\MCHPFSUSB\fw\CDC\main.c
00194e   f00a                                                                                                               
001950   be6f     BTFSC     0x6f,0x7,0x0       if(UCFGbits.UTEYE!=1)                                                        C:\MCHPFSUSB\fw\CDC\main.c
001952   d002     BRA       0x1958                                                                                          
001954   ecb8     CALL      0x1570,0x0             USBDriverService();                 // Interrupt or polling method       C:\MCHPFSUSB\fw\CDC\main.c
001956   f00a                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\CDC\main.c
                                               #if defined(USB_USE_CDC)                                                     C:\MCHPFSUSB\fw\CDC\main.c
001958   ef61     GOTO      0xac2              CDCTxService();                                                              C:\MCHPFSUSB\fw\CDC\main.c
00195a   f005                                                                                                               
                                               #endif                                                                       C:\MCHPFSUSB\fw\CDC\main.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\main.c
                                           }// end USBTasks                                                                 C:\MCHPFSUSB\fw\CDC\main.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\main.c
                                           /** EOF main.c ***************************************************************/  C:\MCHPFSUSB\fw\CDC\main.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * FileName:        usbmmap.c                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * -usbmmap.c-                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * USB Memory Map                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * This file is the USB memory manager; it serves as a compile-time memory       C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * allocator for the USB endpoints. It uses the compile time options passed      C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * from usbcfg.h to instantiate endpoints and endpoint buffer.                   C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Each endpoint requires to have a set of Buffer Descriptor registers(BDT).     C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * A BDT is 4-byte long and has a specific RAM location for each endpoint.       C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * The BDT for endpoint 0 out is located at address 0x400 to 0x403.              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * The BDT for endpoint 0 in is located at address 0x404 to 0x407.               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * The BDT for endpoint 1 out is located at address 0x408 to 0x40B.              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * and so on... The above allocation assumes the Ping-Pong Buffer Mode 0 is      C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * used. These locations are already hard-wired in the silicon. The point        C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * of doing instantiation, i.e. volatile far BDT ep0Bo;, is to provide the       C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * C compiler a way to address each variable directly. This is very important    C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * because when a register can be accessed directly, it saves execution time     C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * and reduces program size.                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Endpoints are defined using the endpoint number and the direction             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * of transfer. For simplicity, usbmmap.c only uses the endpoint number          C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * in the BDT register allocation scheme. This means if the usbcfg.h states      C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * that the MAX_EP_NUMBER is number 1, then four BDTs will be                    C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * instantiated: one each for endpoint0 in and endpoint0 out, which must         C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * always be instantiated for control transfer by default, and one each sets     C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * for endpoint1 in and endpoint1 out. The naming convention for instantiating   C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * BDT is                                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * ep<#>B<d>                                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * where # is the endpoint number, and d is the direction of                     C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * transfer, which could be either <i> or <o>.                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * The USB memory manager uses MAX_EP_NUMBER, as defined in usbcfg.h, to define  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * the endpoints to be instantiated. This represents the highest endpoint        C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * number to be allocated, not how many endpoints are used. Since the BDTs for   C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * endpoints have hardware-assigned addresses in Bank 4, setting this value too  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * high may lead to inefficient use of data RAM. For example, if an application  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * uses only endpoints EP0 and EP4, then the MAX_EP_NUMBER is 4, and not 2.      C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * The in-between endpoint BDTs in this example (EP1, EP2, and EP3) go unused,   C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * and the 24 bytes of memory associated with them are wasted. It does not make  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * much sense to skip endpoints, but the final decision lies with the user.      C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * The next step is to assign the instantiated BDTs to different                 C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * USB functions. The firmware framework fundamentally assumes that every USB    C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * function should know which endpoint it is using, i.e., the default control    C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * transfer should know that it is using endpoint 0 in and endpoint 0 out.       C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * A HID class can choose which endpoint it wants to use, but once chosen, it    C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * should always know the number of the endpoint.                                C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * The assignment of endpoints to USB functions is managed centrally             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * in usbcfg.h. This helps prevent the mistake of having more                    C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * than one USB function using the same endpoint. The "Endpoint Allocation"      C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * section in usbcfg.h provides examples for how to map USB endpoints to USB     C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * functions.                                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Quite a few things can be mapped in that section. There is no                 C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * one correct way to do the mapping and the user has the choice to              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * choose a method that is most suitable to the application.                     C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Typically, however, a user will want to map the following for a given         C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * USB interface function:                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * 1. The USB interface ID                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * 2. The endpoint control registers (UEPn)                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * 3. The BDT registers (ep<#>B<d>)                                              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * 4. The endpoint size                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Example: Assume a USB device class "foo", which uses one out endpoint         C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *          of size 64-byte and one in endpoint of size 64-byte, then:           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * #define FOO_INTF_ID          0x00                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * #define FOO_UEP              UEP1                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * #define FOO_BD_OUT           ep1Bo                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * #define FOO_BD_IN            ep1Bi                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * #define FOO_EP_SIZE          64                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * The mapping above has chosen class "foo" to use endpoint 1.                   C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * The names are arbitrary and can be anything other than FOO_??????.            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * For abstraction, the code for class "foo" should use the abstract             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * definitions of FOO_BD_OUT,FOO_BD_IN, and not ep1Bo or ep1Bi.                  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Note that the endpoint size defined in the usbcfg.h file is again             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * used in the usbmmap.c file. This shows that the relationship between          C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * the two files are tightly related.                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * The endpoint buffer for each USB function must be located in the              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * dual-port RAM area and has to come after all the BDTs have been               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * instantiated. An example declaration is:                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * volatile far unsigned char[FOO_EP_SIZE] data;                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * The 'volatile' keyword tells the compiler not to perform any code             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * optimization on this variable because its content could be modified           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * by the hardware. The 'far' keyword tells the compiler that this variable      C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * is not located in the Access RAM area (0x000 - 0x05F).                        C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * For the variable to be globally accessible by other files, it should be       C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * declared in the header file usbmmap.h as an extern definition, such as        C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * extern volatile far unsigned char[FOO_EP_SIZE] data;                          C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Conclusion:                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * In a short summary, the dependencies between usbcfg and usbmmap can           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * be shown as:                                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * usbcfg[MAX_EP_NUMBER] -> usbmmap                                              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * usbmmap[ep<#>B<d>] -> usbcfg                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * usbcfg[EP size] -> usbmmap                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * usbcfg[abstract ep definitions] -> usb9/hid/cdc/etc class code                C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * usbmmap[endpoint buffer variable] -> usb9/hid/cdc/etc class code              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Data mapping provides a means for direct addressing of BDT and endpoint       C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * buffer. This means less usage of pointers, which equates to a faster and      C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * smaller program code.                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           /** U S B  G L O B A L  V A R I A B L E S ************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           byte usb_device_state;          // Device States: DETACHED, ATTACHED, ...        C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           USB_DEVICE_STATUS usb_stat;     // Global USB flags                              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           byte usb_active_cfg;            // Value of current configuration                C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           byte usb_alt_intf[MAX_NUM_INT]; // Array to keep track of the current alternate  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                           // setting for each interface ID                 C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           /** U S B  F I X E D  L O C A T I O N  V A R I A B L E S *********************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #pragma udata usbram4=0x400     //See Linker Script,usb4:0x400-0x4FF(256-byte)   C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Section A: Buffer Descriptor Table                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * - 0x400 - 0x4FF(max)                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * - MAX_EP_NUMBER is defined in autofiles\usbcfg.h                              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * - BDT data type is defined in system\usb\usbmmap.h                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #if(0 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep0Bo;         //Endpoint #0 BD Out                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep0Bi;         //Endpoint #0 BD In                              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #if(1 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep1Bo;         //Endpoint #1 BD Out                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep1Bi;         //Endpoint #1 BD In                              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #if(2 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep2Bo;         //Endpoint #2 BD Out                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep2Bi;         //Endpoint #2 BD In                              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #if(3 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep3Bo;         //Endpoint #3 BD Out                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep3Bi;         //Endpoint #3 BD In                              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #if(4 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep4Bo;         //Endpoint #4 BD Out                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep4Bi;         //Endpoint #4 BD In                              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #if(5 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep5Bo;         //Endpoint #5 BD Out                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep5Bi;         //Endpoint #5 BD In                              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #if(6 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep6Bo;         //Endpoint #6 BD Out                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep6Bi;         //Endpoint #6 BD In                              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #if(7 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep7Bo;         //Endpoint #7 BD Out                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep7Bi;         //Endpoint #7 BD In                              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #if(8 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep8Bo;         //Endpoint #8 BD Out                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep8Bi;         //Endpoint #8 BD In                              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #if(9 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep9Bo;         //Endpoint #9 BD Out                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep9Bi;         //Endpoint #9 BD In                              C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #if(10 <= MAX_EP_NUMBER)                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep10Bo;        //Endpoint #10 BD Out                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep10Bi;        //Endpoint #10 BD In                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #if(11 <= MAX_EP_NUMBER)                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep11Bo;        //Endpoint #11 BD Out                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep11Bi;        //Endpoint #11 BD In                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #if(12 <= MAX_EP_NUMBER)                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep12Bo;        //Endpoint #12 BD Out                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep12Bi;        //Endpoint #12 BD In                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #if(13 <= MAX_EP_NUMBER)                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep13Bo;        //Endpoint #13 BD Out                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep13Bi;        //Endpoint #13 BD In                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #if(14 <= MAX_EP_NUMBER)                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep14Bo;        //Endpoint #14 BD Out                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep14Bi;        //Endpoint #14 BD In                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #if(15 <= MAX_EP_NUMBER)                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep15Bo;        //Endpoint #15 BD Out                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far BDT ep15Bi;        //Endpoint #15 BD In                             C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Section B: EP0 Buffer Space                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            ******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * - Two buffer areas are defined:                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *   A. CTRL_TRF_SETUP                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *      - Size = EP0_BUFF_SIZE as defined in autofiles\usbcfg.h                  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *      - Detailed data structure allows direct adddressing of bits and bytes.   C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *   B. CTRL_TRF_DATA                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *      - Size = EP0_BUFF_SIZE as defined in autofiles\usbcfg.h                  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *      - Data structure allows direct adddressing of the first 8 bytes.         C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * - Both data types are defined in system\usb\usbdefs\usbdefs_ep0_buff.h        C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far CTRL_TRF_SETUP SetupPkt;                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far CTRL_TRF_DATA CtrlTrfData;                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            * Section C: CDC Buffer                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            ******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #pragma udata usbram5a=0x500    //See Linker Script,usb5:0x500-...               C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #if defined(USB_USE_CDC)                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far unsigned char cdc_notice[CDC_INT_EP_SIZE];                          C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far unsigned char cdc_data_rx[CDC_BULK_OUT_EP_SIZE];                    C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           volatile far unsigned char cdc_data_tx[CDC_BULK_IN_EP_SIZE];                     C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           /** EOF usbmmap.c ************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbmmap.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * FileName:        usbdrv.c                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           #include "io_cfg.h"             // Required for USBCheckBusStatus()              C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USBModuleEnable(void);                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USBModuleDisable(void);                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USBSuspend(void);                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USBWakeFromSuspend(void);                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USBProtocolResetHandler(void);                                              C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USB_SOF_Handler(void);                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USBStallHandler(void);                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USBErrorHandler(void);                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBCheckBusStatus(void)                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine enables/disables the USB module by monitoring   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  the USB power signal.                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USBCheckBusStatus(void)                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               /**************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * Bus Attachment & Detachment Detection                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * usb_bus_sense is an i/o pin defined in io_cfg.h                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                *************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               #define USB_BUS_ATTACHED    1                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               #define USB_BUS_DETACHED    0                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00152e   a280     BTFSS     0x80,0x1,0x0       if(usb_bus_sense == USB_BUS_ATTACHED)       // Is USB bus attached?          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001530   d003     BRA       0x1538                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001532   a66d     BTFSS     0x6d,0x3,0x0           if(UCONbits.USBEN == 0)                 // Is the module off?            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001534   d80f     RCALL     0x1554                     USBModuleEnable();                  // Is off, enable it             C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               }                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001536   d002     BRA       0x153c             else                                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001538   b66d     BTFSC     0x6d,0x3,0x0           if(UCONbits.USBEN == 1)                 // Is the module on?             C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00153a   d813     RCALL     0x1562                     USBModuleDisable();                 // Is on, disable it             C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               }//end if(usb_bus_sense...)                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * After enabling the USB module, it takes some time for the voltage         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * on the D+ or D- line to rise high enough to get out of the SE0 condition. C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * The USB Reset interrupt should not be unmasked until the SE0 condition is C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * cleared. This helps preventing the firmware from misinterpreting this     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * unique event as a USB bus reset from the USB host.                        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00153c   0101     MOVLB     0x1                if(usb_device_state == ATTACHED_STATE)                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00153e   051e     DECF      0x1e,0x0,0x1                                                                                    
001540   e108     BNZ       0x1552                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001542   ba6d     BTFSC     0x6d,0x5,0x0           if(!UCONbits.SE0)                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001544   d006     BRA       0x1552                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001546   6a68     CLRF      0x68,0x0                   UIR = 0;                        // Clear all USB interrupts          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001548   6a69     CLRF      0x69,0x0                   UIE = 0;                        // Mask all USB interrupts           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00154a   8069     BSF       0x69,0x0,0x0               UIEbits.URSTIE = 1;             // Unmask RESET interrupt            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00154c   8869     BSF       0x69,0x4,0x0               UIEbits.IDLEIE = 1;             // Unmask IDLE interrupt             C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00154e   0e02     MOVLW     0x2                        usb_device_state = POWERED_STATE;                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001550   6f1e     MOVWF     0x1e,0x1                                                                                        
                                                   }//end if                           // else wait until SE0 is cleared    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               }//end if(usb_device_state == ATTACHED_STATE)                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001552   0012     RETURN    0x0            }//end USBCheckBusStatus                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBModuleEnable(void)                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine enables the USB module.                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  An end designer should never have to call this routine       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  manually. This routine should only be called from            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  USBCheckBusStatus().                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Note:            See USBCheckBusStatus() for more information.                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USBModuleEnable(void)                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001554   6a6d     CLRF      0x6d,0x0           UCON = 0;                                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001556   6a69     CLRF      0x69,0x0           UIE = 0;                                // Mask all USB interrupts           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001558   866d     BSF       0x6d,0x3,0x0       UCONbits.USBEN = 1;                     // Enable module & attach to bus     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00155a   0101     MOVLB     0x1                usb_device_state = ATTACHED_STATE;      // Defined in usbmmap.c & .h         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00155c   0e01     MOVLW     0x1                                                                                             
00155e   6f1e     MOVWF     0x1e,0x1                                                                                        
001560   0012     RETURN    0x0            }//end USBModuleEnable                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBModuleDisable(void)                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine disables the USB module.                        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  An end designer should never have to call this routine       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  manually. This routine should only be called from            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  USBCheckBusStatus().                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Note:            See USBCheckBusStatus() for more information.                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USBModuleDisable(void)                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001562   6a6d     CLRF      0x6d,0x0           UCON = 0;                               // Disable module & detach from bus  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001564   6a69     CLRF      0x69,0x0           UIE = 0;                                // Mask all USB interrupts           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001566   0101     MOVLB     0x1                usb_device_state = DETACHED_STATE;      // Defined in usbmmap.c & .h         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001568   6b1e     CLRF      0x1e,0x1                                                                                        
00156a   0012     RETURN    0x0            }//end USBModuleDisable                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBSoftDetach(void)                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    The device will have to be re-enumerated to function again.  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        USBSoftDetach electrically disconnects the device from       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  the bus. This is done by stop supplying Vusb voltage to      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  pull-up resistor. The pull-down resistors on the host        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  side will pull both differential signal lines low and        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  the host registers the event as a disconnect.                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  Since the USB cable is not physically disconnected, the      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  power supply through the cable can still be sensed by        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  the device. The next time USBCheckBusStatus() function       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  is called, it will reconnect the device back to the bus.     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USBSoftDetach(void)                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00156c   efb1     GOTO      0x1562             USBModuleDisable();                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00156e   f00a                                                                                                               
                                           }//end USBSoftDetach                                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBDriverService(void)                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine is the heart of this firmware. It manages       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  all USB interrupts.                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Note:            Device state transitions through the following stages:       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  DETACHED -> ATTACHED -> POWERED -> DEFAULT ->                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  ADDRESS_PENDING -> ADDRESSED -> CONFIGURED -> READY          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USBDriverService(void)                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if USB cable is not even attached.        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001570   0101     MOVLB     0x1                if(usb_device_state == DETACHED_STATE) return;                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001572   511e     MOVF      0x1e,0x0,0x1                                                                                    
001574   e101     BNZ       0x1578                                                                                          
001576   d03a     BRA       0x15ec                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * Task A: Service USB Activity Interrupt                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001578   5068     MOVF      0x68,0x0,0x0       if(UIRbits.ACTVIF && UIEbits.ACTVIE)    USBWakeFromSuspend();                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00157a   0b04     ANDLW     0x4                                                                                             
00157c   e004     BZ        0x1586                                                                                          
00157e   5069     MOVF      0x69,0x0,0x0                                                                                    
001580   0b04     ANDLW     0x4                                                                                             
001582   e001     BZ        0x1586                                                                                          
001584   d83c     RCALL     0x15fe                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if the device is in suspend mode.         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001586   b26d     BTFSC     0x6d,0x1,0x0       if(UCONbits.SUSPND==1) return;                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001588   d031     BRA       0x15ec                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * Task B: Service USB Bus Reset Interrupt.                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * When bus reset is received during suspend, ACTVIF will be set first,      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * once the UCONbits.SUSPND is clear, then the URSTIF bit will be asserted.  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * This is why URSTIF is checked after ACTVIF.                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00158a   5068     MOVF      0x68,0x0,0x0       if(UIRbits.URSTIF && UIEbits.URSTIE)    USBProtocolResetHandler();           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00158c   0b01     ANDLW     0x1                                                                                             
00158e   e004     BZ        0x1598                                                                                          
001590   5069     MOVF      0x69,0x0,0x0                                                                                    
001592   0b01     ANDLW     0x1                                                                                             
001594   e001     BZ        0x1598                                                                                          
001596   d854     RCALL     0x1640                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * Task C: Service other USB interrupts                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001598   5068     MOVF      0x68,0x0,0x0       if(UIRbits.IDLEIF && UIEbits.IDLEIE)    USBSuspend();                        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00159a   0b10     ANDLW     0x10                                                                                            
00159c   e004     BZ        0x15a6                                                                                          
00159e   5069     MOVF      0x69,0x0,0x0                                                                                    
0015a0   0b10     ANDLW     0x10                                                                                            
0015a2   e001     BZ        0x15a6                                                                                          
0015a4   d824     RCALL     0x15ee                                                                                          
0015a6   5068     MOVF      0x68,0x0,0x0       if(UIRbits.SOFIF && UIEbits.SOFIE)      USB_SOF_Handler();                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015a8   0b40     ANDLW     0x40                                                                                            
0015aa   e004     BZ        0x15b4                                                                                          
0015ac   5069     MOVF      0x69,0x0,0x0                                                                                    
0015ae   0b40     ANDLW     0x40                                                                                            
0015b0   e001     BZ        0x15b4                                                                                          
0015b2   d83b     RCALL     0x162a                                                                                          
0015b4   5068     MOVF      0x68,0x0,0x0       if(UIRbits.STALLIF && UIEbits.STALLIE)  USBStallHandler();                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015b6   0b20     ANDLW     0x20                                                                                            
0015b8   e004     BZ        0x15c2                                                                                          
0015ba   5069     MOVF      0x69,0x0,0x0                                                                                    
0015bc   0b20     ANDLW     0x20                                                                                            
0015be   e001     BZ        0x15c2                                                                                          
0015c0   d836     RCALL     0x162e                                                                                          
0015c2   5068     MOVF      0x68,0x0,0x0       if(UIRbits.UERRIF && UIEbits.UERRIE)    USBErrorHandler();                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015c4   0b02     ANDLW     0x2                                                                                             
0015c6   e004     BZ        0x15d0                                                                                          
0015c8   5069     MOVF      0x69,0x0,0x0                                                                                    
0015ca   0b02     ANDLW     0x2                                                                                             
0015cc   e001     BZ        0x15d0                                                                                          
0015ce   d836     RCALL     0x163c                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if the host has not sent a bus reset.     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * Once bus reset is received, the device transitions into the DEFAULT       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * state and is ready for communication.                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015d0   0e03     MOVLW     0x3                if(usb_device_state < DEFAULT_STATE) return;                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015d2   0101     MOVLB     0x1                                                                                             
0015d4   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
0015d6   e201     BC        0x15da                                                                                          
0015d8   d009     BRA       0x15ec                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * Task D: Servicing USB Transaction Complete Interrupt                      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015da   5068     MOVF      0x68,0x0,0x0       if(UIRbits.TRNIF && UIEbits.TRNIE)                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015dc   0b08     ANDLW     0x8                                                                                             
0015de   e006     BZ        0x15ec                                                                                          
0015e0   5069     MOVF      0x69,0x0,0x0                                                                                    
0015e2   0b08     ANDLW     0x8                                                                                             
0015e4   e003     BZ        0x15ec                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                    * USBCtrlEPService only services transactions over EP0.                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                    * It ignores all other EP transactions.                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                    */                                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015e6   ec5f     CALL      0xebe,0x0              USBCtrlEPService();                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015e8   f007                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                    * Other EP can be serviced later by responsible device class firmware.  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                    * Each device driver knows when an OUT or IN transaction is ready by    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                    * checking the buffer ownership bit.                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                    * An OUT EP should always be owned by SIE until the data is ready.      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                    * An IN EP should always be owned by CPU until the data is ready.       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                    *                                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                    * Because of this logic, it is not necessary to save the USTAT value    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                    * of non-EP0 transactions.                                              C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                    */                                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015ea   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               }//end if(UIRbits.TRNIF && UIEbits.TRNIE)                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015ec   0012     RETURN    0x0            }//end USBDriverService                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBSuspend(void)                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Overview:                                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USBSuspend(void)                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * NOTE: Do not clear UIRbits.ACTVIF here!                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * Reason:                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * ACTVIF is only generated once an IDLEIF has been generated.               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * This is a 1:1 ratio interrupt generation.                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * For every IDLEIF, there will be only one ACTVIF regardless of             C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * the number of subsequent bus transitions.                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * If the ACTIF is cleared here, a problem could occur when:                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * [       IDLE       ][bus activity ->                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * <--- 3 ms ----->     ^                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                *                ^     ACTVIF=1                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                *                IDLEIF=1                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                *  #           #           #           #   (#=Program polling flags)        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                *                          ^                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                *                          This polling loop will see both                  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                *                          IDLEIF=1 and ACTVIF=1.                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                *                          However, the program services IDLEIF first       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                *                          because ACTIVIE=0.                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                *                          If this routine clears the only ACTIVIF,         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                *                          then it can never get out of the suspend         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                *                          mode.                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015ee   8469     BSF       0x69,0x2,0x0       UIEbits.ACTVIE = 1;                     // Enable bus activity interrupt     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015f0   9868     BCF       0x68,0x4,0x0       UIRbits.IDLEIF = 0;                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015f2   826d     BSF       0x6d,0x1,0x0       UCONbits.SUSPND = 1;                    // Put USB module in power conserve  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                       // mode, SIE clock inactive          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * At this point the PIC can go into sleep,idle, or                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * switch to a slower clock, etc.                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               /* Modifiable Section */                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015f4   9aa1     BCF       0xa1,0x5,0x0       PIR2bits.USBIF = 0;                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015f6   8aa0     BSF       0xa0,0x5,0x0       PIE2bits.USBIE = 1;                     // Set USB wakeup source             C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015f8   0003     SLEEP                        Sleep();                                // Goto sleep                        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015fa   9aa0     BCF       0xa0,0x5,0x0       PIE2bits.USBIE = 0;                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               /* End Modifiable Section */                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015fc   0012     RETURN    0x0            }//end USBSuspend                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBWakeFromSuspend(void)                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Overview:                                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USBWakeFromSuspend(void)                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * If using clock switching, this is the place to restore the                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * original clock frequency.                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0015fe   926d     BCF       0x6d,0x1,0x0       UCONbits.SUSPND = 0;                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001600   9469     BCF       0x69,0x2,0x0       UIEbits.ACTVIE = 0;                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001602   9468     BCF       0x68,0x2,0x0       UIRbits.ACTVIF = 0;                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001604   0012     RETURN    0x0            }//end USBWakeFromSuspend                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBRemoteWakeup(void)                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This function should be called by user when the device       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  is waken up by an external stimulus other than ACTIVIF.      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  Please read the note below to understand the limitations.    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Note:            The modifiable section in this routine should be changed     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  to meet the application needs. Current implementation        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  temporary blocks other functions from executing for a        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  period of 1-13 ms depending on the core frequency.           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  According to USB 2.0 specification section 7.1.7.7,          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  "The remote wakeup device must hold the resume signaling     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  for at lest 1 ms but for no more than 15 ms."                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  The idea here is to use a delay counter loop, using a        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  common value that would work over a wide range of core       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  frequencies.                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  That value selected is 1800. See table below:                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  Core Freq(MHz)      MIP         RESUME Signal Period (ms)    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                      48              12          1.05                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                       4              1           12.6                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  * These timing could be incorrect when using code            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                    optimization or extended instruction mode,                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                    or when having other interrupts enabled.                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                    Make sure to verify using the MPLAB SIM's Stopwatch        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USBRemoteWakeup(void)                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               static word delay_count;                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001606   0101     MOVLB     0x1                if(usb_stat.RemoteWakeup == 1)          // Check if RemoteWakeup function    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001608   a11f     BTFSS     0x1f,0x0,0x1                                                                                    
00160a   d00e     BRA       0x1628                                                                                          
                                               {                                       // has been enabled by the host.     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00160c   dff8     RCALL     0x15fe                 USBWakeFromSuspend();               // Unsuspend USB modue               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00160e   846d     BSF       0x6d,0x2,0x0           UCONbits.RESUME = 1;                // Start RESUME signaling            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                   /* Modifiable Section */                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001610   0101     MOVLB     0x1                    delay_count = 1800U;                // Set RESUME line for 1-13 ms       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001612   0e08     MOVLW     0x8                                                                                             
001614   6f25     MOVWF     0x25,0x1                                                                                        
001616   0e07     MOVLW     0x7                                                                                             
001618   6f26     MOVWF     0x26,0x1                                                                                        
                                                   do                                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00161a   0725     DECF      0x25,0x1,0x1               delay_count--;                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00161c   0e00     MOVLW     0x0                                                                                             
00161e   5b26     SUBWFB    0x26,0x1,0x1                                                                                    
001620   5125     MOVF      0x25,0x0,0x1           }while(delay_count);                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001622   1126     IORWF     0x26,0x0,0x1                                                                                    
001624   e1fa     BNZ       0x161a                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                   /* End Modifiable Section */                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001626   946d     BCF       0x6d,0x2,0x0           UCONbits.RESUME = 0;                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               }//endif                                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001628   0012     RETURN    0x0            }//end USBRemoteWakeup                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USB_SOF_Handler(void)                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The USB host sends out a SOF packet to full-speed devices    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  every 1 ms. This interrupt may be useful for isochronous     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  pipes. End designers should implement callback routine       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  as necessary.                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USB_SOF_Handler(void)                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               /* Callback routine here */                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00162a   9c68     BCF       0x68,0x6,0x0       UIRbits.SOFIF = 0;                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00162c   0012     RETURN    0x0            }//end USB_SOF_Handler                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBStallHandler(void)                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    A STALL packet is sent to the host by the SIE.               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The STALLIF is set anytime the SIE sends out a STALL         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  packet regardless of which endpoint causes it.               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  A Setup transaction overrides the STALL function. A stalled  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  endpoint stops stalling once it receives a setup packet.     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  In this case, the SIE will accepts the Setup packet and      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  set the TRNIF flag to notify the firmware. STALL function    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  for that particular endpoint pipe will be automatically      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  disabled (direction specific).                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  There are a few reasons for an endpoint to be stalled.       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  1. When a non-supported USB request is received.             C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                     Example: GET_DESCRIPTOR(DEVICE_QUALIFIER)                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  2. When an endpoint is currently halted.                     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  3. When the device class specifies that an endpoint must     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                     stall in response to a specific event.                    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                     Example: Mass Storage Device Class                        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                              If the CBW is not valid, the device shall        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                              STALL the Bulk-In pipe.                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                              See USB Mass Storage Class Bulk-only Transport   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                              Specification for more details.                  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Note:            UEPn.EPSTALL can be scanned to see which endpoint causes     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  the stall event.                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  If                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USBStallHandler(void)                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * Does not really have to do anything here,                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * even for the control endpoint.                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * All BDs of Endpoint 0 are owned by SIE right now,                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * but once a Setup Transaction is received, the ownership                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * for EP0_OUT will be returned to CPU.                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * When the Setup Transaction is serviced, the ownership                     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                * for EP0_IN will then be forced back to CPU by firmware.                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00162e   a070     BTFSS     0x70,0x0,0x0       if(UEP0bits.EPSTALL == 1)                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001630   d003     BRA       0x1638                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001632   ecc6     CALL      0x118c,0x0             USBPrepareForNextSetupTrf();        // Firmware work-around              C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001634   f008                                                                                                               
001636   9070     BCF       0x70,0x0,0x0           UEP0bits.EPSTALL = 0;                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                               }                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001638   9a68     BCF       0x68,0x5,0x0       UIRbits.STALLIF = 0;                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00163a   0012     RETURN    0x0            }//end USBStallHandler                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBErrorHandler(void)                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The purpose of this interrupt is mainly for debugging        C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  during development. Check UEIR to see which error causes     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  the interrupt.                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USBErrorHandler(void)                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00163c   9268     BCF       0x68,0x1,0x0       UIRbits.UERRIF = 0;                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00163e   0012     RETURN    0x0            }//end USBErrorHandler                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBProtocolResetHandler(void)                           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    A USB bus reset is received from the host.                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    Currently, this routine flushes any pending USB              C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  transactions. It empties out the USTAT FIFO. This action     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  might not be desirable in some applications.                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        Once a USB bus reset is received from the host, this         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  routine should be called. It resets the device address to    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  zero, disables all non-EP0 endpoints, initializes EP0 to     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  be ready for default communication, clears all USB           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  interrupt flags, unmasks applicable USB interrupts, and      C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                  reinitializes internal state-machine variables.              C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           void USBProtocolResetHandler(void)                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001640   6a6a     CLRF      0x6a,0x0           UEIR = 0;                       // Clear all USB error flags                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001642   6a68     CLRF      0x68,0x0           UIR = 0;                        // Clears all USB interrupts                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001644   0e9f     MOVLW     0x9f               UEIE = 0b10011111;              // Unmask all USB error interrupts           C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001646   6e6b     MOVWF     0x6b,0x0                                                                                        
001648   0e7b     MOVLW     0x7b               UIE = 0b01111011;               // Enable all interrupts except ACTVIE       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00164a   6e69     MOVWF     0x69,0x0                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00164c   6a6e     CLRF      0x6e,0x0           UADDR = 0x00;                   // Reset to default address                  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00164e   0e0f     MOVLW     0xf                mDisableEP1to15();              // Reset all non-EP0 UEPn registers          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001650   6ee6     MOVWF     0xe6,0x0                                                                                        
001652   0e71     MOVLW     0x71                                                                                            
001654   6ee6     MOVWF     0xe6,0x0                                                                                        
001656   0e0f     MOVLW     0xf                                                                                             
001658   6ee6     MOVWF     0xe6,0x0                                                                                        
00165a   d814     RCALL     0x1684                                                                                          
00165c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00165e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001660   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001662   0e16     MOVLW     0x16               UEP0 = EP_CTRL|HSHK_EN;         // Init EP0 as a Ctrl EP, see usbdrv.h       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001664   6e70     MOVWF     0x70,0x0                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001666   a668     BTFSS     0x68,0x3,0x0       while(UIRbits.TRNIF == 1)       // Flush any pending transactions            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001668   d002     BRA       0x166e                                                                                          
00166c   d7fc     BRA       0x1666                                                                                          
00166a   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00166e   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;            // Make sure packet processing is enabled    C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001670   ecc6     CALL      0x118c,0x0         USBPrepareForNextSetupTrf();    // Declared in usbctrltrf.c                  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001672   f008                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001674   0101     MOVLB     0x1                usb_stat.RemoteWakeup = 0;      // Default status flag to disable            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001676   911f     BCF       0x1f,0x0,0x1                                                                                    
001678   0101     MOVLB     0x1                usb_active_cfg = 0;             // Clear active configuration                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00167a   6b20     CLRF      0x20,0x1                                                                                        
00167c   0101     MOVLB     0x1                usb_device_state = DEFAULT_STATE;                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00167e   0e03     MOVLW     0x3                                                                                             
001680   6f1e     MOVWF     0x1e,0x1                                                                                        
001682   0012     RETURN    0x0            }//end USBProtocolResetHandler                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /* Auxiliary Function */                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001684   cfd9     MOVFF     0xfd9,0xfe6    void ClearArray(byte* startAdr,byte count)                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
001686   ffe6                                                                                                               
001688   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00168a   ffd9                                                                                                               
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00168c   0efd     MOVLW     0xfd               *startAdr;                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00168e   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
001690   ffe9                                                                                                               
001692   0efe     MOVLW     0xfe                                                                                            
001694   cfdb     MOVFF     0xfdb,0xfea                                                                                     
001696   ffea                                                                                                               
001698   0efc     MOVLW     0xfc               while(count)                                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00169a   50db     MOVF      0xdb,0x0,0x0                                                                                    
00169c   e004     BZ        0x16a6                                                                                          
0016a4   d7f9     BRA       0x1698                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                   _asm                                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
00169e   6aee     CLRF      0xee,0x0               clrf POSTINC0,0                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                                   _endasm                                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0016a0   0efc     MOVLW     0xfc                   count--;                                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0016a2   06db     DECF      0xdb,0x1,0x0                                                                                    
                                               }//end while                                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0016a6   52e5     MOVF      0xe5,0x1,0x0   }//end ClearArray                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
0016a8   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0016aa   ffd9                                                                                                               
0016ac   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /** EOF usbdrv.c *************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbdrv\usbdrv.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * FileName:        usb9.c                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           #include "io_cfg.h"                     // Required for self_power status        C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           void USBStdGetDscHandler(void);                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           void USBStdSetCfgHandler(void);                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           void USBStdGetStatusHandler(void);                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           void USBStdFeatureReqHandler(void);                                              C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Function:        void USBCheckStdRequest(void)                                C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Overview:        This routine checks the setup data packet to see if it       C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                  knows how to handle it                                       C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           void USBCheckStdRequest(void)                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000bb2   0104     MOVLB     0x4                if(SetupPkt.RequestType != STANDARD) return;                                 C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000bb4   5120     MOVF      0x20,0x0,0x1                                                                                    
000bb6   0b60     ANDLW     0x60                                                                                            
000bb8   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000bba   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000bbc   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000bbe   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000bc0   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000bc2   0900     IORLW     0x0                                                                                             
000bc4   e001     BZ        0xbc8                                                                                           
000bc6   d055     BRA       0xc72                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000bc8   5121     MOVF      0x21,0x0,0x1       switch(SetupPkt.bRequest)                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000bca   0a07     XORLW     0x7                                                                                             
000bcc   e051     BZ        0xc70                                                                                           
000bce   0a0b     XORLW     0xb                                                                                             
000bd0   e04f     BZ        0xc70                                                                                           
000bd2   0a07     XORLW     0x7                                                                                             
000bd4   e040     BZ        0xc56                                                                                           
000bd6   0a01     XORLW     0x1                                                                                             
000bd8   e02c     BZ        0xc32                                                                                           
000bda   0a0b     XORLW     0xb                                                                                             
000bdc   e028     BZ        0xc2e                                                                                           
000bde   0a02     XORLW     0x2                                                                                             
000be0   e026     BZ        0xc2e                                                                                           
000be2   0a03     XORLW     0x3                                                                                             
000be4   e022     BZ        0xc2a                                                                                           
000be6   0a08     XORLW     0x8                                                                                             
000be8   e012     BZ        0xc0e                                                                                           
000bea   0a01     XORLW     0x1                                                                                             
000bec   e00e     BZ        0xc0a                                                                                           
000bee   0a0f     XORLW     0xf                                                                                             
000bf0   e00a     BZ        0xc06                                                                                           
000bf2   0a03     XORLW     0x3                                                                                             
000bf4   e001     BZ        0xbf8                                                                                           
000bf6   d03c     BRA       0xc70                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   case SET_ADR:                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000bf8   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000bfa   0e01     MOVLW     0x1                                                                                             
000bfc   6f17     MOVWF     0x17,0x1                                                                                        
000bfe   0101     MOVLB     0x1                        usb_device_state = ADR_PENDING_STATE;       // Update state only     C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c00   0e04     MOVLW     0x4                                                                                             
000c02   6f1e     MOVWF     0x1e,0x1                                                                                        
                                                       /* See USBCtrlTrfInHandler() in usbctrltrf.c for the next step */    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c04   d036     BRA       0xc72                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   case GET_DSC:                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c06   d836     RCALL     0xc74                      USBStdGetDscHandler();                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c08   d034     BRA       0xc72                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   case SET_CFG:                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c0a   d890     RCALL     0xd2c                      USBStdSetCfgHandler();                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c0c   d032     BRA       0xc72                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   case GET_CFG:                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c0e   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c10   0e01     MOVLW     0x1                                                                                             
000c12   6f17     MOVWF     0x17,0x1                                                                                        
000c14   0101     MOVLB     0x1                        pSrc.bRam = (byte*)&usb_active_cfg;         // Set Source            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c16   0e20     MOVLW     0x20                                                                                            
000c18   6f18     MOVWF     0x18,0x1                                                                                        
000c1a   0e01     MOVLW     0x1                                                                                             
000c1c   6f19     MOVWF     0x19,0x1                                                                                        
000c1e   0101     MOVLB     0x1                        usb_stat.ctrl_trf_mem = _RAM;               // Set memory type       C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c20   931f     BCF       0x1f,0x1,0x1                                                                                    
000c22   0101     MOVLB     0x1                        LSB(wCount) = 1;                            // Set data count        C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c24   0e01     MOVLW     0x1                                                                                             
000c26   6f1c     MOVWF     0x1c,0x1                                                                                        
000c28   d024     BRA       0xc72                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   case GET_STATUS:                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c2a   d8a8     RCALL     0xd7c                      USBStdGetStatusHandler();                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c2c   d022     BRA       0xc72                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   case CLR_FEATURE:                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   case SET_FEATURE:                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c2e   d8f6     RCALL     0xe1c                      USBStdFeatureReqHandler();                                           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c30   d020     BRA       0xc72                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   case GET_INTF:                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c32   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c34   0e01     MOVLW     0x1                                                                                             
000c36   6f17     MOVWF     0x17,0x1                                                                                        
000c38   0104     MOVLB     0x4                        pSrc.bRam = (byte*)&usb_alt_intf+SetupPkt.bIntfID;  // Set source    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c3a   5124     MOVF      0x24,0x0,0x1                                                                                    
000c3c   0101     MOVLB     0x1                                                                                             
000c3e   6f18     MOVWF     0x18,0x1                                                                                        
000c40   6b19     CLRF      0x19,0x1                                                                                        
000c42   0e21     MOVLW     0x21                                                                                            
000c44   2718     ADDWF     0x18,0x1,0x1                                                                                    
000c46   0e01     MOVLW     0x1                                                                                             
000c48   2319     ADDWFC    0x19,0x1,0x1                                                                                    
000c4a   0101     MOVLB     0x1                        usb_stat.ctrl_trf_mem = _RAM;               // Set memory type       C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c4c   931f     BCF       0x1f,0x1,0x1                                                                                    
000c4e   0101     MOVLB     0x1                        LSB(wCount) = 1;                            // Set data count        C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c50   0e01     MOVLW     0x1                                                                                             
000c52   6f1c     MOVWF     0x1c,0x1                                                                                        
000c54   d00e     BRA       0xc72                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   case SET_INTF:                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c56   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c58   0e01     MOVLW     0x1                                                                                             
000c5a   6f17     MOVWF     0x17,0x1                                                                                        
000c5c   0104     MOVLB     0x4                        usb_alt_intf[SetupPkt.bIntfID] = SetupPkt.bAltID;                    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c5e   5124     MOVF      0x24,0x0,0x1                                                                                    
000c60   6aea     CLRF      0xea,0x0                                                                                        
000c62   0f21     ADDLW     0x21                                                                                            
000c64   6ee9     MOVWF     0xe9,0x0                                                                                        
000c66   0e01     MOVLW     0x1                                                                                             
000c68   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000c6a   c422     MOVFF     0x422,0xfef                                                                                     
000c6c   ffef                                                                                                               
000c6e   d001     BRA       0xc72                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   case SET_DSC:                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   case SYNCH_FRAME:                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   default:                                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c70   d000     BRA       0xc72                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                               }//end switch                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c72   0012     RETURN    0x0            }//end USBCheckStdRequest                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Function:        void USBStdGetDscHandler(void)                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard GET_DESCRIPTOR request.    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                  It utilizes tables dynamically looks up descriptor size.     C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                  This routine should never have to be modified if the tables  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                  in usbdsc.c are declared correctly.                          C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           void USBStdGetDscHandler(void)                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c74   0e80     MOVLW     0x80               if(SetupPkt.bmRequestType == 0x80)                                           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c76   0104     MOVLB     0x4                                                                                             
000c78   5d20     SUBWF     0x20,0x0,0x1                                                                                    
000c7a   e157     BNZ       0xd2a                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c7c   5123     MOVF      0x23,0x0,0x1           switch(SetupPkt.bDscType)                                                C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c7e   0a03     XORLW     0x3                                                                                             
000c80   e034     BZ        0xcea                                                                                           
000c82   0a01     XORLW     0x1                                                                                             
000c84   e010     BZ        0xca6                                                                                           
000c86   0a03     XORLW     0x3                                                                                             
000c88   e001     BZ        0xc8c                                                                                           
000c8a   d04d     BRA       0xd26                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                       case DSC_DEV:                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c8c   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_USB9;                              C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c8e   0e01     MOVLW     0x1                                                                                             
000c90   6f17     MOVWF     0x17,0x1                                                                                        
000c92   0101     MOVLB     0x1                            pSrc.bRom = (rom byte*)&device_dsc;                              C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c94   0eae     MOVLW     0xae                                                                                            
000c96   6f18     MOVWF     0x18,0x1                                                                                        
000c98   0e16     MOVLW     0x16                                                                                            
000c9a   6f19     MOVWF     0x19,0x1                                                                                        
000c9c   0e12     MOVLW     0x12                           wCount._word = sizeof(device_dsc);          // Set data count    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000c9e   0101     MOVLB     0x1                                                                                             
000ca0   6f1c     MOVWF     0x1c,0x1                                                                                        
000ca2   6b1d     CLRF      0x1d,0x1                                                                                        
000ca4   d040     BRA       0xd26                          break;                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                       case DSC_CFG:                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000ca6   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_USB9;                              C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000ca8   0e01     MOVLW     0x1                                                                                             
000caa   6f17     MOVWF     0x17,0x1                                                                                        
000cac   0104     MOVLB     0x4                            pSrc.bRom = *(USB_CD_Ptr+SetupPkt.bDscIndex);                    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000cae   5122     MOVF      0x22,0x0,0x1                                                                                    
000cb0   6ef6     MOVWF     0xf6,0x0                                                                                        
000cb2   6af7     CLRF      0xf7,0x0                                                                                        
000cb4   90d8     BCF       0xd8,0x0,0x0                                                                                    
000cb6   36f6     RLCF      0xf6,0x1,0x0                                                                                    
000cb8   36f7     RLCF      0xf7,0x1,0x0                                                                                    
000cba   0e6f     MOVLW     0x6f                                                                                            
000cbc   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
000cbe   0e17     MOVLW     0x17                                                                                            
000cc0   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000cc2   0009     TBLRDPOSTINC                                                                                              
000cc4   cff5     MOVFF     0xff5,0x118                                                                                     
000cc6   f118                                                                                                               
000cc8   000a     TBLRDPOSTDEC                                                                                              
000cca   cff5     MOVFF     0xff5,0x119                                                                                     
000ccc   f119                                                                                                               
000cce   0e02     MOVLW     0x2                            wCount._word = *(pSrc.wRom+1);              // Set data count    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000cd0   0101     MOVLB     0x1                                                                                             
000cd2   6af7     CLRF      0xf7,0x0                                                                                        
000cd4   2518     ADDWF     0x18,0x0,0x1                                                                                    
000cd6   6ef6     MOVWF     0xf6,0x0                                                                                        
000cd8   5119     MOVF      0x19,0x0,0x1                                                                                    
000cda   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000cdc   0009     TBLRDPOSTINC                                                                                              
000cde   cff5     MOVFF     0xff5,0x11c                                                                                     
000ce0   f11c                                                                                                               
000ce2   000a     TBLRDPOSTDEC                                                                                              
000ce4   cff5     MOVFF     0xff5,0x11d                                                                                     
000ce6   f11d                                                                                                               
000ce8   d01e     BRA       0xd26                          break;                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                       case DSC_STR:                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000cea   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_USB9;                              C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000cec   0e01     MOVLW     0x1                                                                                             
000cee   6f17     MOVWF     0x17,0x1                                                                                        
000cf0   0104     MOVLB     0x4                            pSrc.bRom = *(USB_SD_Ptr+SetupPkt.bDscIndex);                    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000cf2   5122     MOVF      0x22,0x0,0x1                                                                                    
000cf4   6ef6     MOVWF     0xf6,0x0                                                                                        
000cf6   6af7     CLRF      0xf7,0x0                                                                                        
000cf8   90d8     BCF       0xd8,0x0,0x0                                                                                    
000cfa   36f6     RLCF      0xf6,0x1,0x0                                                                                    
000cfc   36f7     RLCF      0xf7,0x1,0x0                                                                                    
000cfe   0e73     MOVLW     0x73                                                                                            
000d00   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
000d02   0e17     MOVLW     0x17                                                                                            
000d04   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000d06   0009     TBLRDPOSTINC                                                                                              
000d08   cff5     MOVFF     0xff5,0x118                                                                                     
000d0a   f118                                                                                                               
000d0c   000a     TBLRDPOSTDEC                                                                                              
000d0e   cff5     MOVFF     0xff5,0x119                                                                                     
000d10   f119                                                                                                               
000d12   c118     MOVFF     0x118,0xff6                    wCount._word = *pSrc.bRom;                  // Set data count    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d14   fff6                                                                                                               
000d16   c119     MOVFF     0x119,0xff7                                                                                     
000d18   fff7                                                                                                               
000d1a   0008     TBLRD                                                                                                     
000d1c   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000d1e   0101     MOVLB     0x1                                                                                             
000d20   6f1c     MOVWF     0x1c,0x1                                                                                        
000d22   6b1d     CLRF      0x1d,0x1                                                                                        
000d24   d000     BRA       0xd26                          break;                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   }//end switch                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d26   0101     MOVLB     0x1                    usb_stat.ctrl_trf_mem = _ROM;                       // Set memory type   C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d28   831f     BSF       0x1f,0x1,0x1                                                                                    
                                               }//end if                                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d2a   0012     RETURN    0x0            }//end USBStdGetDscHandler                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Function:        void USBStdSetCfgHandler(void)                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Overview:        This routine first disables all endpoints by clearing        C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                  UEP registers. It then configures (initializes) endpoints    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                  specified in the modifiable section.                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           void USBStdSetCfgHandler(void)                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d2c   0101     MOVLB     0x1                ctrl_trf_session_owner = MUID_USB9;                                          C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d2e   0e01     MOVLW     0x1                                                                                             
000d30   6f17     MOVWF     0x17,0x1                                                                                        
000d32   0e0f     MOVLW     0xf                mDisableEP1to15();                          // See usbdrv.h                  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d34   6ee6     MOVWF     0xe6,0x0                                                                                        
000d36   0e71     MOVLW     0x71                                                                                            
000d38   6ee6     MOVWF     0xe6,0x0                                                                                        
000d3a   0e0f     MOVLW     0xf                                                                                             
000d3c   6ee6     MOVWF     0xe6,0x0                                                                                        
000d3e   ec42     CALL      0x1684,0x0                                                                                      
000d40   f00b                                                                                                               
000d42   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d44   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d46   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d48   0e01     MOVLW     0x1                ClearArray((byte*)&usb_alt_intf,MAX_NUM_INT);                                C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d4a   6ee6     MOVWF     0xe6,0x0                                                                                        
000d4c   0e21     MOVLW     0x21                                                                                            
000d4e   6ee6     MOVWF     0xe6,0x0                                                                                        
000d50   0e01     MOVLW     0x1                                                                                             
000d52   6ee6     MOVWF     0xe6,0x0                                                                                        
000d54   ec42     CALL      0x1684,0x0                                                                                      
000d56   f00b                                                                                                               
000d58   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d5a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d5c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d5e   c422     MOVFF     0x422,0x120        usb_active_cfg = SetupPkt.bCfgValue;                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d60   f120                                                                                                               
000d62   0104     MOVLB     0x4                if(SetupPkt.bCfgValue == 0)                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d64   5122     MOVF      0x22,0x0,0x1                                                                                    
000d66   e104     BNZ       0xd70                                                                                           
000d68   0101     MOVLB     0x1                    usb_device_state = ADDRESS_STATE;                                        C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d6a   0e05     MOVLW     0x5                                                                                             
000d6c   6f1e     MOVWF     0x1e,0x1                                                                                        
000d6e   d005     BRA       0xd7a              else                                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d70   0101     MOVLB     0x1                    usb_device_state = CONFIGURED_STATE;                                     C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d72   0e06     MOVLW     0x6                                                                                             
000d74   6f1e     MOVWF     0x1e,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   /* Modifiable Section */                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   #if defined(USB_USE_CDC)                // See autofiles\usbcfg.h        C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d76   ec7e     CALL      0x8fc,0x0              CDCInitEP();                                                             C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d78   f004                                                                                                               
                                                   #endif                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   /* End modifiable section */                                             C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                               }//end if(SetupPkt.bcfgValue == 0)                                           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d7a   0012     RETURN    0x0            }//end USBStdSetCfgHandler                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Function:        void USBStdGetStatusHandler(void)                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard GET_STATUS request         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           void USBStdGetStatusHandler(void)                                                C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d7c   0104     MOVLB     0x4                CtrlTrfData._byte0 = 0;                         // Initialize content        C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d7e   6b28     CLRF      0x28,0x1                                                                                        
000d80   6b29     CLRF      0x29,0x1           CtrlTrfData._byte1 = 0;                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d82   0104     MOVLB     0x4                switch(SetupPkt.Recipient)                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d84   5120     MOVF      0x20,0x0,0x1                                                                                    
000d86   0b1f     ANDLW     0x1f                                                                                            
000d88   0a02     XORLW     0x2                                                                                             
000d8a   e016     BZ        0xdb8                                                                                           
000d8c   0a03     XORLW     0x3                                                                                             
000d8e   e010     BZ        0xdb0                                                                                           
000d90   0a01     XORLW     0x1                                                                                             
000d92   e001     BZ        0xd96                                                                                           
000d94   d035     BRA       0xe00                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   case RCPT_DEV:                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d96   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d98   0e01     MOVLW     0x1                                                                                             
000d9a   6f17     MOVWF     0x17,0x1                                                                                        
                                                       /*                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                        * _byte0: bit0: Self-Powered Status [0] Bus-Powered [1] Self-Powered C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                        *         bit1: RemoteWakeup        [0] Disabled    [1] Enabled     C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                        */                                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d9c   a480     BTFSS     0x80,0x2,0x0               if(self_power == 1)                     // self_power defined in io_cfg.h C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000d9e   d002     BRA       0xda4                                                                                           
000da0   0104     MOVLB     0x4                            CtrlTrfData._byte0|=0b000000001;    // Set bit0                  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000da2   8128     BSF       0x28,0x0,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000da4   0101     MOVLB     0x1                        if(usb_stat.RemoteWakeup == 1)          // usb_stat defined in usbmmap.c C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000da6   a11f     BTFSS     0x1f,0x0,0x1                                                                                    
000da8   d002     BRA       0xdae                                                                                           
000daa   0104     MOVLB     0x4                            CtrlTrfData._byte0|=0b00000010;     // Set bit1                  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000dac   8328     BSF       0x28,0x1,0x1                                                                                    
000dae   d028     BRA       0xe00                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   case RCPT_INTF:                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000db0   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;     // No data to update         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000db2   0e01     MOVLW     0x1                                                                                             
000db4   6f17     MOVWF     0x17,0x1                                                                                        
000db6   d024     BRA       0xe00                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   case RCPT_EP:                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000db8   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000dba   0e01     MOVLW     0x1                                                                                             
000dbc   6f17     MOVWF     0x17,0x1                                                                                        
                                                       /*                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                        * _byte0: bit0: Halt Status [0] Not Halted [1] Halted               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                        */                                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000dbe   0104     MOVLB     0x4                        pDst.bRam = (byte*)&ep0Bo+(SetupPkt.EPNum*8)+(SetupPkt.EPDir*4);     C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000dc0   5124     MOVF      0x24,0x0,0x1                                                                                    
000dc2   0b0f     ANDLW     0xf                                                                                             
000dc4   0d08     MULLW     0x8                                                                                             
000dc6   50f3     MOVF      0xf3,0x0,0x0                                                                                    
000dc8   6a11     CLRF      0x11,0x0                                                                                        
000dca   0f00     ADDLW     0x0                                                                                             
000dcc   6e10     MOVWF     0x10,0x0                                                                                        
000dce   0e04     MOVLW     0x4                                                                                             
000dd0   2211     ADDWFC    0x11,0x1,0x0                                                                                    
000dd2   5124     MOVF      0x24,0x0,0x1                                                                                    
000dd4   0b80     ANDLW     0x80                                                                                            
000dd6   e001     BZ        0xdda                                                                                           
000dd8   0e01     MOVLW     0x1                                                                                             
000dda   0d04     MULLW     0x4                                                                                             
000ddc   50f3     MOVF      0xf3,0x0,0x0                                                                                    
000dde   0101     MOVLB     0x1                                                                                             
000de0   2410     ADDWF     0x10,0x0,0x0                                                                                    
000de2   6f1a     MOVWF     0x1a,0x1                                                                                        
000de4   0e00     MOVLW     0x0                                                                                             
000de6   2011     ADDWFC    0x11,0x0,0x0                                                                                    
000de8   6f1b     MOVWF     0x1b,0x1                                                                                        
000dea   c11a     MOVFF     0x11a,0xfe9                if(*pDst.bRam & _BSTALL)    // Use _BSTALL as a bit mask             C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000dec   ffe9                                                                                                               
000dee   c11b     MOVFF     0x11b,0xfea                                                                                     
000df0   ffea                                                                                                               
000df2   50ef     MOVF      0xef,0x0,0x0                                                                                    
000df4   0b04     ANDLW     0x4                                                                                             
000df6   e003     BZ        0xdfe                                                                                           
000df8   0104     MOVLB     0x4                            CtrlTrfData._byte0=0x01;// Set bit0                              C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000dfa   0e01     MOVLW     0x1                                                                                             
000dfc   6f28     MOVWF     0x28,0x1                                                                                        
000dfe   d000     BRA       0xe00                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                               }//end switch                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e00   0101     MOVLB     0x1                if(ctrl_trf_session_owner == MUID_USB9)                                      C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e02   0517     DECF      0x17,0x0,0x1                                                                                    
000e04   e10a     BNZ       0xe1a                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e06   0101     MOVLB     0x1                    pSrc.bRam = (byte*)&CtrlTrfData;            // Set Source                C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e08   0e28     MOVLW     0x28                                                                                            
000e0a   6f18     MOVWF     0x18,0x1                                                                                        
000e0c   0e04     MOVLW     0x4                                                                                             
000e0e   6f19     MOVWF     0x19,0x1                                                                                        
000e10   0101     MOVLB     0x1                    usb_stat.ctrl_trf_mem = _RAM;               // Set memory type           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e12   931f     BCF       0x1f,0x1,0x1                                                                                    
000e14   0101     MOVLB     0x1                    LSB(wCount) = 2;                            // Set data count            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e16   0e02     MOVLW     0x2                                                                                             
000e18   6f1c     MOVWF     0x1c,0x1                                                                                        
                                               }//end if(...)                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e1a   0012     RETURN    0x0            }//end USBStdGetStatusHandler                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Function:        void USBStdFeatureReqHandler(void)                           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard SET & CLEAR FEATURES       C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                  requests                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           void USBStdFeatureReqHandler(void)                                               C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e1c   0104     MOVLB     0x4                if((SetupPkt.bFeature == DEVICE_REMOTE_WAKEUP)&&                             C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e1e   0522     DECF      0x22,0x0,0x1                                                                                    
000e20   e110     BNZ       0xe42                 (SetupPkt.Recipient == RCPT_DEV))                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e22   5120     MOVF      0x20,0x0,0x1                                                                                    
000e24   0b1f     ANDLW     0x1f                                                                                            
000e26   0900     IORLW     0x0                                                                                             
000e28   e10c     BNZ       0xe42                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e2a   0101     MOVLB     0x1                    ctrl_trf_session_owner = MUID_USB9;                                      C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e2c   0e01     MOVLW     0x1                                                                                             
000e2e   6f17     MOVWF     0x17,0x1                                                                                        
000e30   0e03     MOVLW     0x3                    if(SetupPkt.bRequest == SET_FEATURE)                                     C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e32   0104     MOVLB     0x4                                                                                             
000e34   5d21     SUBWF     0x21,0x0,0x1                                                                                    
000e36   e103     BNZ       0xe3e                                                                                           
000e38   0101     MOVLB     0x1                        usb_stat.RemoteWakeup = 1;                                           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e3a   811f     BSF       0x1f,0x0,0x1                                                                                    
000e3c   d002     BRA       0xe42                  else                                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e3e   0101     MOVLB     0x1                        usb_stat.RemoteWakeup = 0;                                           C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e40   911f     BCF       0x1f,0x0,0x1                                                                                    
                                               }//end if                                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e42   0104     MOVLB     0x4                if((SetupPkt.bFeature == ENDPOINT_HALT)&&                                    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e44   5122     MOVF      0x22,0x0,0x1                                                                                    
000e46   e13a     BNZ       0xebc                 (SetupPkt.Recipient == RCPT_EP)&&                                         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e48   5120     MOVF      0x20,0x0,0x1                                                                                    
000e4a   0b1f     ANDLW     0x1f                                                                                            
000e4c   0802     SUBLW     0x2                                                                                             
000e4e   e136     BNZ       0xebc                                                                                           
000e50   5124     MOVF      0x24,0x0,0x1          (SetupPkt.EPNum != 0))                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e52   0b0f     ANDLW     0xf                                                                                             
000e54   0900     IORLW     0x0                                                                                             
000e56   e032     BZ        0xebc                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e58   0101     MOVLB     0x1                    ctrl_trf_session_owner = MUID_USB9;                                      C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e5a   0e01     MOVLW     0x1                                                                                             
000e5c   6f17     MOVWF     0x17,0x1                                                                                        
                                                   /* Must do address calculation here */                                   C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e5e   0104     MOVLB     0x4                    pDst.bRam = (byte*)&ep0Bo+(SetupPkt.EPNum*8)+(SetupPkt.EPDir*4);         C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e60   5124     MOVF      0x24,0x0,0x1                                                                                    
000e62   0b0f     ANDLW     0xf                                                                                             
000e64   0d08     MULLW     0x8                                                                                             
000e66   50f3     MOVF      0xf3,0x0,0x0                                                                                    
000e68   6a11     CLRF      0x11,0x0                                                                                        
000e6a   0f00     ADDLW     0x0                                                                                             
000e6c   6e10     MOVWF     0x10,0x0                                                                                        
000e6e   0e04     MOVLW     0x4                                                                                             
000e70   2211     ADDWFC    0x11,0x1,0x0                                                                                    
000e72   5124     MOVF      0x24,0x0,0x1                                                                                    
000e74   0b80     ANDLW     0x80                                                                                            
000e76   e001     BZ        0xe7a                                                                                           
000e78   0e01     MOVLW     0x1                                                                                             
000e7a   0d04     MULLW     0x4                                                                                             
000e7c   50f3     MOVF      0xf3,0x0,0x0                                                                                    
000e7e   0101     MOVLB     0x1                                                                                             
000e80   2410     ADDWF     0x10,0x0,0x0                                                                                    
000e82   6f1a     MOVWF     0x1a,0x1                                                                                        
000e84   0e00     MOVLW     0x0                                                                                             
000e86   2011     ADDWFC    0x11,0x0,0x0                                                                                    
000e88   6f1b     MOVWF     0x1b,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e8a   0e03     MOVLW     0x3                    if(SetupPkt.bRequest == SET_FEATURE)                                     C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e8c   0104     MOVLB     0x4                                                                                             
000e8e   5d21     SUBWF     0x21,0x0,0x1                                                                                    
000e90   e107     BNZ       0xea0                                                                                           
000e92   0e84     MOVLW     0x84                       *pDst.bRam = _USIE|_BSTALL;                                          C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000e94   c11a     MOVFF     0x11a,0xfe9                                                                                     
000e96   ffe9                                                                                                               
000e98   c11b     MOVFF     0x11b,0xfea                                                                                     
000e9a   ffea                                                                                                               
000e9c   6eef     MOVWF     0xef,0x0                                                                                        
000e9e   d00e     BRA       0xebc                  else                                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000ea0   af24     BTFSS     0x24,0x7,0x1               if(SetupPkt.EPDir == 1) // IN                                        C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000ea2   d006     BRA       0xeb0                                                                                           
000ea4   c11a     MOVFF     0x11a,0xfe9                    *pDst.bRam = _UCPU;                                              C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000ea6   ffe9                                                                                                               
000ea8   c11b     MOVFF     0x11b,0xfea                                                                                     
000eaa   ffea                                                                                                               
000eac   6aef     CLRF      0xef,0x0                                                                                        
000eae   d006     BRA       0xebc                      else                                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000eb0   0e88     MOVLW     0x88                           *pDst.bRam = _USIE|_DAT0|_DTSEN;                                 C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000eb2   c11a     MOVFF     0x11a,0xfe9                                                                                     
000eb4   ffe9                                                                                                               
000eb6   c11b     MOVFF     0x11b,0xfea                                                                                     
000eb8   ffea                                                                                                               
000eba   6eef     MOVWF     0xef,0x0                                                                                        
                                                   }//end if                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                               }//end if                                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
000ebc   0012     RETURN    0x0            }//end USBStdFeatureReqHandler                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           /** EOF usb9.c ***************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usb9\usb9.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * FileName:        usbdsc.c                                                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * -usbdsc.c-                                                                    C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * This file contains the USB descriptor information. It is used                 C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * in conjunction with the usbdsc.h file. When a descriptor is added             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * or removed from the main configuration descriptor, i.e. CFG01,                C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * the user must also change the descriptor structure defined in                 C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * the usbdsc.h file. The structure is used to calculate the                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * descriptor size, i.e. sizeof(CFG01).                                          C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * A typical configuration descriptor consists of:                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * At least one configuration descriptor (USB_CFG_DSC)                           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * One or more interface descriptors (USB_INTF_DSC)                              C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * One or more endpoint descriptors (USB_EP_DSC)                                 C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * Naming Convention:                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * To resolve ambiguity, the naming convention are as followed:                  C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * - USB_CFG_DSC type should be named cdxx, where xx is the                      C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *   configuration number. This number should match the actual                   C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *   index value of this configuration.                                          C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * - USB_INTF_DSC type should be named i<yy>a<zz>, where yy is the               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *   interface number and zz is the alternate interface number.                  C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * - USB_EP_DSC type should be named ep<##><d>_i<yy>a<zz>, where                 C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *   ## is the endpoint number and d is the direction of transfer.               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *   The interface name should also be listed as a suffix to identify            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *   which interface does the endpoint belong to.                                C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * Example:                                                                      C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * If a device has one configuration, two interfaces; interface 0                C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * has two endpoints (in and out), and interface 1 has one endpoint(in).         C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * Then the CFG01 structure in the usbdsc.h should be:                           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * #define CFG01 rom struct                            \                         C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * {   USB_CFG_DSC             cd01;                   \                         C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *     USB_INTF_DSC            i00a00;                 \                         C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep01o_i00a00;           \                         C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep01i_i00a00;           \                         C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *     USB_INTF_DSC            i01a00;                 \                         C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep02i_i01a00;           \                         C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * } cfg01                                                                       C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * Note the hierarchy of the descriptors above, it follows the USB               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * specification requirement. All endpoints belonging to an interface            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * should be listed immediately after that interface.                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * Filling in the descriptor values in the usbdsc.c file:                        C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * Most items should be self-explanatory, however, a few will be                 C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * explained for clarification.                                                  C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * [Configuration Descriptor(USB_CFG_DSC)]                                       C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * The configuration attribute must always have the _DEFAULT                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * definition at the minimum. Additional options can be ORed                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * to the _DEFAULT attribute. Available options are _SELF and _RWU.              C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * These definitions are defined in the usbdefs_std_dsc.h file. The              C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * _SELF tells the USB host that this device is self-powered. The                C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * _RWU tells the USB host that this device supports Remote Wakeup.              C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * [Endpoint Descriptor(USB_EP_DSC)]                                             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * Assume the following example:                                                 C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * sizeof(USB_EP_DSC),DSC_EP,_EP01_OUT,_BULK,64,0x00                             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * The first two parameters are self-explanatory. They specify the               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * length of this endpoint descriptor (7) and the descriptor type.               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * The next parameter identifies the endpoint, the definitions are               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * defined in usbdefs_std_dsc.h and has the following naming                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * convention:                                                                   C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * _EP<##>_<dir>                                                                 C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * where ## is the endpoint number and dir is the direction of                   C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * transfer. The dir has the value of either 'OUT' or 'IN'.                      C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * The next parameter identifies the type of the endpoint. Available             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * options are _BULK, _INT, _ISO, and _CTRL. The _CTRL is not                    C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * typically used because the default control transfer endpoint is               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * not defined in the USB descriptors. When _ISO option is used,                 C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * addition options can be ORed to _ISO. Example:                                C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * _ISO|_AD|_FE                                                                  C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * This describes the endpoint as an isochronous pipe with adaptive              C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * and feedback attributes. See usbdefs_std_dsc.h and the USB                    C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * specification for details. The next parameter defines the size of             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * the endpoint. The last parameter in the polling interval.                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * Adding a USB String                                                           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * A string descriptor array should have the following format:                   C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * rom struct{byte bLength;byte bDscType;word string[size];}sdxxx={              C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * sizeof(sdxxx),DSC_STR,<text>};                                                C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * The above structure provides a means for the C compiler to                    C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * calculate the length of string descriptor sdxxx, where xxx is the             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * index number. The first two bytes of the descriptor are descriptor            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * length and type. The rest <text> are string texts which must be               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * in the unicode format. The unicode format is achieved by declaring            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * each character as a word type. The whole text string is declared              C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * as a word array with the number of characters equals to <size>.               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * <size> has to be manually counted and entered into the array                  C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * declaration. Let's study this through an example:                             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * if the string is "USB" , then the string descriptor should be:                C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * (Using index 02)                                                              C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * rom struct{byte bLength;byte bDscType;word string[3];}sd002={                 C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * sizeof(sd002),DSC_STR,'U','S','B'};                                           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * A USB project may have multiple strings and the firmware supports             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * the management of multiple strings through a look-up table.                   C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * The look-up table is defined as:                                              C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * rom const unsigned char *rom USB_SD_Ptr[]={&sd000,&sd001,&sd002};             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * The above declaration has 3 strings, sd000, sd001, and sd002.                 C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * Strings can be removed or added. sd000 is a specialized string                C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * descriptor. It defines the language code, usually this is                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * US English (0x0409). The index of the string must match the index             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * position of the USB_SD_Ptr array, &sd000 must be in position                  C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * USB_SD_Ptr[0], &sd001 must be in position USB_SD_Ptr[1] and so on.            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * The look-up table USB_SD_Ptr is used by the get string handler                C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * function in usb9.c.                                                           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * The look-up table scheme also applies to the configuration                    C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * descriptor. A USB device may have multiple configuration                      C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * descriptors, i.e. CFG01, CFG02, etc. To add a configuration                   C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * descriptor, user must implement a structure similar to CFG01.                 C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * The next step is to add the configuration descriptor name, i.e.               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * cfg01, cfg02,.., to the look-up table USB_CD_Ptr. USB_CD_Ptr[0]               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * is a dummy place holder since configuration 0 is the un-configured            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * state according to the definition in the USB specification.                   C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * Descriptor specific type definitions are defined in:                          C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * system\usb\usbdefs\usbdefs_std_dsc.h                                          C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * Configuration information is defined in:                                      C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            * autofiles\usbcfg.h                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           /** I N C L U D E S *************************************************/           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           /** C O N S T A N T S ************************************************/          C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           #pragma romdata                                                                  C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           /* Device Descriptor */                                                          C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           rom USB_DEV_DSC device_dsc=                                                      C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               sizeof(USB_DEV_DSC),    // Size of this descriptor in bytes                  C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               DSC_DEV,                // DEVICE descriptor type                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               0x0200,                 // USB Spec Release Number in BCD format             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               CDC_DEVICE,             // Class Code                                        C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               0x00,                   // Subclass code                                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               0x00,                   // Protocol code                                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               EP0_BUFF_SIZE,          // Max packet size for EP0, see usbcfg.h             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               0x04D8,                 // Vendor ID                                         C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               0x000A,                 // Product ID: CDC RS-232 Emulation Demo             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               0x0000,                 // Device release number in BCD format               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               0x01,                   // Manufacturer string index                         C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               0x02,                   // Product string index                              C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               0x00,                   // Device serial number string index                 C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               0x01                    // Number of possible configurations                 C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           };                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           /* Configuration 1 Descriptor */                                                 C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           CFG01=                                                                           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               /* Configuration Descriptor */                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               sizeof(USB_CFG_DSC),    // Size of this descriptor in bytes                  C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               DSC_CFG,                // CONFIGURATION descriptor type                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               sizeof(cfg01),          // Total length of data for this cfg                 C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               2,                      // Number of interfaces in this cfg                  C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               1,                      // Index value of this configuration                 C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               0,                      // Configuration string index                        C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               _DEFAULT,               // Attributes, see usbdefs_std_dsc.h                 C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               50,                     // Max power consumption (2X mA)                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               /* Interface Descriptor */                                                   C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               sizeof(USB_INTF_DSC),   // Size of this descriptor in bytes                  C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               DSC_INTF,               // INTERFACE descriptor type                         C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               0,                      // Interface Number                                  C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               0,                      // Alternate Setting Number                          C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               1,                      // Number of endpoints in this intf                  C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               COMM_INTF,              // Class code                                        C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               ABSTRACT_CONTROL_MODEL, // Subclass code                                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               V25TER,                 // Protocol code                                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               0,                      // Interface string index                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               /* CDC Class-Specific Descriptors */                                         C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               sizeof(USB_CDC_HEADER_FN_DSC),CS_INTERFACE,DSC_FN_HEADER,0x0110,             C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               sizeof(USB_CDC_ACM_FN_DSC),CS_INTERFACE,DSC_FN_ACM,0x02,                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               sizeof(USB_CDC_UNION_FN_DSC),CS_INTERFACE,DSC_FN_UNION,CDC_COMM_INTF_ID,CDC_DATA_INTF_ID, C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               sizeof(USB_CDC_CALL_MGT_FN_DSC),CS_INTERFACE,DSC_FN_CALL_MGT,0x00,CDC_DATA_INTF_ID, C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               /* Endpoint Descriptor */                                                    C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP02_IN,_INT,CDC_INT_EP_SIZE,0x02,                C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               /* Interface Descriptor */                                                   C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               sizeof(USB_INTF_DSC),   // Size of this descriptor in bytes                  C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               DSC_INTF,               // INTERFACE descriptor type                         C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               1,                      // Interface Number                                  C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               0,                      // Alternate Setting Number                          C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               2,                      // Number of endpoints in this intf                  C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               DATA_INTF,              // Class code                                        C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               0,                      // Subclass code                                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               NO_PROTOCOL,            // Protocol code                                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               0,                      // Interface string index                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               /* Endpoint Descriptors */                                                   C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP03_OUT,_BULK,CDC_BULK_OUT_EP_SIZE,0x00,         C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP03_IN,_BULK,CDC_BULK_IN_EP_SIZE,0x00            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           };                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[1];}sd000={                    C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           sizeof(sd000),DSC_STR,0x0409};                                                   C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[25];}sd001={                   C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           sizeof(sd001),DSC_STR,                                                           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           'M','i','c','r','o','c','h','i','p',' ',                                         C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           'T','e','c','h','n','o','l','o','g','y',' ','I','n','c','.'};                    C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[25];}sd002={                   C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           sizeof(sd002),DSC_STR,                                                           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           'C','D','C',' ','R','S','-','2','3','2',' ',                                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           'E','m','u','l','a','t','i','o','n',' ','D','e','m','o'};                        C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           rom const unsigned char *rom USB_CD_Ptr[]={&cfg01,&cfg01};                       C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           rom const unsigned char *rom USB_SD_Ptr[]={&sd000,&sd001,&sd002};                C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           rom pFunc ClassReqHandler[1]=                                                    C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                               &USBCheckCDCRequest                                                          C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           };                                                                               C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           /** EOF usbdsc.c ****************************************************/           C:\MCHPFSUSB\fw\CDC\autofiles\usbdsc.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * FileName:        usbctrltrf.c                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           byte ctrl_trf_state;                // Control Transfer State                    C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           byte ctrl_trf_session_owner;        // Current transfer session owner            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           POINTER pSrc;                       // Data source pointer                       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           POINTER pDst;                       // Data destination pointer                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           WORD wCount;                        // Data counter                              C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfSetupHandler(void);                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfOutHandler(void);                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfInHandler(void);                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlEPService(void)                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    USTAT is loaded with a valid endpoint address.               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        USBCtrlEPService checks for three transaction types that     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  it knows how to service and services them:                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. EP0 SETUP                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. EP0 OUT                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. EP0 IN                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  It ignores all other types (i.e. EP1, EP2, etc.)             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlEPService(void)                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000ebe   506c     MOVF      0x6c,0x0,0x0       if(USTAT == EP00_OUT)                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000ec0   e002     BZ        0xec6                                                                                           
000ec2   0e00     MOVLW     0x0                                                                                             
000ec4   d001     BRA       0xec8                                                                                           
000ec6   0e01     MOVLW     0x1                                                                                             
000ec8   0900     IORLW     0x0                                                                                             
000eca   e00b     BZ        0xee2                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000ecc   0104     MOVLB     0x4                    if(ep0Bo.Stat.PID == SETUP_TOKEN)           // EP0 SETUP                 C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000ece   5100     MOVF      0x0,0x0,0x1                                                                                     
000ed0   0b3c     ANDLW     0x3c                                                                                            
000ed2   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000ed4   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000ed6   080d     SUBLW     0xd                                                                                             
000ed8   e102     BNZ       0xede                                                                                           
000eda   d80c     RCALL     0xef4                      USBCtrlTrfSetupHandler();                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000edc   d001     BRA       0xee0                  else                                        // EP0 OUT                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000ede   d840     RCALL     0xf60                      USBCtrlTrfOutHandler();                                              C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000ee0   d008     BRA       0xef2              else if(USTAT == EP00_IN)                       // EP0 IN                    C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000ee2   506c     MOVF      0x6c,0x0,0x0                                                                                    
000ee4   e002     BZ        0xeea                                                                                           
000ee6   0e00     MOVLW     0x0                                                                                             
000ee8   d001     BRA       0xeec                                                                                           
000eea   0e01     MOVLW     0x1                                                                                             
000eec   0904     IORLW     0x4                                                                                             
000eee   e001     BZ        0xef2                                                                                           
000ef0   d847     RCALL     0xf80                  USBCtrlTrfInHandler();                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000ef2   0012     RETURN    0x0            }//end USBCtrlEPService                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfSetupHandler(void)                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    SetupPkt buffer is loaded with valid USB Setup Data          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine is a task dispatcher and has 3 stages.          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. It initializes the control transfer state machine.        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. It calls on each of the module that may know how to       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     service the Setup Request from the host.                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     Module Example: USB9, HID, CDC, MSD, ...                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     As new classes are added, ClassReqHandler table in        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     usbdsc.c should be updated to call all available          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     class handlers.                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. Once each of the modules has had a chance to check if     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     it is responsible for servicing the request, stage 3      C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     then checks direction of the transfer to determine how    C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     to prepare EP0 for the control transfer.                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     Refer to USBCtrlEPServiceComplete() for more details.     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            Microchip USB Firmware has three different states for        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  the control transfer state machine:                          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. WAIT_SETUP                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. CTRL_TRF_TX                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. CTRL_TRF_RX                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Refer to firmware manual to find out how one state           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  is transitioned to another.                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  A Control Transfer is composed of many USB transactions.     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  When transferring data over multiple transactions,           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  it is important to keep track of data source, data           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  destination, and data count. These three parameters are      C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  stored in pSrc,pDst, and wCount. A flag is used to           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  note if the data source is from ROM or RAM.                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000ef4   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfSetupHandler(void)                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000ef6   ffe6                                                                                                               
000ef8   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000efa   ffd9                                                                                                               
000efc   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                               byte i;                                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 1 */                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000efe   0101     MOVLB     0x1                ctrl_trf_state = WAIT_SETUP;                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f00   6b16     CLRF      0x16,0x1                                                                                        
000f02   6b17     CLRF      0x17,0x1           ctrl_trf_session_owner = MUID_NULL;     // Set owner to NULL                 C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f04   6b1c     CLRF      0x1c,0x1           wCount._word = 0;                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f06   6b1d     CLRF      0x1d,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 2 */                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f08   ecd9     CALL      0xbb2,0x0          USBCheckStdRequest();                   // See system\usb9\usb9.c            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f0a   f005                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f0c   6adf     CLRF      0xdf,0x0           for(i=0;i < (sizeof(ClassReqHandler)/sizeof(pFunc));i++)                     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f0e   50df     MOVF      0xdf,0x0,0x0                                                                                    
000f10   6e10     MOVWF     0x10,0x0                                                                                        
000f12   6a11     CLRF      0x11,0x0                                                                                        
000f14   0e01     MOVLW     0x1                                                                                             
000f16   5c10     SUBWF     0x10,0x0,0x0                                                                                    
000f18   0e00     MOVLW     0x0                                                                                             
000f1a   5811     SUBWFB    0x11,0x0,0x0                                                                                    
000f1c   e21b     BC        0xf54                                                                                           
000f50   2adf     INCF      0xdf,0x1,0x0                                                                                    
000f52   d7dd     BRA       0xf0e                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f1e   0101     MOVLB     0x1                    if(ctrl_trf_session_owner != MUID_NULL)break;                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f20   5117     MOVF      0x17,0x0,0x1                                                                                    
000f22   e001     BZ        0xf26                                                                                           
000f24   d017     BRA       0xf54                                                                                           
000f26   6af7     CLRF      0xf7,0x0               ClassReqHandler[i]();               // See autofiles\usbdsc.c            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f28   34df     RLCF      0xdf,0x0,0x0                                                                                    
000f2a   0bfe     ANDLW     0xfe                                                                                            
000f2c   36f7     RLCF      0xf7,0x1,0x0                                                                                    
000f2e   6ef6     MOVWF     0xf6,0x0                                                                                        
000f30   0e79     MOVLW     0x79                                                                                            
000f32   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
000f34   0e17     MOVLW     0x17                                                                                            
000f36   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000f38   0009     TBLRDPOSTINC                                                                                              
000f3a   cff5     MOVFF     0xff5,0x10                                                                                      
000f3c   f010                                                                                                               
000f3e   0008     TBLRD                                                                                                     
000f40   cff5     MOVFF     0xff5,0x11                                                                                      
000f42   f011                                                                                                               
000f44   d004     BRA       0xf4e                                                                                           
000f46   c011     MOVFF     0x11,0xffa                                                                                      
000f48   fffa                                                                                                               
000f4a   5010     MOVF      0x10,0x0,0x0                                                                                    
000f4c   6ef9     MOVWF     0xf9,0x0                                                                                        
000f4e   dffb     RCALL     0xf46                                                                                           
                                               }//end while                                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 3 */                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f54   d8d5     RCALL     0x1100             USBCtrlEPServiceComplete();                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f56   52e5     MOVF      0xe5,0x1,0x0   }//end USBCtrlTrfSetupHandler                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f58   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000f5a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000f5c   ffd9                                                                                                               
000f5e   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfOutHandler(void)                              C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine handles an OUT transaction according to         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  which control transfer state is currently active.            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            Note that if the the control transfer was from               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  host to device, the session owner should be notified         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  at the end of each OUT transaction to service the            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  received data.                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfOutHandler(void)                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f60   0e02     MOVLW     0x2                if(ctrl_trf_state == CTRL_TRF_RX)                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f62   0101     MOVLB     0x1                                                                                             
000f64   5d16     SUBWF     0x16,0x0,0x1                                                                                    
000f66   e10a     BNZ       0xf7c                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f68   d892     RCALL     0x108e                 USBCtrlTrfRxService();                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                    * Don't have to worry about overwriting _KEEP bit                       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                    * because if _KEEP was set, TRNIF would not have been                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                    * generated in the first place.                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                    */                                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f6a   0104     MOVLB     0x4                    if(ep0Bo.Stat.DTS == 0)                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f6c   bd00     BTFSC     0x0,0x6,0x1                                                                                     
000f6e   d003     BRA       0xf76                                                                                           
000f70   0ec8     MOVLW     0xc8                       ep0Bo.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f72   6f00     MOVWF     0x0,0x1                                                                                         
000f74   d002     BRA       0xf7a                  else                                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f76   0e88     MOVLW     0x88                       ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN;                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f78   6f00     MOVWF     0x0,0x1                                                                                         
                                               }                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f7a   d001     BRA       0xf7e              else    // CTRL_TRF_TX                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f7c   d907     RCALL     0x118c                 USBPrepareForNextSetupTrf();                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f7e   0012     RETURN    0x0            }//end USBCtrlTrfOutHandler                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfInHandler(void)                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine handles an IN transaction according to          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  which control transfer state is currently active.            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            A Set Address Request must not change the acutal address     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  of the device until the completion of the control            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer. The end of the control transfer for Set Address    C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Request is an IN transaction. Therefore it is necessary      C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  to service this unique situation when the condition is       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  right. Macro mUSBCheckAdrPendingState is defined in          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  usb9.h and its function is to specifically service this      C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  event.                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfInHandler(void)                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f80   0e04     MOVLW     0x4                mUSBCheckAdrPendingState();         // Must check if in ADR_PENDING_STATE    C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f82   0101     MOVLB     0x1                                                                                             
000f84   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
000f86   e10a     BNZ       0xf9c                                                                                           
000f88   c422     MOVFF     0x422,0xf6e                                                                                     
000f8a   ff6e                                                                                                               
000f8c   506e     MOVF      0x6e,0x0,0x0                                                                                    
000f8e   0800     SUBLW     0x0                                                                                             
000f90   e203     BC        0xf98                                                                                           
000f92   0e05     MOVLW     0x5                                                                                             
000f94   6f1e     MOVWF     0x1e,0x1                                                                                        
000f96   d002     BRA       0xf9c                                                                                           
000f98   0e03     MOVLW     0x3                                                                                             
000f9a   6f1e     MOVWF     0x1e,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f9c   0101     MOVLB     0x1                if(ctrl_trf_state == CTRL_TRF_TX)                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000f9e   0516     DECF      0x16,0x0,0x1                                                                                    
000fa0   e10a     BNZ       0xfb6                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fa2   d80b     RCALL     0xfba                  USBCtrlTrfTxService();                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fa4   0104     MOVLB     0x4                    if(ep0Bi.Stat.DTS == 0)                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fa6   bd04     BTFSC     0x4,0x6,0x1                                                                                     
000fa8   d003     BRA       0xfb0                                                                                           
000faa   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fac   6f04     MOVWF     0x4,0x1                                                                                         
000fae   d002     BRA       0xfb4                  else                                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fb0   0e88     MOVLW     0x88                       ep0Bi.Stat._byte = _USIE|_DAT0|_DTSEN;                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fb2   6f04     MOVWF     0x4,0x1                                                                                         
                                               }                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fb4   d001     BRA       0xfb8              else // CTRL_TRF_RX                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fb6   d8ea     RCALL     0x118c                 USBPrepareForNextSetupTrf();                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fb8   0012     RETURN    0x0            }//end USBCtrlTrfInHandler                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfTxService(void)                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    pSrc, wCount, and usb_stat.ctrl_trf_mem are setup properly.  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine should be called from only two places.          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  One from USBCtrlEPServiceComplete() and one from             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  USBCtrlTrfInHandler(). It takes care of managing a           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer over multiple USB transactions.                     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            This routine works with isochronous endpoint larger than     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  256 bytes and is shown here as an example of how to deal     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  with BC9 and BC8. In reality, a control endpoint can never   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  be larger than 64 bytes.                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fba   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfTxService(void)                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fbc   ffe6                                                                                                               
000fbe   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000fc0   ffd9                                                                                                               
000fc2   0e02     MOVLW     0x2                                                                                             
000fc4   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                               WORD byte_to_send;                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                * First, have to figure out how many byte of data to send.                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fc6   0101     MOVLB     0x1                if(wCount._word < EP0_BUFF_SIZE)                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fc8   0e08     MOVLW     0x8                                                                                             
000fca   5d1c     SUBWF     0x1c,0x0,0x1                                                                                    
000fcc   0e00     MOVLW     0x0                                                                                             
000fce   591d     SUBWFB    0x1d,0x0,0x1                                                                                    
000fd0   e205     BC        0xfdc                                                                                           
000fd2   c11c     MOVFF     0x11c,0xfde            byte_to_send._word = wCount._word;                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fd4   ffde                                                                                                               
000fd6   c11d     MOVFF     0x11d,0xfdd                                                                                     
000fd8   ffdd                                                                                                               
000fda   d003     BRA       0xfe2              else                                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fdc   0e08     MOVLW     0x8                    byte_to_send._word = EP0_BUFF_SIZE;                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fde   6ede     MOVWF     0xde,0x0                                                                                        
000fe0   6add     CLRF      0xdd,0x0                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                * Next, load the number of bytes to send to BC9..0 in buffer descriptor     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fe2   0104     MOVLB     0x4                ep0Bi.Stat.BC9 = 0;                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fe4   9304     BCF       0x4,0x1,0x1                                                                                     
000fe6   9104     BCF       0x4,0x0,0x1        ep0Bi.Stat.BC8 = 0;                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fe8   0e01     MOVLW     0x1                ep0Bi.Stat._byte |= MSB(byte_to_send);                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000fea   50db     MOVF      0xdb,0x0,0x0                                                                                    
000fec   1304     IORWF     0x4,0x1,0x1                                                                                     
000fee   cfdf     MOVFF     0xfdf,0x405        ep0Bi.Cnt = LSB(byte_to_send);                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000ff0   f405                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                * Subtract the number of bytes just about to be sent from the total.        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000ff2   0e00     MOVLW     0x0                wCount._word = wCount._word - byte_to_send._word;                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
000ff4   50db     MOVF      0xdb,0x0,0x0                                                                                    
000ff6   0101     MOVLB     0x1                                                                                             
000ff8   5f1c     SUBWF     0x1c,0x1,0x1                                                                                    
000ffa   0e01     MOVLW     0x1                                                                                             
000ffc   50db     MOVF      0xdb,0x0,0x0                                                                                    
000ffe   5b1d     SUBWFB    0x1d,0x1,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001000   0e28     MOVLW     0x28               pDst.bRam = (byte*)&CtrlTrfData;        // Set destination pointer           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001002   6f1a     MOVWF     0x1a,0x1                                                                                        
001004   0e04     MOVLW     0x4                                                                                             
001006   6f1b     MOVWF     0x1b,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001008   0101     MOVLB     0x1                if(usb_stat.ctrl_trf_mem == _ROM)       // Determine type of memory source   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00100a   a31f     BTFSS     0x1f,0x1,0x1                                                                                    
00100c   d01e     BRA       0x104a                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00100e   cfd9     MOVFF     0xfd9,0xfe9            while(byte_to_send._word)                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001010   ffe9                                                                                                               
001012   cfda     MOVFF     0xfda,0xfea                                                                                     
001014   ffea                                                                                                               
001016   50ee     MOVF      0xee,0x0,0x0                                                                                    
001018   10ed     IORWF     0xed,0x0,0x0                                                                                    
00101a   e016     BZ        0x1048                                                                                          
001046   d7e3     BRA       0x100e                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00101c   c118     MOVFF     0x118,0xff6                *pDst.bRam = *pSrc.bRom;                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00101e   fff6                                                                                                               
001020   c119     MOVFF     0x119,0xff7                                                                                     
001022   fff7                                                                                                               
001024   0008     TBLRD                                                                                                     
001026   50f5     MOVF      0xf5,0x0,0x0                                                                                    
001028   c11a     MOVFF     0x11a,0xfe9                                                                                     
00102a   ffe9                                                                                                               
00102c   c11b     MOVFF     0x11b,0xfea                                                                                     
00102e   ffea                                                                                                               
001030   6eef     MOVWF     0xef,0x0                                                                                        
001032   0101     MOVLB     0x1                        pDst.bRam++;                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001034   2b1a     INCF      0x1a,0x1,0x1                                                                                    
001036   0e00     MOVLW     0x0                                                                                             
001038   231b     ADDWFC    0x1b,0x1,0x1                                                                                    
00103a   2b18     INCF      0x18,0x1,0x1               pSrc.bRom++;                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00103c   2319     ADDWFC    0x19,0x1,0x1                                                                                    
00103e   06df     DECF      0xdf,0x1,0x0               byte_to_send._word--;                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001040   0e01     MOVLW     0x1                                                                                             
001042   e201     BC        0x1046                                                                                          
001044   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                   }//end while(byte_to_send._word)                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001048   d01c     BRA       0x1082             else // RAM                                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00104a   cfd9     MOVFF     0xfd9,0xfe9            while(byte_to_send._word)                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00104c   ffe9                                                                                                               
00104e   cfda     MOVFF     0xfda,0xfea                                                                                     
001050   ffea                                                                                                               
001052   50ee     MOVF      0xee,0x0,0x0                                                                                    
001054   10ed     IORWF     0xed,0x0,0x0                                                                                    
001056   e015     BZ        0x1082                                                                                          
001080   d7e4     BRA       0x104a                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001058   c118     MOVFF     0x118,0xfe9                *pDst.bRam = *pSrc.bRam;                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00105a   ffe9                                                                                                               
00105c   c119     MOVFF     0x119,0xfea                                                                                     
00105e   ffea                                                                                                               
001060   50ef     MOVF      0xef,0x0,0x0                                                                                    
001062   c11a     MOVFF     0x11a,0xfe9                                                                                     
001064   ffe9                                                                                                               
001066   c11b     MOVFF     0x11b,0xfea                                                                                     
001068   ffea                                                                                                               
00106a   6eef     MOVWF     0xef,0x0                                                                                        
00106c   0101     MOVLB     0x1                        pDst.bRam++;                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00106e   2b1a     INCF      0x1a,0x1,0x1                                                                                    
001070   0e00     MOVLW     0x0                                                                                             
001072   231b     ADDWFC    0x1b,0x1,0x1                                                                                    
001074   2b18     INCF      0x18,0x1,0x1               pSrc.bRam++;                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001076   2319     ADDWFC    0x19,0x1,0x1                                                                                    
001078   06df     DECF      0xdf,0x1,0x0               byte_to_send._word--;                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00107a   0e01     MOVLW     0x1                                                                                             
00107c   e201     BC        0x1080                                                                                          
00107e   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                   }//end while(byte_to_send._word)                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end if(usb_stat.ctrl_trf_mem == _ROM)                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001082   cfd9     MOVFF     0xfd9,0xfe1    }//end USBCtrlTrfTxService                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001084   ffe1                                                                                                               
001086   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001088   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00108a   ffd9                                                                                                               
00108c   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfRxService(void)                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    pDst and wCount are setup properly.                          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  pSrc is always &CtrlTrfData                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  usb_stat.ctrl_trf_mem is always _RAM.                        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  wCount should be set to 0 at the start of each control       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer.                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        *** This routine is only partially complete. Check for       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  new version of the firmware.                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00108e   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfRxService(void)                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001090   ffe6                                                                                                               
001092   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001094   ffd9                                                                                                               
001096   0e02     MOVLW     0x2                                                                                             
001098   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                               WORD byte_to_read;                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00109a   0e03     MOVLW     0x3                MSB(byte_to_read) = 0x03 & ep0Bo.Stat._byte;    // Filter out last 2 bits    C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00109c   0104     MOVLB     0x4                                                                                             
00109e   1500     ANDWF     0x0,0x0,0x1                                                                                     
0010a0   6ee7     MOVWF     0xe7,0x0                                                                                        
0010a2   0e01     MOVLW     0x1                                                                                             
0010a4   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
0010a6   ffdb                                                                                                               
0010a8   c401     MOVFF     0x401,0xfdf        LSB(byte_to_read) = ep0Bo.Cnt;                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
0010aa   ffdf                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                * Accumulate total number of bytes read                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
0010ac   50de     MOVF      0xde,0x0,0x0       wCount._word = wCount._word + byte_to_read._word;                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
0010ae   0101     MOVLB     0x1                                                                                             
0010b0   271c     ADDWF     0x1c,0x1,0x1                                                                                    
0010b2   50dd     MOVF      0xdd,0x0,0x0                                                                                    
0010b4   231d     ADDWFC    0x1d,0x1,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
0010b6   0e28     MOVLW     0x28               pSrc.bRam = (byte*)&CtrlTrfData;                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
0010b8   6f18     MOVWF     0x18,0x1                                                                                        
0010ba   0e04     MOVLW     0x4                                                                                             
0010bc   6f19     MOVWF     0x19,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
0010be   cfd9     MOVFF     0xfd9,0xfe9        while(byte_to_read._word)                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
0010c0   ffe9                                                                                                               
0010c2   cfda     MOVFF     0xfda,0xfea                                                                                     
0010c4   ffea                                                                                                               
0010c6   50ee     MOVF      0xee,0x0,0x0                                                                                    
0010c8   10ed     IORWF     0xed,0x0,0x0                                                                                    
0010ca   e014     BZ        0x10f4                                                                                          
0010f2   d7e5     BRA       0x10be                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
0010cc   c118     MOVFF     0x118,0xfe9            *pDst.bRam = *pSrc.bRam;                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
0010ce   ffe9                                                                                                               
0010d0   c119     MOVFF     0x119,0xfea                                                                                     
0010d2   ffea                                                                                                               
0010d4   50ef     MOVF      0xef,0x0,0x0                                                                                    
0010d6   c11a     MOVFF     0x11a,0xfe9                                                                                     
0010d8   ffe9                                                                                                               
0010da   c11b     MOVFF     0x11b,0xfea                                                                                     
0010dc   ffea                                                                                                               
0010de   6eef     MOVWF     0xef,0x0                                                                                        
0010e0   2b1a     INCF      0x1a,0x1,0x1           pDst.bRam++;                                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
0010e2   0e00     MOVLW     0x0                                                                                             
0010e4   231b     ADDWFC    0x1b,0x1,0x1                                                                                    
0010e6   2b18     INCF      0x18,0x1,0x1           pSrc.bRam++;                                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
0010e8   2319     ADDWFC    0x19,0x1,0x1                                                                                    
0010ea   06df     DECF      0xdf,0x1,0x0           byte_to_read._word--;                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
0010ec   0e01     MOVLW     0x1                                                                                             
0010ee   e201     BC        0x10f2                                                                                          
0010f0   06db     DECF      0xdb,0x1,0x0                                                                                    
                                               }//end while(byte_to_read._word)                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
0010f4   cfd9     MOVFF     0xfd9,0xfe1    }//end USBCtrlTrfRxService                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
0010f6   ffe1                                                                                                               
0010f8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0010fa   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0010fc   ffd9                                                                                                               
0010fe   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlEPServiceComplete(void)                          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine wrap up the ramaining tasks in servicing        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  a Setup Request. Its main task is to set the endpoint        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  controls appropriately for a given situation. See code       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  below.                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  There are three main scenarios:                              C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  a) There was no handler for the Request, in this case        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     a STALL should be sent out.                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  b) The host has requested a read control transfer,           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     endpoints are required to be setup in a specific way.     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  c) The host has requested a write control transfer, or       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     a control data stage is not required, endpoints are       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     required to be setup in a specific way.                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Packet processing is resumed by clearing PKTDIS bit.         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlEPServiceComplete(void)                                              C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001100   0101     MOVLB     0x1                if(ctrl_trf_session_owner == MUID_NULL)                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001102   5117     MOVF      0x17,0x0,0x1                                                                                    
001104   e10c     BNZ       0x111e                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                    * If no one knows how to service this request then stall.               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                    * Must also prepare EP0 to receive the next SETUP transaction.          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                    */                                                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001106   0104     MOVLB     0x4                    ep0Bo.Cnt = EP0_BUFF_SIZE;                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001108   0e08     MOVLW     0x8                                                                                             
00110a   6f01     MOVWF     0x1,0x1                                                                                         
00110c   0e20     MOVLW     0x20                   ep0Bo.ADR = (byte*)&SetupPkt;                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00110e   6f02     MOVWF     0x2,0x1                                                                                         
001110   0e04     MOVLW     0x4                                                                                             
001112   6f03     MOVWF     0x3,0x1                                                                                         
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001114   0e84     MOVLW     0x84                   ep0Bo.Stat._byte = _USIE|_BSTALL;                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001116   6f00     MOVWF     0x0,0x1                                                                                         
001118   0104     MOVLB     0x4                    ep0Bi.Stat._byte = _USIE|_BSTALL;                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00111a   6f04     MOVWF     0x4,0x1                                                                                         
                                               }                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00111c   d035     BRA       0x1188             else    // A module has claimed ownership of the control transfer session.   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00111e   0104     MOVLB     0x4                    if(SetupPkt.DataDir == DEV_TO_HOST)                                      C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001120   af20     BTFSS     0x20,0x7,0x1                                                                                    
001122   d022     BRA       0x1168                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001124   0101     MOVLB     0x1                        if(SetupPkt.wLength < wCount._word)                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001126   511c     MOVF      0x1c,0x0,0x1                                                                                    
001128   0104     MOVLB     0x4                                                                                             
00112a   5d26     SUBWF     0x26,0x0,0x1                                                                                    
00112c   0101     MOVLB     0x1                                                                                             
00112e   511d     MOVF      0x1d,0x0,0x1                                                                                    
001130   0104     MOVLB     0x4                                                                                             
001132   5927     SUBWFB    0x27,0x0,0x1                                                                                    
001134   e204     BC        0x113e                                                                                          
001136   c426     MOVFF     0x426,0x11c                    wCount._word = SetupPkt.wLength;                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001138   f11c                                                                                                               
00113a   c427     MOVFF     0x427,0x11d                                                                                     
00113c   f11d                                                                                                               
00113e   df3d     RCALL     0xfba                      USBCtrlTrfTxService();                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001140   0101     MOVLB     0x1                        ctrl_trf_state = CTRL_TRF_TX;                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001142   0e01     MOVLW     0x1                                                                                             
001144   6f16     MOVWF     0x16,0x1                                                                                        
                                                       /*                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Control Read:                                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * <SETUP[0]><IN[1]><IN[0]>...<OUT[1]> | <SETUP[0]>                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 1. Prepare OUT EP to respond to early termination                 C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * NOTE:                                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * If something went wrong during the control transfer,              C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the last status stage may not be sent by the host.                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * When this happens, two different things could happen              C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * depending on the host.                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * a) The host could send out a RESET.                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * b) The host could send out a new SETUP transaction                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    without sending a RESET first.                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * To properly handle case (b), the OUT EP must be setup             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * to receive either a zero length OUT transaction, or a             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * new SETUP transaction.                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Since the SETUP transaction requires the DTS bit to be            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * DAT0 while the zero length OUT status requires the DTS            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * bit to be DAT1, the DTS bit check by the hardware should          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * be disabled. This way the SIE could accept either of              C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the two transactions.                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Furthermore, the Cnt byte should be set to prepare for            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the SETUP data (8-byte or more), and the buffer address           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * should be pointed to SetupPkt.                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001146   0104     MOVLB     0x4                        ep0Bo.Cnt = EP0_BUFF_SIZE;                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001148   0e08     MOVLW     0x8                                                                                             
00114a   6f01     MOVWF     0x1,0x1                                                                                         
00114c   0e20     MOVLW     0x20                       ep0Bo.ADR = (byte*)&SetupPkt;                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00114e   6f02     MOVWF     0x2,0x1                                                                                         
001150   0e04     MOVLW     0x4                                                                                             
001152   6f03     MOVWF     0x3,0x1                                                                                         
001154   0e80     MOVLW     0x80                       ep0Bo.Stat._byte = _USIE;           // Note: DTSEN is 0!             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001156   6f00     MOVWF     0x0,0x1                                                                                         
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                       /*                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 2. Prepare IN EP to transfer data, Cnt should have                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    been initialized by responsible request owner.                 C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001158   0104     MOVLB     0x4                        ep0Bi.ADR = (byte*)&CtrlTrfData;                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00115a   0e28     MOVLW     0x28                                                                                            
00115c   6f06     MOVWF     0x6,0x1                                                                                         
00115e   0e04     MOVLW     0x4                                                                                             
001160   6f07     MOVWF     0x7,0x1                                                                                         
001162   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001164   6f04     MOVWF     0x4,0x1                                                                                         
                                                   }                                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001166   d010     BRA       0x1188                 else    // (SetupPkt.DataDir == HOST_TO_DEV)                             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001168   0101     MOVLB     0x1                        ctrl_trf_state = CTRL_TRF_RX;                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00116a   0e02     MOVLW     0x2                                                                                             
00116c   6f16     MOVWF     0x16,0x1                                                                                        
                                                       /*                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Control Write:                                                    C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * <SETUP[0]><OUT[1]><OUT[0]>...<IN[1]> | <SETUP[0]>                 C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 1. Prepare IN EP to respond to early termination                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    This is the same as a Zero Length Packet Response              C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    for control transfer without a data stage                      C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00116e   0104     MOVLB     0x4                        ep0Bi.Cnt = 0;                                                       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001170   6b05     CLRF      0x5,0x1                                                                                         
001172   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001174   6f04     MOVWF     0x4,0x1                                                                                         
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                       /*                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 2. Prepare OUT EP to receive data.                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001176   0104     MOVLB     0x4                        ep0Bo.Cnt = EP0_BUFF_SIZE;                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001178   0e08     MOVLW     0x8                                                                                             
00117a   6f01     MOVWF     0x1,0x1                                                                                         
00117c   0e28     MOVLW     0x28                       ep0Bo.ADR = (byte*)&CtrlTrfData;                                     C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00117e   6f02     MOVWF     0x2,0x1                                                                                         
001180   0e04     MOVLW     0x4                                                                                             
001182   6f03     MOVWF     0x3,0x1                                                                                         
001184   0ec8     MOVLW     0xc8                       ep0Bo.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001186   6f00     MOVWF     0x0,0x1                                                                                         
                                                   }//end if(SetupPkt.DataDir == DEV_TO_HOST)                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end if(ctrl_trf_session_owner == MUID_NULL)                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                * PKTDIS bit is set when a Setup Transaction is received.                   C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                * Clear to resume packet processing.                                        C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001188   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00118a   0012     RETURN    0x0            }//end USBCtrlEPServiceComplete                                                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBPrepareForNextSetupTrf(void)                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        The routine forces EP0 OUT to be ready for a new Setup       C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transaction, and forces EP0 IN to be owned by CPU.           C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBPrepareForNextSetupTrf(void)                                             C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00118c   0101     MOVLB     0x1                ctrl_trf_state = WAIT_SETUP;            // See usbctrltrf.h                  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
00118e   6b16     CLRF      0x16,0x1                                                                                        
001190   0104     MOVLB     0x4                ep0Bo.Cnt = EP0_BUFF_SIZE;              // Defined in usbcfg.h               C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001192   0e08     MOVLW     0x8                                                                                             
001194   6f01     MOVWF     0x1,0x1                                                                                         
001196   0e20     MOVLW     0x20               ep0Bo.ADR = (byte*)&SetupPkt;                                                C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
001198   6f02     MOVWF     0x2,0x1                                                                                         
00119a   0e04     MOVLW     0x4                                                                                             
00119c   6f03     MOVWF     0x3,0x1                                                                                         
00119e   0e88     MOVLW     0x88               ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN;  // EP0 buff dsc init, see usbmmap.h  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
0011a0   6f00     MOVWF     0x0,0x1                                                                                         
0011a2   0104     MOVLB     0x4                ep0Bi.Stat._byte = _UCPU;               // EP0 IN buffer initialization      C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
0011a4   6b04     CLRF      0x4,0x1                                                                                         
0011a6   0012     RETURN    0x0            }//end USBPrepareForNextSetupTrf                                                 C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           /** EOF usbctrltrf.c *********************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\usbctrltrf\usbctrltrf.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * FileName:        user.c                                                       C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB\fw\CDC\user\user.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * CDC RS-232 Emulation Tutorial Instructions:                                   C:\MCHPFSUSB\fw\CDC\user\user.c
                                            ******************************************************************************  C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Refer to Application Note AN956 for explanation of the CDC class.             C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * First take a look at Exercise_Example() and study how functions are called.   C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * There are five exercises, each one has a solution in the CDC\user\solutions.  C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Scroll down and look for Exercise_01,_02,_03,_04, and _05.                    C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Instructions on what to do is inside each function.                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\CDC\user\user.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\CDC\user\user.c
                                           #include <usart.h>                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           #include "io_cfg.h"             // I/O pin mapping                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                           #include "user\user.h"                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                           #include "user\temperature.h"                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\CDC\user\user.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
                                           byte old_sw2,old_sw3;                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           char input_buffer[64];                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                           char output_buffer[64];                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           rom char welcome[]={"PIC18F4550 Full-Speed USB - CDC RS-232 Emulation Demo\r\n\r\n"}; C:\MCHPFSUSB\fw\CDC\user\user.c
                                           rom char ansi_clrscr[]={"\x1b[2J"};         // ANSI Clear Screen Command         C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\CDC\user\user.c
                                           void InitializeUSART(void);                                                      C:\MCHPFSUSB\fw\CDC\user\user.c
                                           void BlinkUSBStatus(void);                                                       C:\MCHPFSUSB\fw\CDC\user\user.c
                                           BOOL Switch2IsPressed(void);                                                     C:\MCHPFSUSB\fw\CDC\user\user.c
                                           BOOL Switch3IsPressed(void);                                                     C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           void Exercise_Example(void);                                                     C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           void Exercise_01(void);                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
                                           void Exercise_02(void);                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
                                           void Exercise_03(void);                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
                                           void Exercise_04(void);                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
                                           void Exercise_05(void);                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\CDC\user\user.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\CDC\user\user.c
                                           void UserInit(void)                                                              C:\MCHPFSUSB\fw\CDC\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\user\user.c
0011a8   0ef0     MOVLW     0xf0               mInitAllLEDs();                                                              C:\MCHPFSUSB\fw\CDC\user\user.c
0011aa   168c     ANDWF     0x8c,0x1,0x0                                                                                    
0011ac   1695     ANDWF     0x95,0x1,0x0                                                                                    
0011ae   8893     BSF       0x93,0x4,0x0       mInitAllSwitches();                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
0011b0   8a93     BSF       0x93,0x5,0x0                                                                                    
0011b2   5081     MOVF      0x81,0x0,0x0       old_sw2 = sw2;                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
0011b4   0b10     ANDLW     0x10                                                                                            
0011b6   e001     BZ        0x11ba                                                                                          
0011b8   0e01     MOVLW     0x1                                                                                             
0011ba   0100     MOVLB     0x0                                                                                             
0011bc   6f60     MOVWF     0x60,0x1                                                                                        
0011be   5081     MOVF      0x81,0x0,0x0       old_sw3 = sw3;                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
0011c0   0b20     ANDLW     0x20                                                                                            
0011c2   e001     BZ        0x11c6                                                                                          
0011c4   0e01     MOVLW     0x1                                                                                             
0011c6   6f61     MOVWF     0x61,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
0011c8   eccc     CALL      0x1398,0x0         InitTempSensor();                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
0011ca   f009                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
0011cc   efe8     GOTO      0x11d0             InitializeUSART();                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
0011ce   f008                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           }//end UserInit                                                                  C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           void InitializeUSART(void)                                                       C:\MCHPFSUSB\fw\CDC\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\user\user.c
0011d0   8e94     BSF       0x94,0x7,0x0       TRISCbits.TRISC7=1; // RX                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
0011d2   9c94     BCF       0x94,0x6,0x0       TRISCbits.TRISC6=0; // TX                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
0011d4   0e71     MOVLW     0x71               SPBRG = 0x71;                                                                C:\MCHPFSUSB\fw\CDC\user\user.c
0011d6   6eaf     MOVWF     0xaf,0x0                                                                                        
0011d8   0e02     MOVLW     0x2                SPBRGH = 0x02;      // 0x0271 for 48MHz -> 19200 baud                        C:\MCHPFSUSB\fw\CDC\user\user.c
0011da   6eb0     MOVWF     0xb0,0x0                                                                                        
0011dc   0e24     MOVLW     0x24               TXSTA = 0x24;       // TX enable BRGH=1                                      C:\MCHPFSUSB\fw\CDC\user\user.c
0011de   6eac     MOVWF     0xac,0x0                                                                                        
0011e0   0e90     MOVLW     0x90               RCSTA = 0x90;       // continuous RX                                         C:\MCHPFSUSB\fw\CDC\user\user.c
0011e2   6eab     MOVWF     0xab,0x0                                                                                        
0011e4   0e08     MOVLW     0x8                BAUDCON = 0x08;     // BRG16 = 1                                             C:\MCHPFSUSB\fw\CDC\user\user.c
0011e6   6eb8     MOVWF     0xb8,0x0                                                                                        
0011e8   0012     RETURN    0x0            }//end InitializeUSART                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Function:        void ProcessIO(void)                                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Overview:        This function is a place holder for other user routines.     C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                  It is a mixture of both USB and non-USB tasks.               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\user\user.c
                                           void ProcessIO(void)                                                             C:\MCHPFSUSB\fw\CDC\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\user\user.c
0011ea   d868     RCALL     0x12bc             BlinkUSBStatus();                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                               // User Application USB tasks                                                C:\MCHPFSUSB\fw\CDC\user\user.c
0011ec   0e06     MOVLW     0x6                if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;      C:\MCHPFSUSB\fw\CDC\user\user.c
0011ee   0101     MOVLB     0x1                                                                                             
0011f0   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
0011f2   e303     BNC       0x11fa                                                                                          
0011f4   506d     MOVF      0x6d,0x0,0x0                                                                                    
0011f6   0b02     ANDLW     0x2                                                                                             
0011f8   e001     BZ        0x11fc                                                                                          
0011fa   d006     BRA       0x1208                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
0011fc   d806     RCALL     0x120a             Exercise_Example();                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
0011fe   d840     RCALL     0x1280             Exercise_01();                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
001200   d840     RCALL     0x1282             Exercise_02();                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
001202   d840     RCALL     0x1284             Exercise_03();                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
001204   d840     RCALL     0x1286             Exercise_04();                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
001206   d840     RCALL     0x1288             Exercise_05();                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
001208   0012     RETURN    0x0            }//end ProcessIO                                                                 C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           void Exercise_Example(void)                                                      C:\MCHPFSUSB\fw\CDC\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\user\user.c
                                               static byte start_up_state = 0;                                              C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
00120a   0101     MOVLB     0x1                if(start_up_state == 0)                                                      C:\MCHPFSUSB\fw\CDC\user\user.c
00120c   5122     MOVF      0x22,0x0,0x1                                                                                    
00120e   e106     BNZ       0x121c                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
001210   d89d     RCALL     0x134c                 if(Switch2IsPressed())                                                   C:\MCHPFSUSB\fw\CDC\user\user.c
001212   0900     IORLW     0x0                                                                                             
001214   e002     BZ        0x121a                                                                                          
001216   0101     MOVLB     0x1                        start_up_state++;                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
001218   2b22     INCF      0x22,0x1,0x1                                                                                    
                                               }                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
00121a   d031     BRA       0x127e             else if(start_up_state == 1)                                                 C:\MCHPFSUSB\fw\CDC\user\user.c
00121c   0522     DECF      0x22,0x0,0x1                                                                                    
00121e   e10e     BNZ       0x123c                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
001220   0100     MOVLB     0x0                    if(mUSBUSARTIsTxTrfReady())                                              C:\MCHPFSUSB\fw\CDC\user\user.c
001222   51e5     MOVF      0xe5,0x0,0x1                                                                                    
001224   e10a     BNZ       0x123a                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
001226   0eba     MOVLW     0xba                       putrsUSBUSART(ansi_clrscr);                                          C:\MCHPFSUSB\fw\CDC\user\user.c
001228   6ee6     MOVWF     0xe6,0x0                                                                                        
00122a   0e18     MOVLW     0x18                                                                                            
00122c   6ee6     MOVWF     0xe6,0x0                                                                                        
00122e   ec23     CALL      0xa46,0x0                                                                                       
001230   f005                                                                                                               
001232   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001234   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001236   0101     MOVLB     0x1                        start_up_state++;                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
001238   2b22     INCF      0x22,0x1,0x1                                                                                    
                                                   }                                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
                                               }                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
00123a   d021     BRA       0x127e             else if(start_up_state == 2)                                                 C:\MCHPFSUSB\fw\CDC\user\user.c
00123c   0e02     MOVLW     0x2                                                                                             
00123e   5d22     SUBWF     0x22,0x0,0x1                                                                                    
001240   e10e     BNZ       0x125e                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
001242   0100     MOVLB     0x0                    if(mUSBUSARTIsTxTrfReady())                                              C:\MCHPFSUSB\fw\CDC\user\user.c
001244   51e5     MOVF      0xe5,0x0,0x1                                                                                    
001246   e10a     BNZ       0x125c                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
001248   0eb6     MOVLW     0xb6                       putrsUSBUSART("\rMicrochip Technology Inc., 2004\r\n");              C:\MCHPFSUSB\fw\CDC\user\user.c
00124a   6ee6     MOVWF     0xe6,0x0                                                                                        
00124c   0e19     MOVLW     0x19                                                                                            
00124e   6ee6     MOVWF     0xe6,0x0                                                                                        
001250   ec23     CALL      0xa46,0x0                                                                                       
001252   f005                                                                                                               
001254   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001256   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001258   0101     MOVLB     0x1                        start_up_state++;                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
00125a   2b22     INCF      0x22,0x1,0x1                                                                                    
                                                   }                                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
                                               }                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
00125c   d010     BRA       0x127e             else if(start_up_state == 3)                                                 C:\MCHPFSUSB\fw\CDC\user\user.c
00125e   0e03     MOVLW     0x3                                                                                             
001260   5d22     SUBWF     0x22,0x0,0x1                                                                                    
001262   e10d     BNZ       0x127e                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
001264   0100     MOVLB     0x0                    if(mUSBUSARTIsTxTrfReady())                                              C:\MCHPFSUSB\fw\CDC\user\user.c
001266   51e5     MOVF      0xe5,0x0,0x1                                                                                    
001268   e10a     BNZ       0x127e                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
00126a   0e80     MOVLW     0x80                       putrsUSBUSART(welcome);                                              C:\MCHPFSUSB\fw\CDC\user\user.c
00126c   6ee6     MOVWF     0xe6,0x0                                                                                        
00126e   0e18     MOVLW     0x18                                                                                            
001270   6ee6     MOVWF     0xe6,0x0                                                                                        
001272   ec23     CALL      0xa46,0x0                                                                                       
001274   f005                                                                                                               
001276   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001278   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00127a   0101     MOVLB     0x1                        start_up_state++;                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
00127c   2b22     INCF      0x22,0x1,0x1                                                                                    
                                                   }                                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
                                               }                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
00127e   0012     RETURN    0x0            }//end Exercise_Example                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           void Exercise_01(void)                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\user\user.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * Write code in this function that sends a literal null-terminated          C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * string of text ("Hello World!\r\n") to the PC when switch 2 is            C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * pressed.                                                                  C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * Useful functions:                                                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *  Switch2IsPressed() returns '1' when switch 2 is pressed.                 C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *  putrsUSBUSART(...);                                                      C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * See examples in Exercise_Example();                                       C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * Remember, you must check if cdc_trf_state is ready for another            C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * transfer or not. When it is ready, the value will equal CDC_TX_READY,     C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * or use macro: mUSBUSARTIsTxTrfReady()                                     C:\MCHPFSUSB\fw\CDC\user\user.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                               /* Insert code here - 3 lines */                                             C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                               /* End */                                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
001280   0012     RETURN    0x0            }//end Exercise_01                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           rom char ex02_string[]={"Type in a string here.\r\n"};                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                           void Exercise_02(void)                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\user\user.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * Write code in this function that sends a null-terminated string           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * of text stored in program memory pointed to by "ex02_string" to           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * the PC when switch 3 is pressed.                                          C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * ex02_string is declared right above this function.                        C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * Useful functions:                                                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *  Switch3IsPressed() returns '1' when switch 3 is pressed.                 C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *  putrsUSBUSART(...);                                                      C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * See examples in Exercise_Example();                                       C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * Remember, you must check if cdc_trf_state is ready for another            C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * transfer or not. When it is ready, the value will equal CDC_TX_READY,     C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * or use macro: mUSBUSARTIsTxTrfReady()                                     C:\MCHPFSUSB\fw\CDC\user\user.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                               /* Insert code here - 3 lines*/                                              C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                               /* End */                                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
001282   0012     RETURN    0x0            }//end Exercise_02                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           void Exercise_03(void)                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\user\user.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * Write code in this function that reads data from USB and                  C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * toggles LED D4 when the data read equals ASCII character '1' (0x31)       C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * Useful functions:                                                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *  byte getsUSBUSART(char *buffer, byte len)   See cdc.c for details        C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *  mLED_4_Toggle();                                                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * Use input_buffer[] to store data read from USB.                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                               /* Insert code here - 3 lines */                                             C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                               /* End */                                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
001284   0012     RETURN    0x0            }//end Exercise_03                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           void Exercise_04(void)                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\user\user.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * Before starting Exercise_04(), comment out the call to Exercise_01()      C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * in ProcessIO(); This function will need to check Switch2IsPressed().      C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * Write code in this function that sends the following 4 bytes of           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * data: 0x30,0x31,0x32,0x33 when switch 2 is pressed.                       C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * Note that these data is not null-terminated and is located in             C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * the data memory.                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * Useful functions:                                                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *  Switch2IsPressed() returns '1' when switch 2 is pressed.                 C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *  mUSBUSARTTxRam(byte *pData, byte len) See cdc.h for details.             C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * Use output_buffer[] to store the four bytes data.                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * Remember, you must check if cdc_trf_state is ready for another            C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * transfer or not. When it is ready, the value will equal CDC_TX_READY,     C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * or use macro: mUSBUSARTIsTxTrfReady()                                     C:\MCHPFSUSB\fw\CDC\user\user.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                               /* Insert code here - 7 lines */                                             C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                               /* End */                                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
                                           	                                                                                C:\MCHPFSUSB\fw\CDC\user\user.c
001286   0012     RETURN    0x0            }//end Exercise_04                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           void Exercise_05(void)                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\user\user.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * The PICDEM Full-Speed USB Demo Board is equipped with a                   C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * temperature sensor. See temperature.c & .h for details.                   C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * All necessary functions to collect temperature data have                  C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * been called. This function updates the data a few times                   C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * every second. The program currently sends out the                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * temperature data to the PC via UART.                                      C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * You can check this by hooking up a serial cable and                       C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * set your serial port to 19200 baud, 8 bit data, 1 Stop,                   C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * no parity.                                                                C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * The program assumes CPU Frequency = 48 MHz to generate                    C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * the correct SPBRG value for 19200 baud transmission.                      C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * Modify the code to send the ASCII string stored in                        C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * tempString to the PC via USB instead of UART.                             C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * The temperature data is stored in tempString array in                     C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * ASCII format and is null-terminated.                                      C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * Useful function:                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *  putsUSBUSART(...);                                                       C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *  Note: It is 'puts' and not 'putrs' to be used here.                      C:\MCHPFSUSB\fw\CDC\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * Remember, you must check if cdc_trf_state is ready for another            C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * transfer or not. When it is ready, the value will equal CDC_TX_READY,     C:\MCHPFSUSB\fw\CDC\user\user.c
                                                * or use macro: mUSBUSARTIsTxTrfReady()                                     C:\MCHPFSUSB\fw\CDC\user\user.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                               static word ex05_count;                                                      C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
001288   0100     MOVLB     0x0                if(ex05_count == 0)                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
00128a   51e2     MOVF      0xe2,0x0,0x1                                                                                    
00128c   11e3     IORWF     0xe3,0x0,0x1                                                                                    
00128e   e112     BNZ       0x12b4                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
001290   ecdf     CALL      0x13be,0x0             AcquireTemperature();               // Read temperature from sensor      C:\MCHPFSUSB\fw\CDC\user\user.c
001292   f009                                                                                                               
001294   ecf0     CALL      0x13e0,0x0             UpdateCelsiusASCII();               // Convert to ASCII, stored in       C:\MCHPFSUSB\fw\CDC\user\user.c
001296   f009                                                                                                               
                                                                                       // "tempString", See temperature.c   C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                                   /* Modify the code below - 3 lines */                                    C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
001298   0e02     MOVLW     0x2                        putsUSART(tempString);                                               C:\MCHPFSUSB\fw\CDC\user\user.c
00129a   6ee6     MOVWF     0xe6,0x0                                                                                        
00129c   0e01     MOVLW     0x1                                                                                             
00129e   6ee6     MOVWF     0xe6,0x0                                                                                        
0012a0   ec6c     CALL      0x18d8,0x0                                                                                      
0012a2   f00c                                                                                                               
0012a4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0012a6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0012a8   0100     MOVLB     0x0                        ex05_count = 10000;                                                  C:\MCHPFSUSB\fw\CDC\user\user.c
0012aa   0e10     MOVLW     0x10                                                                                            
0012ac   6fe2     MOVWF     0xe2,0x1                                                                                        
0012ae   0e27     MOVLW     0x27                                                                                            
0012b0   6fe3     MOVWF     0xe3,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                                   /* End */                                                                C:\MCHPFSUSB\fw\CDC\user\user.c
                                               }                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
0012b2   d003     BRA       0x12ba             else                                                                         C:\MCHPFSUSB\fw\CDC\user\user.c
0012b4   07e2     DECF      0xe2,0x1,0x1           ex05_count--;                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
0012b6   0e00     MOVLW     0x0                                                                                             
0012b8   5be3     SUBWFB    0xe3,0x1,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
0012ba   0012     RETURN    0x0            }//end Exercise_05                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Function:        void BlinkUSBStatus(void)                                    C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Overview:        BlinkUSBStatus turns on and off LEDs corresponding to        C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                  the USB device state.                                        C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\user.c
                                            * Note:            mLED macros can be found in io_cfg.h                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                  usb_device_state is declared in usbmmap.c and is modified    C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *                  in usbdrv.c, usbctrltrf.c, and usb9.c                        C:\MCHPFSUSB\fw\CDC\user\user.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\user\user.c
                                           void BlinkUSBStatus(void)                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\user\user.c
                                               static word led_count=0;                                                     C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
0012bc   0101     MOVLB     0x1                if(led_count == 0)led_count = 10000U;                                        C:\MCHPFSUSB\fw\CDC\user\user.c
0012be   5123     MOVF      0x23,0x0,0x1                                                                                    
0012c0   1124     IORWF     0x24,0x0,0x1                                                                                    
0012c2   e104     BNZ       0x12cc                                                                                          
0012c4   0e10     MOVLW     0x10                                                                                            
0012c6   6f23     MOVWF     0x23,0x1                                                                                        
0012c8   0e27     MOVLW     0x27                                                                                            
0012ca   6f24     MOVWF     0x24,0x1                                                                                        
0012cc   0723     DECF      0x23,0x1,0x1       led_count--;                                                                 C:\MCHPFSUSB\fw\CDC\user\user.c
0012ce   0e00     MOVLW     0x0                                                                                             
0012d0   5b24     SUBWFB    0x24,0x1,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                               #define mLED_Both_Off()         {mLED_1_Off();mLED_2_Off();}                 C:\MCHPFSUSB\fw\CDC\user\user.c
                                               #define mLED_Both_On()          {mLED_1_On();mLED_2_On();}                   C:\MCHPFSUSB\fw\CDC\user\user.c
                                               #define mLED_Only_1_On()        {mLED_1_On();mLED_2_Off();}                  C:\MCHPFSUSB\fw\CDC\user\user.c
                                               #define mLED_Only_2_On()        {mLED_1_Off();mLED_2_On();}                  C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
0012d2   a26d     BTFSS     0x6d,0x1,0x0       if(UCONbits.SUSPND == 1)                                                     C:\MCHPFSUSB\fw\CDC\user\user.c
0012d4   d00b     BRA       0x12ec                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
0012d6   5123     MOVF      0x23,0x0,0x1           if(led_count==0)                                                         C:\MCHPFSUSB\fw\CDC\user\user.c
0012d8   1124     IORWF     0x24,0x0,0x1                                                                                    
0012da   e107     BNZ       0x12ea                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
0012dc   708c     BTG       0x8c,0x0,0x0               mLED_1_Toggle();                                                     C:\MCHPFSUSB\fw\CDC\user\user.c
0012de   508c     MOVF      0x8c,0x0,0x0               mLED_2 = mLED_1;        // Both blink at the same time               C:\MCHPFSUSB\fw\CDC\user\user.c
0012e0   0b01     ANDLW     0x1                                                                                             
0012e2   e002     BZ        0x12e8                                                                                          
0012e4   828c     BSF       0x8c,0x1,0x0                                                                                    
0012e6   d001     BRA       0x12ea                                                                                          
0012e8   928c     BCF       0x8c,0x1,0x0                                                                                    
                                                   }//end if                                                                C:\MCHPFSUSB\fw\CDC\user\user.c
                                               }                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
0012ea   d02f     BRA       0x134a             else                                                                         C:\MCHPFSUSB\fw\CDC\user\user.c
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
0012ec   0101     MOVLB     0x1                    if(usb_device_state == DETACHED_STATE)                                   C:\MCHPFSUSB\fw\CDC\user\user.c
0012ee   511e     MOVF      0x1e,0x0,0x1                                                                                    
0012f0   e103     BNZ       0x12f8                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
0012f2   908c     BCF       0x8c,0x0,0x0               mLED_Both_Off();                                                     C:\MCHPFSUSB\fw\CDC\user\user.c
0012f4   928c     BCF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
0012f6   d029     BRA       0x134a                 else if(usb_device_state == ATTACHED_STATE)                              C:\MCHPFSUSB\fw\CDC\user\user.c
0012f8   051e     DECF      0x1e,0x0,0x1                                                                                    
0012fa   e103     BNZ       0x1302                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
0012fc   808c     BSF       0x8c,0x0,0x0               mLED_Both_On();                                                      C:\MCHPFSUSB\fw\CDC\user\user.c
0012fe   828c     BSF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
001300   d024     BRA       0x134a                 else if(usb_device_state == POWERED_STATE)                               C:\MCHPFSUSB\fw\CDC\user\user.c
001302   0e02     MOVLW     0x2                                                                                             
001304   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
001306   e103     BNZ       0x130e                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
001308   808c     BSF       0x8c,0x0,0x0               mLED_Only_1_On();                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
00130a   928c     BCF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
00130c   d01e     BRA       0x134a                 else if(usb_device_state == DEFAULT_STATE)                               C:\MCHPFSUSB\fw\CDC\user\user.c
00130e   0e03     MOVLW     0x3                                                                                             
001310   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
001312   e103     BNZ       0x131a                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
001314   908c     BCF       0x8c,0x0,0x0               mLED_Only_2_On();                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
001316   828c     BSF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
001318   d018     BRA       0x134a                 else if(usb_device_state == ADDRESS_STATE)                               C:\MCHPFSUSB\fw\CDC\user\user.c
00131a   0e05     MOVLW     0x5                                                                                             
00131c   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
00131e   e107     BNZ       0x132e                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
001320   0101     MOVLB     0x1                        if(led_count == 0)                                                   C:\MCHPFSUSB\fw\CDC\user\user.c
001322   5123     MOVF      0x23,0x0,0x1                                                                                    
001324   1124     IORWF     0x24,0x0,0x1                                                                                    
001326   e102     BNZ       0x132c                                                                                          
                                                       {                                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
001328   708c     BTG       0x8c,0x0,0x0                   mLED_1_Toggle();                                                 C:\MCHPFSUSB\fw\CDC\user\user.c
00132a   928c     BCF       0x8c,0x1,0x0                   mLED_2_Off();                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
                                                       }//end if                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                                   }                                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
00132c   d00e     BRA       0x134a                 else if(usb_device_state == CONFIGURED_STATE)                            C:\MCHPFSUSB\fw\CDC\user\user.c
00132e   0e06     MOVLW     0x6                                                                                             
001330   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
001332   e10b     BNZ       0x134a                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\user\user.c
001334   0101     MOVLB     0x1                        if(led_count==0)                                                     C:\MCHPFSUSB\fw\CDC\user\user.c
001336   5123     MOVF      0x23,0x0,0x1                                                                                    
001338   1124     IORWF     0x24,0x0,0x1                                                                                    
00133a   e107     BNZ       0x134a                                                                                          
                                                       {                                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
00133c   708c     BTG       0x8c,0x0,0x0                   mLED_1_Toggle();                                                 C:\MCHPFSUSB\fw\CDC\user\user.c
00133e   508c     MOVF      0x8c,0x0,0x0                   mLED_2 = !mLED_1;       // Alternate blink                       C:\MCHPFSUSB\fw\CDC\user\user.c
001340   0b01     ANDLW     0x1                                                                                             
001342   e002     BZ        0x1348                                                                                          
001344   928c     BCF       0x8c,0x1,0x0                                                                                    
001346   d001     BRA       0x134a                                                                                          
001348   828c     BSF       0x8c,0x1,0x0                                                                                    
                                                       }//end if                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                                   }//end if(...)                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
                                               }//end if(UCONbits.SUSPND...)                                                C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
00134a   0012     RETURN    0x0            }//end BlinkUSBStatus                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           BOOL Switch2IsPressed(void)                                                      C:\MCHPFSUSB\fw\CDC\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\user\user.c
00134c   5081     MOVF      0x81,0x0,0x0       if(sw2 != old_sw2)                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
00134e   0b10     ANDLW     0x10                                                                                            
001350   e001     BZ        0x1354                                                                                          
001352   0e01     MOVLW     0x1                                                                                             
001354   0100     MOVLB     0x0                                                                                             
001356   5d60     SUBWF     0x60,0x0,0x1                                                                                    
001358   e009     BZ        0x136c                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
00135a   5081     MOVF      0x81,0x0,0x0           old_sw2 = sw2;                  // Save new value                        C:\MCHPFSUSB\fw\CDC\user\user.c
00135c   0b10     ANDLW     0x10                                                                                            
00135e   e001     BZ        0x1362                                                                                          
001360   0e01     MOVLW     0x1                                                                                             
001362   6f60     MOVWF     0x60,0x1                                                                                        
001364   b881     BTFSC     0x81,0x4,0x0           if(sw2 == 0)                    // If pressed                            C:\MCHPFSUSB\fw\CDC\user\user.c
001366   d002     BRA       0x136c                                                                                          
001368   0e01     MOVLW     0x1                        return TRUE;                // Was pressed                           C:\MCHPFSUSB\fw\CDC\user\user.c
00136a   d002     BRA       0x1370                                                                                          
                                               }//end if                                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
00136c   0e00     MOVLW     0x0                return FALSE;                       // Was not pressed                       C:\MCHPFSUSB\fw\CDC\user\user.c
00136e   d000     BRA       0x1370                                                                                          
001370   0012     RETURN    0x0            }//end Switch2IsPressed                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           BOOL Switch3IsPressed(void)                                                      C:\MCHPFSUSB\fw\CDC\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\user\user.c
001372   5081     MOVF      0x81,0x0,0x0       if(sw3 != old_sw3)                                                           C:\MCHPFSUSB\fw\CDC\user\user.c
001374   0b20     ANDLW     0x20                                                                                            
001376   e001     BZ        0x137a                                                                                          
001378   0e01     MOVLW     0x1                                                                                             
00137a   0100     MOVLB     0x0                                                                                             
00137c   5d61     SUBWF     0x61,0x0,0x1                                                                                    
00137e   e009     BZ        0x1392                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
001380   5081     MOVF      0x81,0x0,0x0           old_sw3 = sw3;                  // Save new value                        C:\MCHPFSUSB\fw\CDC\user\user.c
001382   0b20     ANDLW     0x20                                                                                            
001384   e001     BZ        0x1388                                                                                          
001386   0e01     MOVLW     0x1                                                                                             
001388   6f61     MOVWF     0x61,0x1                                                                                        
00138a   ba81     BTFSC     0x81,0x5,0x0           if(sw3 == 0)                    // If pressed                            C:\MCHPFSUSB\fw\CDC\user\user.c
00138c   d002     BRA       0x1392                                                                                          
00138e   0e01     MOVLW     0x1                        return TRUE;                // Was pressed                           C:\MCHPFSUSB\fw\CDC\user\user.c
001390   d002     BRA       0x1396                                                                                          
                                               }//end if                                                                    C:\MCHPFSUSB\fw\CDC\user\user.c
001392   0e00     MOVLW     0x0                return FALSE;                       // Was not pressed                       C:\MCHPFSUSB\fw\CDC\user\user.c
001394   d000     BRA       0x1396                                                                                          
001396   0012     RETURN    0x0            }//end Switch3IsPressed                                                          C:\MCHPFSUSB\fw\CDC\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\user.c
                                           /** EOF user.c ***************************************************************/  C:\MCHPFSUSB\fw\CDC\user\user.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *             Microchip USB C18 Firmware -  CDC Version 1.0                     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * FileName:        cdc.c                                                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Rawin Rojvanit       11/19/04    Original. RS-232 Emulation Subset            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           #ifdef USB_USE_CDC                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           byte cdc_rx_len;            // total rx length                                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           byte cdc_trf_state;         // States are defined cdc.h                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           POINTER pCDCSrc;            // Dedicated source pointer                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           POINTER pCDCDst;            // Dedicated destination pointer                     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           byte cdc_tx_len;            // total tx length                                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           byte cdc_mem_type;          // _ROM, _RAM                                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           LINE_CODING line_coding;    // Buffer to store line coding information           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           CONTROL_SIGNAL_BITMAP control_signal_bitmap;                                     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           /*                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * SEND_ENCAPSULATED_COMMAND and GET_ENCAPSULATED_RESPONSE are required          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * requests according to the CDC specification.                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * However, it is not really being used here, therefore a dummy buffer is        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * used for conformance.                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            */                                                                              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           #define dummy_length    0x08                                                     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           byte dummy_encapsulated_cmd_response[dummy_length];                              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           /** C L A S S  S P E C I F I C  R E Q ****************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Function:        void USBCheckCDCRequest(void)                                C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Overview:        This routine checks the setup data packet to see if it       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  knows how to handle it                                       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           void USBCheckCDCRequest(void)                                                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * If request recipient is not an interface then return                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000838   0104     MOVLB     0x4                if(SetupPkt.Recipient != RCPT_INTF) return;                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00083a   5120     MOVF      0x20,0x0,0x1                                                                                    
00083c   0b1f     ANDLW     0x1f                                                                                            
00083e   0801     SUBLW     0x1                                                                                             
000840   e001     BZ        0x844                                                                                           
000842   d05b     BRA       0x8fa                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * If request type is not class-specific then return                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000844   5120     MOVF      0x20,0x0,0x1       if(SetupPkt.RequestType != CLASS) return;                                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000846   0b60     ANDLW     0x60                                                                                            
000848   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
00084a   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
00084c   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
00084e   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000850   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000852   0801     SUBLW     0x1                                                                                             
000854   e001     BZ        0x858                                                                                           
000856   d051     BRA       0x8fa                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Interface ID must match interface numbers associated with                 C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * CDC class, else return                                                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000858   5124     MOVF      0x24,0x0,0x1       if((SetupPkt.bIntfID != CDC_COMM_INTF_ID)&&                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00085a   e003     BZ        0x862                 (SetupPkt.bIntfID != CDC_DATA_INTF_ID)) return;                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00085c   0524     DECF      0x24,0x0,0x1                                                                                    
00085e   e001     BZ        0x862                                                                                           
000860   d04c     BRA       0x8fa                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000862   5121     MOVF      0x21,0x0,0x1       switch(SetupPkt.bRequest)                                                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000864   0a23     XORLW     0x23                                                                                            
000866   e048     BZ        0x8f8                                                                                           
000868   0a01     XORLW     0x1                                                                                             
00086a   e040     BZ        0x8ec                                                                                           
00086c   0a03     XORLW     0x3                                                                                             
00086e   e030     BZ        0x8d0                                                                                           
000870   0a01     XORLW     0x1                                                                                             
000872   e025     BZ        0x8be                                                                                           
000874   0a24     XORLW     0x24                                                                                            
000876   e022     BZ        0x8bc                                                                                           
000878   0a07     XORLW     0x7                                                                                             
00087a   e01f     BZ        0x8ba                                                                                           
00087c   0a01     XORLW     0x1                                                                                             
00087e   e01c     BZ        0x8b8                                                                                           
000880   0a03     XORLW     0x3                                                                                             
000882   e011     BZ        0x8a6                                                                                           
000884   0a01     XORLW     0x1                                                                                             
000886   e001     BZ        0x88a                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   case SEND_ENCAPSULATED_COMMAND:                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00088a   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00088c   0e03     MOVLW     0x3                                                                                             
00088e   6f17     MOVWF     0x17,0x1                                                                                        
000890   0101     MOVLB     0x1                        pSrc.bRam = (byte*)&dummy_encapsulated_cmd_response;                 C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000892   0ef7     MOVLW     0xf7                                                                                            
000894   6f18     MOVWF     0x18,0x1                                                                                        
000896   0e00     MOVLW     0x0                                                                                             
000898   6f19     MOVWF     0x19,0x1                                                                                        
00089a   0101     MOVLB     0x1                        usb_stat.ctrl_trf_mem = _RAM;                                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00089c   931f     BCF       0x1f,0x1,0x1                                                                                    
00089e   0101     MOVLB     0x1                        LSB(wCount) = dummy_length;                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008a0   0e08     MOVLW     0x8                                                                                             
0008a2   6f1c     MOVWF     0x1c,0x1                                                                                        
0008a4   d02a     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   case GET_ENCAPSULATED_RESPONSE:                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008a6   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008a8   0e03     MOVLW     0x3                                                                                             
0008aa   6f17     MOVWF     0x17,0x1                                                                                        
                                                       // Populate dummy_encapsulated_cmd_response first.                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008ac   0101     MOVLB     0x1                        pDst.bRam = (byte*)&dummy_encapsulated_cmd_response;                 C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008ae   0ef7     MOVLW     0xf7                                                                                            
0008b0   6f1a     MOVWF     0x1a,0x1                                                                                        
0008b2   0e00     MOVLW     0x0                                                                                             
0008b4   6f1b     MOVWF     0x1b,0x1                                                                                        
0008b6   d021     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   case SET_COMM_FEATURE:                  // Optional                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008b8   d020     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   case GET_COMM_FEATURE:                  // Optional                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008ba   d01f     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   case CLEAR_COMM_FEATURE:                // Optional                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008bc   d01e     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   case SET_LINE_CODING:                                                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008be   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008c0   0e03     MOVLW     0x3                                                                                             
0008c2   6f17     MOVWF     0x17,0x1                                                                                        
0008c4   0101     MOVLB     0x1                        pDst.bRam = (byte*)&line_coding;    // Set destination               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008c6   0eec     MOVLW     0xec                                                                                            
0008c8   6f1a     MOVWF     0x1a,0x1                                                                                        
0008ca   0e00     MOVLW     0x0                                                                                             
0008cc   6f1b     MOVWF     0x1b,0x1                                                                                        
0008ce   d015     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   case GET_LINE_CODING:                                                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008d0   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008d2   0e03     MOVLW     0x3                                                                                             
0008d4   6f17     MOVWF     0x17,0x1                                                                                        
0008d6   0101     MOVLB     0x1                        pSrc.bRam = (byte*)&line_coding;    // Set source                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008d8   0eec     MOVLW     0xec                                                                                            
0008da   6f18     MOVWF     0x18,0x1                                                                                        
0008dc   0e00     MOVLW     0x0                                                                                             
0008de   6f19     MOVWF     0x19,0x1                                                                                        
0008e0   0101     MOVLB     0x1                        usb_stat.ctrl_trf_mem = _RAM;       // Set memory type               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008e2   931f     BCF       0x1f,0x1,0x1                                                                                    
0008e4   0101     MOVLB     0x1                        LSB(wCount) = LINE_CODING_LENGTH;   // Set data count                C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008e6   0e07     MOVLW     0x7                                                                                             
0008e8   6f1c     MOVWF     0x1c,0x1                                                                                        
0008ea   d007     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   case SET_CONTROL_LINE_STATE:                                             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008ec   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008ee   0e03     MOVLW     0x3                                                                                             
0008f0   6f17     MOVWF     0x17,0x1                                                                                        
0008f2   c422     MOVFF     0x422,0xf3                 control_signal_bitmap._byte = LSB(SetupPkt.W_Value);                 C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008f4   f0f3                                                                                                               
0008f6   d001     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   case SEND_BREAK:                        // Optional                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008f8   d000     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   default:                                                                 C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000888   d038     BRA       0x8fa                      break;                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               }//end switch(SetupPkt.bRequest)                                             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008fa   0012     RETURN    0x0            }//end USBCheckCDCRequest                                                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           /** U S E R  A P I ***********************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Function:        void CDCInitEP(void)                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Overview:        CDCInitEP initializes CDC endpoints, buffer descriptors,     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  internal state-machine, and variables.                       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  It should be called after the USB host has sent out a        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  SET_CONFIGURATION request.                                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  See USBStdSetCfgHandler() in usb9.c for examples.            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           void CDCInitEP(void)                                                             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               //Abstract line coding information                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008fc   0100     MOVLB     0x0                line_coding.dwDTERate._dword = 115200;      // baud rate                     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0008fe   6bec     CLRF      0xec,0x1                                                                                        
000900   0ec2     MOVLW     0xc2                                                                                            
000902   6fed     MOVWF     0xed,0x1                                                                                        
000904   0e01     MOVLW     0x1                                                                                             
000906   6fee     MOVWF     0xee,0x1                                                                                        
000908   6bef     CLRF      0xef,0x1                                                                                        
00090a   6bf0     CLRF      0xf0,0x1           line_coding.bCharFormat = 0x00;             // 1 stop bit                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00090c   6bf1     CLRF      0xf1,0x1           line_coding.bParityType = 0x00;             // None                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00090e   0e08     MOVLW     0x8                line_coding.bDataBits = 0x08;               // 5,6,7,8, or 16                C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000910   6ff2     MOVWF     0xf2,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000912   6be5     CLRF      0xe5,0x1           cdc_trf_state = CDC_TX_READY;                                                C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000914   6be4     CLRF      0xe4,0x1           cdc_rx_len = 0;                                                              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000916   0e1a     MOVLW     0x1a               CDC_COMM_UEP = EP_IN|HSHK_EN;               // Enable 1 Comm pipe            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000918   6e72     MOVWF     0x72,0x0                                                                                        
00091a   0e1e     MOVLW     0x1e               CDC_DATA_UEP = EP_OUT_IN|HSHK_EN;           // Enable 2 data pipes           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00091c   6e73     MOVWF     0x73,0x0                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Do not have to init Cnt of IN pipes here.                                 C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Reason:  Number of bytes to send to the host                              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *          varies from one transaction to                                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *          another. Cnt should equal the exact                              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *          number of bytes to transmit for                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *          a given IN transaction.                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *          This number of bytes will only                                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *          be known right before the data is                                C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *          sent.                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00091e   0104     MOVLB     0x4                CDC_INT_BD_IN.ADR = (byte*)&cdc_notice;     // Set buffer address            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000920   0e00     MOVLW     0x0                                                                                             
000922   6f16     MOVWF     0x16,0x1                                                                                        
000924   0e05     MOVLW     0x5                                                                                             
000926   6f17     MOVWF     0x17,0x1                                                                                        
000928   0e40     MOVLW     0x40               CDC_INT_BD_IN.Stat._byte = _UCPU|_DAT1;     // Set status                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00092a   6f14     MOVWF     0x14,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00092c   0104     MOVLB     0x4                CDC_BULK_BD_OUT.Cnt = sizeof(cdc_data_rx);  // Set buffer size               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00092e   6f19     MOVWF     0x19,0x1                                                                                        
000930   0e08     MOVLW     0x8                CDC_BULK_BD_OUT.ADR = (byte*)&cdc_data_rx;  // Set buffer address            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000932   6f1a     MOVWF     0x1a,0x1                                                                                        
000934   0e05     MOVLW     0x5                                                                                             
000936   6f1b     MOVWF     0x1b,0x1                                                                                        
000938   0e88     MOVLW     0x88               CDC_BULK_BD_OUT.Stat._byte = _USIE|_DAT0|_DTSEN;// Set status                C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00093a   6f18     MOVWF     0x18,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00093c   0104     MOVLB     0x4                CDC_BULK_BD_IN.ADR = (byte*)&cdc_data_tx;   // Set buffer size               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00093e   0e48     MOVLW     0x48                                                                                            
000940   6f1e     MOVWF     0x1e,0x1                                                                                        
000942   0e05     MOVLW     0x5                                                                                             
000944   6f1f     MOVWF     0x1f,0x1                                                                                        
000946   0e40     MOVLW     0x40               CDC_BULK_BD_IN.Stat._byte = _UCPU|_DAT1;    // Set buffer address            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000948   6f1c     MOVWF     0x1c,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00094a   0012     RETURN    0x0            }//end CDCInitEP                                                                 C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Function:        byte getsUSBUSART(char *buffer,                              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                    byte len)                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * PreCondition:    Value of input argument 'len' should be smaller than the     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  maximum endpoint size responsible for receiving bulk         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  data from USB host for CDC class.                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  Input argument 'buffer' should point to a buffer area that   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  is bigger or equal to the size specified by 'len'.           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Input:           buffer  : Pointer to where received bytes are to be stored   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  len     : The number of bytes expected.                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Output:          The number of bytes copied to buffer.                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Side Effects:    Publicly accessible variable cdc_rx_len is updated with      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  the number of bytes copied to buffer.                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  Once getsUSBUSART is called, subsequent retrieval of         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  cdc_rx_len can be done by calling macro mCDCGetRxLength().   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Overview:        getsUSBUSART copies a string of bytes received through       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  USB CDC Bulk OUT endpoint to a user's specified location.    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  It is a non-blocking function. It does not wait              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  for data if there is no data available. Instead it returns   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  '0' to notify the caller that there is no data available.    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Note:            If the actual number of bytes received is larger than the    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  number of bytes expected (len), only the expected number     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  of bytes specified will be copied to buffer.                 C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  If the actual number of bytes received is smaller than the   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  number of bytes expected (len), only the actual number       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  of bytes received will be copied to buffer.                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00094c   cfd9     MOVFF     0xfd9,0xfe6    byte getsUSBUSART(char *buffer, byte len)                                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00094e   ffe6                                                                                                               
000950   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000952   ffd9                                                                                                               
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000954   0100     MOVLB     0x0                cdc_rx_len = 0;                                                              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000956   6be4     CLRF      0xe4,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000958   0104     MOVLB     0x4                if(!mCDCUsartRxIsBusy())                                                     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00095a   bf18     BTFSC     0x18,0x7,0x1                                                                                    
00095c   d030     BRA       0x9be                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                    * Adjust the expected number of bytes to equal                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                    * the actual number of bytes received.                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00095e   0efc     MOVLW     0xfc                   if(len > CDC_BULK_BD_OUT.Cnt)                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000960   cfdb     MOVFF     0xfdb,0x10                                                                                      
000962   f010                                                                                                               
000964   5119     MOVF      0x19,0x0,0x1                                                                                    
000966   80d8     BSF       0xd8,0x0,0x0                                                                                    
000968   5410     SUBFWB    0x10,0x0,0x0                                                                                    
00096a   e203     BC        0x972                                                                                           
00096c   0efc     MOVLW     0xfc                       len = CDC_BULK_BD_OUT.Cnt;                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
00096e   c419     MOVFF     0x419,0xfdb                                                                                     
000970   ffdb                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                    * Copy data from dual-ram buffer to user's buffer                       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000972   0100     MOVLB     0x0                    for(cdc_rx_len = 0; cdc_rx_len < len; cdc_rx_len++)                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000974   6be4     CLRF      0xe4,0x1                                                                                        
000976   0efc     MOVLW     0xfc                                                                                            
000978   50db     MOVF      0xdb,0x0,0x0                                                                                    
00097a   5de4     SUBWF     0xe4,0x0,0x1                                                                                    
00097c   e219     BC        0x9b0                                                                                           
0009ac   2be4     INCF      0xe4,0x1,0x1                                                                                    
0009ae   d7e3     BRA       0x976                                                                                           
00097e   51e4     MOVF      0xe4,0x0,0x1               buffer[cdc_rx_len] = cdc_data_rx[cdc_rx_len];                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000980   6aea     CLRF      0xea,0x0                                                                                        
000982   0f08     ADDLW     0x8                                                                                             
000984   6ee9     MOVWF     0xe9,0x0                                                                                        
000986   0e05     MOVLW     0x5                                                                                             
000988   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00098a   50ef     MOVF      0xef,0x0,0x0                                                                                    
00098c   6ee6     MOVWF     0xe6,0x0                                                                                        
00098e   51e4     MOVF      0xe4,0x0,0x1                                                                                    
000990   6ee7     MOVWF     0xe7,0x0                                                                                        
000992   0efd     MOVLW     0xfd                                                                                            
000994   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
000996   ffe9                                                                                                               
000998   0efe     MOVLW     0xfe                                                                                            
00099a   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00099c   ffea                                                                                                               
00099e   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0009a0   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0009a2   0e00     MOVLW     0x0                                                                                             
0009a4   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0009a6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0009a8   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0009aa   6eef     MOVWF     0xef,0x0                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                    * Prepare dual-ram buffer for next OUT transaction                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0009b0   0104     MOVLB     0x4                    CDC_BULK_BD_OUT.Cnt = sizeof(cdc_data_rx);                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0009b2   0e40     MOVLW     0x40                                                                                            
0009b4   6f19     MOVWF     0x19,0x1                                                                                        
0009b6   1718     ANDWF     0x18,0x1,0x1           mUSBBufferReady(CDC_BULK_BD_OUT);                                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0009b8   7d18     BTG       0x18,0x6,0x1                                                                                    
0009ba   0e88     MOVLW     0x88                                                                                            
0009bc   1318     IORWF     0x18,0x1,0x1                                                                                    
                                               }//end if                                                                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0009be   0100     MOVLB     0x0                return cdc_rx_len;                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0009c0   51e4     MOVF      0xe4,0x0,0x1                                                                                    
0009c2   d000     BRA       0x9c4                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0009c4   52e5     MOVF      0xe5,0x1,0x0   }//end getsUSBUSART                                                              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0009c6   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0009c8   ffd9                                                                                                               
0009ca   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Function:        void putsUSBUSART(char *data)                                C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * PreCondition:    cdc_trf_state must be in the CDC_TX_READY state.             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  The string of characters pointed to by 'data' must equal     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  to or smaller than 255 bytes.                                C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Input:           data    : Pointer to a null-terminated string of data.       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                            If a null character is not found, 255 bytes        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                            of data will be transferred to the host.           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Overview:        putsUSBUSART writes a string of data to the USB including    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  the null character. Use this version, 'puts', to transfer    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  data located in data memory.                                 C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Note:            The transfer mechanism for device-to-host(put) is more       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  flexible than host-to-device(get). It can handle             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  a string of data larger than the maximum size of bulk IN     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  endpoint. A state machine is used to transfer a long         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  string of data over multiple USB transactions.               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  See CDCTxService() for more details.                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0009cc   cfd9     MOVFF     0xfd9,0xfe6    void putsUSBUSART(char *data)                                                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0009ce   ffe6                                                                                                               
0009d0   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0009d2   ffd9                                                                                                               
0009d4   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               byte len;                                                                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * User should have checked that cdc_trf_state is in CDC_TX_READY state      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * before calling this function.                                             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * As a safety precaution, this fuction checks the state one more time       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * to make sure it does not override any pending transactions.               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Currently it just quits the routine without reporting any errors back     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * to the user.                                                              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Bottomline: User MUST make sure that mUSBUSARTIsTxTrfReady()==1           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *             before calling this function!                                 C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Example:                                                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * if(mUSBUSARTIsTxTrfReady())                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *     putsUSBUSART(pData);                                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * IMPORTANT: Never use the following blocking while loop to wait:           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * while(!mUSBUSARTIsTxTrfReady())                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *     putsUSBUSART(pData);                                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * The whole firmware framework is written based on cooperative              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * multi-tasking and a blocking code is not acceptable.                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Use a state machine instead.                                              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0009d6   0100     MOVLB     0x0                if(cdc_trf_state != CDC_TX_READY) return;                                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0009d8   51e5     MOVF      0xe5,0x0,0x1                                                                                    
0009da   e001     BZ        0x9de                                                                                           
0009dc   d02f     BRA       0xa3c                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * While loop counts the number of bytes to send including the               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * null character.                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0009de   6adf     CLRF      0xdf,0x0           len = 0;                                                                     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               do                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0009e0   2adf     INCF      0xdf,0x1,0x0           len++;                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0009e2   50df     MOVF      0xdf,0x0,0x0           if(len == 255) break;       // Break loop once max len is reached.       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0009e4   6e10     MOVWF     0x10,0x0                                                                                        
0009e6   6a11     CLRF      0x11,0x0                                                                                        
0009e8   0eff     MOVLW     0xff                                                                                            
0009ea   1810     XORWF     0x10,0x0,0x0                                                                                    
0009ec   e101     BNZ       0x9f0                                                                                           
0009ee   5011     MOVF      0x11,0x0,0x0                                                                                    
0009f0   e101     BNZ       0x9f4                                                                                           
0009f2   d00b     BRA       0xa0a                                                                                           
0009f4   0efd     MOVLW     0xfd               }while(*data++);                                                             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
0009f6   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0009f8   ffe9                                                                                                               
0009fa   2adb     INCF      0xdb,0x1,0x0                                                                                    
0009fc   0efe     MOVLW     0xfe                                                                                            
0009fe   cfdb     MOVFF     0xfdb,0xfea                                                                                     
000a00   ffea                                                                                                               
000a02   e301     BNC       0xa06                                                                                           
000a04   2adb     INCF      0xdb,0x1,0x0                                                                                    
000a06   50ef     MOVF      0xef,0x0,0x0                                                                                    
000a08   e1eb     BNZ       0x9e0                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Re-adjust pointer to its initial location                                 C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000a0a   50df     MOVF      0xdf,0x0,0x0       data-=len;                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000a0c   6e10     MOVWF     0x10,0x0                                                                                        
000a0e   6a11     CLRF      0x11,0x0                                                                                        
000a10   50d9     MOVF      0xd9,0x0,0x0                                                                                    
000a12   0ffd     ADDLW     0xfd                                                                                            
000a14   6ee9     MOVWF     0xe9,0x0                                                                                        
000a16   0eff     MOVLW     0xff                                                                                            
000a18   20da     ADDWFC    0xda,0x0,0x0                                                                                    
000a1a   6eea     MOVWF     0xea,0x0                                                                                        
000a1c   5010     MOVF      0x10,0x0,0x0                                                                                    
000a1e   5eee     SUBWF     0xee,0x1,0x0                                                                                    
000a20   5011     MOVF      0x11,0x0,0x0                                                                                    
000a22   5aed     SUBWFB    0xed,0x1,0x0                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Second piece of information (length of data to send) is ready.            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Call mUSBUSARTTxRam to setup the transfer.                                C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * The actual transfer process will be handled by CDCTxService(),            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * which should be called once per Main Program loop.                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000a24   0efd     MOVLW     0xfd               mUSBUSARTTxRam((byte*)data,len);     // See cdc.h                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000a26   cfdb     MOVFF     0xfdb,0xe6                                                                                      
000a28   f0e6                                                                                                               
000a2a   0efe     MOVLW     0xfe                                                                                            
000a2c   cfdb     MOVFF     0xfdb,0xe7                                                                                      
000a2e   f0e7                                                                                                               
000a30   cfdf     MOVFF     0xfdf,0xea                                                                                      
000a32   f0ea                                                                                                               
000a34   0100     MOVLB     0x0                                                                                             
000a36   6beb     CLRF      0xeb,0x1                                                                                        
000a38   0e01     MOVLW     0x1                                                                                             
000a3a   6fe5     MOVWF     0xe5,0x1                                                                                        
000a3c   52e5     MOVF      0xe5,0x1,0x0   }//end putsUSBUSART                                                              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000a3e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000a40   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000a42   ffd9                                                                                                               
000a44   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Function:        void putrsUSBUSART(const rom char *data)                     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * PreCondition:    cdc_trf_state must be in the CDC_TX_READY state.             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  The string of characters pointed to by 'data' must equal     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  to or smaller than 255 bytes.                                C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Input:           data    : Pointer to a null-terminated string of data.       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                            If a null character is not found, 255 bytes        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                            of data will be transferred to the host.           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Overview:        putrsUSBUSART writes a string of data to the USB including   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  the null character. Use this version, 'putrs', to transfer   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  data literals and data located in program memory.            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Note:            The transfer mechanism for device-to-host(put) is more       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  flexible than host-to-device(get). It can handle             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  a string of data larger than the maximum size of bulk IN     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  endpoint. A state machine is used to transfer a long         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  string of data over multiple USB transactions.               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  See CDCTxService() for more details.                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000a46   cfd9     MOVFF     0xfd9,0xfe6    void putrsUSBUSART(const rom char *data)                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000a48   ffe6                                                                                                               
000a4a   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000a4c   ffd9                                                                                                               
000a4e   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               byte len;                                                                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * User should have checked that cdc_trf_state is in CDC_TX_READY state      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * before calling this function.                                             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * As a safety precaution, this fuction checks the state one more time       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * to make sure it does not override any pending transactions.               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Currently it just quits the routine without reporting any errors back     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * to the user.                                                              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Bottomline: User MUST make sure that mUSBUSARTIsTxTrfReady()              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *             before calling this function!                                 C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Example:                                                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * if(mUSBUSARTIsTxTrfReady())                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *     putsUSBUSART(pData);                                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * IMPORTANT: Never use the following blocking while loop to wait:           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * while(cdc_trf_state != CDC_TX_READY)                                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *     putsUSBUSART(pData);                                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * The whole firmware framework is written based on cooperative              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * multi-tasking and a blocking code is not acceptable.                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Use a state machine instead.                                              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000a50   0100     MOVLB     0x0                if(cdc_trf_state != CDC_TX_READY) return;                                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000a52   51e5     MOVF      0xe5,0x0,0x1                                                                                    
000a54   e001     BZ        0xa58                                                                                           
000a56   d030     BRA       0xab8                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * While loop counts the number of bytes to send including the               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * null character.                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000a58   6adf     CLRF      0xdf,0x0           len = 0;                                                                     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               do                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000a5a   2adf     INCF      0xdf,0x1,0x0           len++;                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000a5c   50df     MOVF      0xdf,0x0,0x0           if(len == 255) break;       // Break loop once max len is reached.       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000a5e   6e10     MOVWF     0x10,0x0                                                                                        
000a60   6a11     CLRF      0x11,0x0                                                                                        
000a62   0eff     MOVLW     0xff                                                                                            
000a64   1810     XORWF     0x10,0x0,0x0                                                                                    
000a66   e101     BNZ       0xa6a                                                                                           
000a68   5011     MOVF      0x11,0x0,0x0                                                                                    
000a6a   e101     BNZ       0xa6e                                                                                           
000a6c   d00c     BRA       0xa86                                                                                           
000a6e   0efd     MOVLW     0xfd               }while(*data++);                                                             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000a70   cfdb     MOVFF     0xfdb,0xff6                                                                                     
000a72   fff6                                                                                                               
000a74   2adb     INCF      0xdb,0x1,0x0                                                                                    
000a76   0efe     MOVLW     0xfe                                                                                            
000a78   cfdb     MOVFF     0xfdb,0xff7                                                                                     
000a7a   fff7                                                                                                               
000a7c   e301     BNC       0xa80                                                                                           
000a7e   2adb     INCF      0xdb,0x1,0x0                                                                                    
000a80   0008     TBLRD                                                                                                     
000a82   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000a84   e1ea     BNZ       0xa5a                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Re-adjust pointer to its initial location                                 C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000a86   50df     MOVF      0xdf,0x0,0x0       data-=len;                                                                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000a88   6e10     MOVWF     0x10,0x0                                                                                        
000a8a   6a11     CLRF      0x11,0x0                                                                                        
000a8c   50d9     MOVF      0xd9,0x0,0x0                                                                                    
000a8e   0ffd     ADDLW     0xfd                                                                                            
000a90   6ee9     MOVWF     0xe9,0x0                                                                                        
000a92   0eff     MOVLW     0xff                                                                                            
000a94   20da     ADDWFC    0xda,0x0,0x0                                                                                    
000a96   6eea     MOVWF     0xea,0x0                                                                                        
000a98   5010     MOVF      0x10,0x0,0x0                                                                                    
000a9a   5eee     SUBWF     0xee,0x1,0x0                                                                                    
000a9c   5011     MOVF      0x11,0x0,0x0                                                                                    
000a9e   5aed     SUBWFB    0xed,0x1,0x0                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Second piece of information (length of data to send) is ready.            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Call mUSBUSARTTxRom to setup the transfer.                                C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * The actual transfer process will be handled by CDCTxService(),            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * which should be called once per Main Program loop.                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000aa0   0efd     MOVLW     0xfd               mUSBUSARTTxRom((rom byte*)data,len); // See cdc.h                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000aa2   cfdb     MOVFF     0xfdb,0xe6                                                                                      
000aa4   f0e6                                                                                                               
000aa6   0efe     MOVLW     0xfe                                                                                            
000aa8   cfdb     MOVFF     0xfdb,0xe7                                                                                      
000aaa   f0e7                                                                                                               
000aac   cfdf     MOVFF     0xfdf,0xea                                                                                      
000aae   f0ea                                                                                                               
000ab0   0100     MOVLB     0x0                                                                                             
000ab2   0e01     MOVLW     0x1                                                                                             
000ab4   6feb     MOVWF     0xeb,0x1                                                                                        
000ab6   6fe5     MOVWF     0xe5,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000ab8   52e5     MOVF      0xe5,0x1,0x0   }//end putrsUSBUSART                                                             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000aba   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000abc   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000abe   ffd9                                                                                                               
000ac0   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Function:        void CDCTxService(void)                                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Overview:        CDCTxService handles device-to-host transaction(s).          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                  This function should be called once per Main Program loop.   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000ac2   cfd9     MOVFF     0xfd9,0xfe6    void CDCTxService(void)                                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000ac4   ffe6                                                                                                               
000ac6   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000ac8   ffd9                                                                                                               
000aca   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               byte byte_to_send;                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000acc   0104     MOVLB     0x4                if(mCDCUsartTxIsBusy()) return;                                              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000ace   bf1c     BTFSC     0x1c,0x7,0x1                                                                                    
000ad0   d06b     BRA       0xba8                                                                                           
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Completing stage is necessary while [ mCDCUSartTxIsBusy()==1 ].           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * By having this stage, user can always check cdc_trf_state,                C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * and not having to call mCDCUsartTxIsBusy() directly.                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000ad2   0e03     MOVLW     0x3                if(cdc_trf_state == CDC_TX_COMPLETING)                                       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000ad4   0100     MOVLB     0x0                                                                                             
000ad6   5de5     SUBWF     0xe5,0x0,0x1                                                                                    
000ad8   e101     BNZ       0xadc                                                                                           
000ada   6be5     CLRF      0xe5,0x1               cdc_trf_state = CDC_TX_READY;                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * If CDC_TX_READY state, nothing to do, just return.                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000adc   51e5     MOVF      0xe5,0x0,0x1       if(cdc_trf_state == CDC_TX_READY) return;                                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000ade   e101     BNZ       0xae2                                                                                           
000ae0   d063     BRA       0xba8                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * If CDC_TX_BUSY_ZLP state, send zero length packet                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000ae2   0e02     MOVLW     0x2                if(cdc_trf_state == CDC_TX_BUSY_ZLP)                                         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000ae4   5de5     SUBWF     0xe5,0x0,0x1                                                                                    
000ae6   e106     BNZ       0xaf4                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000ae8   0104     MOVLB     0x4                    CDC_BULK_BD_IN.Cnt = 0;                                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000aea   6b1d     CLRF      0x1d,0x1                                                                                        
000aec   0100     MOVLB     0x0                    cdc_trf_state = CDC_TX_COMPLETING;                                       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000aee   0e03     MOVLW     0x3                                                                                             
000af0   6fe5     MOVWF     0xe5,0x1                                                                                        
                                               }                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000af2   d054     BRA       0xb9c              else if(cdc_trf_state == CDC_TX_BUSY)                                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000af4   05e5     DECF      0xe5,0x0,0x1                                                                                    
000af6   e152     BNZ       0xb9c                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                    * First, have to figure out how many byte of data to send.              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000af8   0e40     MOVLW     0x40               	if(cdc_tx_len > sizeof(cdc_data_tx))                                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000afa   6e10     MOVWF     0x10,0x0                                                                                        
000afc   6a11     CLRF      0x11,0x0                                                                                        
000afe   51ea     MOVF      0xea,0x0,0x1                                                                                    
000b00   5c10     SUBWF     0x10,0x0,0x0                                                                                    
000b02   0e00     MOVLW     0x0                                                                                             
000b04   5811     SUBWFB    0x11,0x0,0x0                                                                                    
000b06   e203     BC        0xb0e                                                                                           
000b08   0e40     MOVLW     0x40               	    byte_to_send = sizeof(cdc_data_tx);                                     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b0a   6edf     MOVWF     0xdf,0x0                                                                                        
000b0c   d002     BRA       0xb12              	else                                                                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b0e   c0ea     MOVFF     0xea,0xfdf         	    byte_to_send = cdc_tx_len;                                              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b10   ffdf                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                    * Next, load the number of bytes to send to Cnt in buffer descriptor    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b12   cfdf     MOVFF     0xfdf,0x41d            CDC_BULK_BD_IN.Cnt = byte_to_send;                                       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b14   f41d                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                    * Subtract the number of bytes just about to be sent from the total.    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b16   50df     MOVF      0xdf,0x0,0x0       	cdc_tx_len = cdc_tx_len - byte_to_send;                                     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b18   5dea     SUBWF     0xea,0x0,0x1                                                                                    
000b1a   6fea     MOVWF     0xea,0x1                                                                                        
                                               	                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b1c   0e48     MOVLW     0x48                   pCDCDst.bRam = (byte*)&cdc_data_tx; // Set destination pointer           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b1e   6fe8     MOVWF     0xe8,0x1                                                                                        
000b20   0e05     MOVLW     0x5                                                                                             
000b22   6fe9     MOVWF     0xe9,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b24   05eb     DECF      0xeb,0x0,0x1           if(cdc_mem_type == _ROM)            // Determine type of memory source   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b26   e115     BNZ       0xb52                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b28   50df     MOVF      0xdf,0x0,0x0               while(byte_to_send)                                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b2a   e012     BZ        0xb50                                                                                           
000b4e   d7ec     BRA       0xb28                                                                                           
                                                       {                                                                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b2c   c0e6     MOVFF     0xe6,0xff6                     *pCDCDst.bRam = *pCDCSrc.bRom;                                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b2e   fff6                                                                                                               
000b30   c0e7     MOVFF     0xe7,0xff7                                                                                      
000b32   fff7                                                                                                               
000b34   0008     TBLRD                                                                                                     
000b36   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000b38   c0e8     MOVFF     0xe8,0xfe9                                                                                      
000b3a   ffe9                                                                                                               
000b3c   c0e9     MOVFF     0xe9,0xfea                                                                                      
000b3e   ffea                                                                                                               
000b40   6eef     MOVWF     0xef,0x0                                                                                        
000b42   2be8     INCF      0xe8,0x1,0x1                   pCDCDst.bRam++;                                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b44   0e00     MOVLW     0x0                                                                                             
000b46   23e9     ADDWFC    0xe9,0x1,0x1                                                                                    
000b48   2be6     INCF      0xe6,0x1,0x1                   pCDCSrc.bRom++;                                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b4a   23e7     ADDWFC    0xe7,0x1,0x1                                                                                    
000b4c   06df     DECF      0xdf,0x1,0x0                   byte_to_send--;                                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                       }//end while(byte_to_send)                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   }                                                                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b50   d013     BRA       0xb78                  else // _RAM                                                             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b52   50df     MOVF      0xdf,0x0,0x0               while(byte_to_send)                                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b54   e011     BZ        0xb78                                                                                           
000b76   d7ed     BRA       0xb52                                                                                           
                                                       {                                                                    C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b56   c0e6     MOVFF     0xe6,0xfe9                     *pCDCDst.bRam = *pCDCSrc.bRam;                                   C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b58   ffe9                                                                                                               
000b5a   c0e7     MOVFF     0xe7,0xfea                                                                                      
000b5c   ffea                                                                                                               
000b5e   50ef     MOVF      0xef,0x0,0x0                                                                                    
000b60   c0e8     MOVFF     0xe8,0xfe9                                                                                      
000b62   ffe9                                                                                                               
000b64   c0e9     MOVFF     0xe9,0xfea                                                                                      
000b66   ffea                                                                                                               
000b68   6eef     MOVWF     0xef,0x0                                                                                        
000b6a   2be8     INCF      0xe8,0x1,0x1                   pCDCDst.bRam++;                                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b6c   0e00     MOVLW     0x0                                                                                             
000b6e   23e9     ADDWFC    0xe9,0x1,0x1                                                                                    
000b70   2be6     INCF      0xe6,0x1,0x1                   pCDCSrc.bRam++;                                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b72   23e7     ADDWFC    0xe7,0x1,0x1                                                                                    
000b74   06df     DECF      0xdf,0x1,0x0                   byte_to_send--;                                                  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                       }//end while(byte_to_send._word)                                     C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   }//end if(cdc_mem_type...)                                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                    * Lastly, determine if a zero length packet state is necessary.         C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                    * See explanation in USB Specification 2.0: Section 5.8.3               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b78   51ea     MOVF      0xea,0x0,0x1           if(cdc_tx_len == 0)                                                      C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b7a   e110     BNZ       0xb9c                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b7c   0104     MOVLB     0x4                        if(CDC_BULK_BD_IN.Cnt == sizeof(cdc_data_tx))                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b7e   511d     MOVF      0x1d,0x0,0x1                                                                                    
000b80   6e10     MOVWF     0x10,0x0                                                                                        
000b82   6a11     CLRF      0x11,0x0                                                                                        
000b84   0e40     MOVLW     0x40                                                                                            
000b86   1810     XORWF     0x10,0x0,0x0                                                                                    
000b88   e101     BNZ       0xb8c                                                                                           
000b8a   5011     MOVF      0x11,0x0,0x0                                                                                    
000b8c   e104     BNZ       0xb96                                                                                           
000b8e   0100     MOVLB     0x0                            cdc_trf_state = CDC_TX_BUSY_ZLP;                                 C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b90   0e02     MOVLW     0x2                                                                                             
000b92   6fe5     MOVWF     0xe5,0x1                                                                                        
000b94   d003     BRA       0xb9c                      else                                                                 C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b96   0100     MOVLB     0x0                            cdc_trf_state = CDC_TX_COMPLETING;                               C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b98   0e03     MOVLW     0x3                                                                                             
000b9a   6fe5     MOVWF     0xe5,0x1                                                                                        
                                                   }//end if(cdc_tx_len...)                                                 C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               }//end if(cdc_tx_sate == CDC_TX_BUSY)                                        C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                * Both CDC_TX_BUSY and CDC_TX_BUSY_ZLP states use the following macro       C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b9c   0e40     MOVLW     0x40               mUSBBufferReady(CDC_BULK_BD_IN);                                             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000b9e   0104     MOVLB     0x4                                                                                             
000ba0   171c     ANDWF     0x1c,0x1,0x1                                                                                    
000ba2   7d1c     BTG       0x1c,0x6,0x1                                                                                    
000ba4   0e88     MOVLW     0x88                                                                                            
000ba6   131c     IORWF     0x1c,0x1,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000ba8   52e5     MOVF      0xe5,0x1,0x0   }//end CDCTxService                                                              C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
000baa   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bac   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000bae   ffd9                                                                                                               
000bb0   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           #endif //USB_USE_CDC                                                             C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           /** EOF cdc.c ****************************************************************/  C:\MCHPFSUSB\fw\CDC\system\usb\class\cdc\cdc.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                Thermo Sensor with SPI(TM) Interface                           C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * FileName:        temperature.c                                                C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           #include <spi.h>                                                                 C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           #include "io_cfg.h"                                                              C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           #include "user\temperature.h"                                                    C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           WORD temperature;           // Raw data format                                   C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           char tempString[10];        // Buffer for storing data in ASCII format           C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Function:        void InitTempSensor(void)                                    C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Overview:        Initializes SPI interface & chip select line                 C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           void InitTempSensor(void)                                                        C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\user\temperature.c
001398   848a     BSF       0x8a,0x2,0x0       cs_temp_sensor = 1;                                                          C:\MCHPFSUSB\fw\CDC\user\temperature.c
00139a   9493     BCF       0x93,0x2,0x0       tris_cs_temp_sensor = OUTPUT_PIN;                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
00139c   6ae6     CLRF      0xe6,0x0           OpenSPI(SPI_FOSC_64, MODE_11, SMPMID);                                       C:\MCHPFSUSB\fw\CDC\user\temperature.c
00139e   0e03     MOVLW     0x3                                                                                             
0013a0   6ee6     MOVWF     0xe6,0x0                                                                                        
0013a2   0e02     MOVLW     0x2                                                                                             
0013a4   6ee6     MOVWF     0xe6,0x0                                                                                        
0013a6   ec0d     CALL      0x181a,0x0                                                                                      
0013a8   f00c                                                                                                               
0013aa   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013ac   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013ae   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                               // Initialize readable values - default to room temperature                  C:\MCHPFSUSB\fw\CDC\user\temperature.c
0013b0   0101     MOVLB     0x1                temperature._word = 0x0C87;       // 25 degree celsius                       C:\MCHPFSUSB\fw\CDC\user\temperature.c
0013b2   0e87     MOVLW     0x87                                                                                            
0013b4   6f00     MOVWF     0x0,0x1                                                                                         
0013b6   0e0c     MOVLW     0xc                                                                                             
0013b8   6f01     MOVWF     0x1,0x1                                                                                         
0013ba   eff0     GOTO      0x13e0             UpdateCelsiusASCII();                                                        C:\MCHPFSUSB\fw\CDC\user\temperature.c
0013bc   f009                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           }//end InitTempSensor                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Function:        void AcquireTemperature(void)                                C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Overview:        None                                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           BOOL AcquireTemperature(void)                                                    C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\user\temperature.c
0013be   948a     BCF       0x8a,0x2,0x0       cs_temp_sensor = 0;                                                          C:\MCHPFSUSB\fw\CDC\user\temperature.c
0013c0   ecf9     CALL      0x19f2,0x0         MSB(temperature) = ReadSPI();                                                C:\MCHPFSUSB\fw\CDC\user\temperature.c
0013c2   f00c                                                                                                               
0013c4   0101     MOVLB     0x1                                                                                             
0013c6   6f01     MOVWF     0x1,0x1                                                                                         
0013c8   ecf9     CALL      0x19f2,0x0         LSB(temperature) = ReadSPI();                                                C:\MCHPFSUSB\fw\CDC\user\temperature.c
0013ca   f00c                                                                                                               
0013cc   0101     MOVLB     0x1                                                                                             
0013ce   6f00     MOVWF     0x0,0x1                                                                                         
0013d0   848a     BSF       0x8a,0x2,0x0       cs_temp_sensor = 1;                                                          C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
0013d2   b500     BTFSC     0x0,0x2,0x1        if(temperature.LowB.b2 == 0)                                                 C:\MCHPFSUSB\fw\CDC\user\temperature.c
0013d4   d002     BRA       0x13da                                                                                          
0013d6   0e00     MOVLW     0x0                    return FAIL;                                                             C:\MCHPFSUSB\fw\CDC\user\temperature.c
0013d8   d002     BRA       0x13de                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
0013da   0e01     MOVLW     0x1                return OK;                                                                   C:\MCHPFSUSB\fw\CDC\user\temperature.c
0013dc   d000     BRA       0x13de                                                                                          
0013de   0012     RETURN    0x0            }//end AcquireTemperature                                                        C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Function:        void UpdateCelsiusASCII(void)                                C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Overview:        This routine converts data output to ASCII string            C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\CDC\user\temperature.c
0013e0   cfd9     MOVFF     0xfd9,0xfe6    void UpdateCelsiusASCII(void)                                                    C:\MCHPFSUSB\fw\CDC\user\temperature.c
0013e2   ffe6                                                                                                               
0013e4   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0013e6   ffd9                                                                                                               
0013e8   0e03     MOVLW     0x3                                                                                             
0013ea   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                               WORD temp;                                                                   C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                               byte i;                                                                      C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
0013ec   c100     MOVFF     0x100,0x10         temp._word = temperature._word >> 3;                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
0013ee   f010                                                                                                               
0013f0   c101     MOVFF     0x101,0x11                                                                                      
0013f2   f011                                                                                                               
0013f4   90d8     BCF       0xd8,0x0,0x0                                                                                    
0013f6   3211     RRCF      0x11,0x1,0x0                                                                                    
0013f8   3210     RRCF      0x10,0x1,0x0                                                                                    
0013fa   04e8     DECF      0xe8,0x0,0x0                                                                                    
0013fc   e1fb     BNZ       0x13f4                                                                                          
0013fe   c010     MOVFF     0x10,0xfde                                                                                      
001400   ffde                                                                                                               
001402   c011     MOVFF     0x11,0xfdd                                                                                      
001404   ffdd                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
001406   50d9     MOVF      0xd9,0x0,0x0       if(temp.HighB.b4 == 0)                                                       C:\MCHPFSUSB\fw\CDC\user\temperature.c
001408   0f01     ADDLW     0x1                                                                                             
00140a   6ee9     MOVWF     0xe9,0x0                                                                                        
00140c   cfda     MOVFF     0xfda,0xfea                                                                                     
00140e   ffea                                                                                                               
001410   50ef     MOVF      0xef,0x0,0x0                                                                                    
001412   0b10     ANDLW     0x10                                                                                            
001414   e108     BNZ       0x1426                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
001416   0e01     MOVLW     0x1                    temp.HighB._byte &= 0b00011111;                                          C:\MCHPFSUSB\fw\CDC\user\temperature.c
001418   9adb     BCF       0xdb,0x5,0x0                                                                                    
00141a   9cdb     BCF       0xdb,0x6,0x0                                                                                    
00141c   9edb     BCF       0xdb,0x7,0x0                                                                                    
00141e   0101     MOVLB     0x1                    tempString[0] = '+';                                                     C:\MCHPFSUSB\fw\CDC\user\temperature.c
001420   0e2b     MOVLW     0x2b                                                                                            
001422   6f02     MOVWF     0x2,0x1                                                                                         
                                               }                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
001424   d016     BRA       0x1452             else                                                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
001426   0e01     MOVLW     0x1                    temp.HighB._byte |= 0b11100000;                                          C:\MCHPFSUSB\fw\CDC\user\temperature.c
001428   8adb     BSF       0xdb,0x5,0x0                                                                                    
00142a   8cdb     BSF       0xdb,0x6,0x0                                                                                    
00142c   8edb     BSF       0xdb,0x7,0x0                                                                                    
00142e   0101     MOVLB     0x1                    tempString[0] = '-';                                                     C:\MCHPFSUSB\fw\CDC\user\temperature.c
001430   0e2d     MOVLW     0x2d                                                                                            
001432   6f02     MOVWF     0x2,0x1                                                                                         
001434   cfde     MOVFF     0xfde,0x10             temp._word = temp._word ^ 0xFFFF;   // Negate                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
001436   f010                                                                                                               
001438   cfdd     MOVFF     0xfdd,0x11                                                                                      
00143a   f011                                                                                                               
00143c   0eff     MOVLW     0xff                                                                                            
00143e   1a10     XORWF     0x10,0x1,0x0                                                                                    
001440   1a11     XORWF     0x11,0x1,0x0                                                                                    
001442   c010     MOVFF     0x10,0xfde                                                                                      
001444   ffde                                                                                                               
001446   c011     MOVFF     0x11,0xfdd                                                                                      
001448   ffdd                                                                                                               
00144a   2adf     INCF      0xdf,0x1,0x0           temp._word++;                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
00144c   0e01     MOVLW     0x1                                                                                             
00144e   e301     BNC       0x1452                                                                                          
001450   2adb     INCF      0xdb,0x1,0x0                                                                                    
                                               }//end if                                                                    C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
001452   cfde     MOVFF     0xfde,0x10         temp._word = (temp._word*10U) >> 4;     // Turn into celsius xx.x            C:\MCHPFSUSB\fw\CDC\user\temperature.c
001454   f010                                                                                                               
001456   cfdd     MOVFF     0xfdd,0x11                                                                                      
001458   f011                                                                                                               
00145a   0e0a     MOVLW     0xa                                                                                             
00145c   0211     MULWF     0x11,0x0                                                                                        
00145e   cff3     MOVFF     0xff3,0x11                                                                                      
001460   f011                                                                                                               
001462   0210     MULWF     0x10,0x0                                                                                        
001464   cff3     MOVFF     0xff3,0x10                                                                                      
001466   f010                                                                                                               
001468   50f4     MOVF      0xf4,0x0,0x0                                                                                    
00146a   2611     ADDWF     0x11,0x1,0x0                                                                                    
00146c   0e04     MOVLW     0x4                                                                                             
00146e   90d8     BCF       0xd8,0x0,0x0                                                                                    
001470   3211     RRCF      0x11,0x1,0x0                                                                                    
001472   3210     RRCF      0x10,0x1,0x0                                                                                    
001474   04e8     DECF      0xe8,0x0,0x0                                                                                    
001476   e1fb     BNZ       0x146e                                                                                          
001478   c010     MOVFF     0x10,0xfde                                                                                      
00147a   ffde                                                                                                               
00147c   c011     MOVFF     0x11,0xfdd                                                                                      
00147e   ffdd                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                               /* Populate string */                                                        C:\MCHPFSUSB\fw\CDC\user\temperature.c
001480   0e04     MOVLW     0x4                for(i=4;i>0;i--)                                                             C:\MCHPFSUSB\fw\CDC\user\temperature.c
001482   6ef3     MOVWF     0xf3,0x0                                                                                        
001484   0e02     MOVLW     0x2                                                                                             
001486   cff3     MOVFF     0xff3,0xfdb                                                                                     
001488   ffdb                                                                                                               
00148a   50db     MOVF      0xdb,0x0,0x0                                                                                    
00148c   0800     SUBLW     0x0                                                                                             
00148e   e233     BC        0x14f6                                                                                          
0014f0   0e02     MOVLW     0x2                                                                                             
0014f2   06db     DECF      0xdb,0x1,0x0                                                                                    
0014f4   d7ca     BRA       0x148a                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
001490   cfde     MOVFF     0xfde,0x10             tempString[i] = (((char)(temp._word % 10)) & 0x0F) | 0x30;               C:\MCHPFSUSB\fw\CDC\user\temperature.c
001492   f010                                                                                                               
001494   cfdd     MOVFF     0xfdd,0x11                                                                                      
001496   f011                                                                                                               
001498   0e0a     MOVLW     0xa                                                                                             
00149a   6e0b     MOVWF     0xb,0x0                                                                                         
00149c   6a0c     CLRF      0xc,0x0                                                                                         
00149e   c010     MOVFF     0x10,0x6                                                                                        
0014a0   f006                                                                                                               
0014a2   c011     MOVFF     0x11,0x7                                                                                        
0014a4   f007                                                                                                               
0014a6   ecc5     CALL      0x198a,0x0                                                                                      
0014a8   f00c                                                                                                               
0014aa   c002     MOVFF     0x2,0x10                                                                                        
0014ac   f010                                                                                                               
0014ae   c003     MOVFF     0x3,0x11                                                                                        
0014b0   f011                                                                                                               
0014b2   0e0f     MOVLW     0xf                                                                                             
0014b4   1410     ANDWF     0x10,0x0,0x0                                                                                    
0014b6   0930     IORLW     0x30                                                                                            
0014b8   6ee6     MOVWF     0xe6,0x0                                                                                        
0014ba   0e02     MOVLW     0x2                                                                                             
0014bc   50db     MOVF      0xdb,0x0,0x0                                                                                    
0014be   6aea     CLRF      0xea,0x0                                                                                        
0014c0   0f02     ADDLW     0x2                                                                                             
0014c2   6ee9     MOVWF     0xe9,0x0                                                                                        
0014c4   0e01     MOVLW     0x1                                                                                             
0014c6   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0014c8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014ca   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0014cc   6eef     MOVWF     0xef,0x0                                                                                        
0014ce   cfd9     MOVFF     0xfd9,0xfe9            temp._word /= 10;                                                        C:\MCHPFSUSB\fw\CDC\user\temperature.c
0014d0   ffe9                                                                                                               
0014d2   cfda     MOVFF     0xfda,0xfea                                                                                     
0014d4   ffea                                                                                                               
0014d6   0e0a     MOVLW     0xa                                                                                             
0014d8   6e0b     MOVWF     0xb,0x0                                                                                         
0014da   6a0c     CLRF      0xc,0x0                                                                                         
0014dc   cfee     MOVFF     0xfee,0x6                                                                                       
0014de   f006                                                                                                               
0014e0   cfed     MOVFF     0xfed,0x7                                                                                       
0014e2   f007                                                                                                               
0014e4   ecc5     CALL      0x198a,0x0                                                                                      
0014e6   f00c                                                                                                               
0014e8   c006     MOVFF     0x6,0xfee                                                                                       
0014ea   ffee                                                                                                               
0014ec   c007     MOVFF     0x7,0xfed                                                                                       
0014ee   ffed                                                                                                               
                                               }//end for                                                                   C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                               /* Turn leading zeros into spaces */                                         C:\MCHPFSUSB\fw\CDC\user\temperature.c
0014f6   0e30     MOVLW     0x30               if(tempString[1] == '0')                                                     C:\MCHPFSUSB\fw\CDC\user\temperature.c
0014f8   0101     MOVLB     0x1                                                                                             
0014fa   5d03     SUBWF     0x3,0x0,0x1                                                                                     
0014fc   e107     BNZ       0x150c                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
0014fe   0e20     MOVLW     0x20                   tempString[1] = ' ';                                                     C:\MCHPFSUSB\fw\CDC\user\temperature.c
001500   6f03     MOVWF     0x3,0x1                                                                                         
001502   0e30     MOVLW     0x30                   if(tempString[2] == '0')                                                 C:\MCHPFSUSB\fw\CDC\user\temperature.c
001504   5d04     SUBWF     0x4,0x0,0x1                                                                                     
001506   e102     BNZ       0x150c                                                                                          
001508   0e20     MOVLW     0x20                       tempString[2] = ' ';                                                 C:\MCHPFSUSB\fw\CDC\user\temperature.c
00150a   6f04     MOVWF     0x4,0x1                                                                                         
                                               }//end if                                                                    C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                               /* Adjust decimal digit */                                                   C:\MCHPFSUSB\fw\CDC\user\temperature.c
00150c   c106     MOVFF     0x106,0x107        tempString[5] = tempString[4];                                               C:\MCHPFSUSB\fw\CDC\user\temperature.c
00150e   f107                                                                                                               
001510   0e2e     MOVLW     0x2e               tempString[4]='.';                                                           C:\MCHPFSUSB\fw\CDC\user\temperature.c
001512   6f06     MOVWF     0x6,0x1                                                                                         
001514   0ef8     MOVLW     0xf8               tempString[6]=0xF8;     // Degree symbol                                     C:\MCHPFSUSB\fw\CDC\user\temperature.c
001516   6f08     MOVWF     0x8,0x1                                                                                         
001518   0e43     MOVLW     0x43               tempString[7]='C';                                                           C:\MCHPFSUSB\fw\CDC\user\temperature.c
00151a   6f09     MOVWF     0x9,0x1                                                                                         
00151c   0e0d     MOVLW     0xd                tempString[8]='\r';                                                          C:\MCHPFSUSB\fw\CDC\user\temperature.c
00151e   6f0a     MOVWF     0xa,0x1                                                                                         
001520   6b0b     CLRF      0xb,0x1            tempString[9]=0x00;     // Null-Terminated                                   C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
001522   cfd9     MOVFF     0xfd9,0xfe1    }//end UpdateCelsiusASCII                                                        C:\MCHPFSUSB\fw\CDC\user\temperature.c
001524   ffe1                                                                                                               
001526   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001528   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00152a   ffd9                                                                                                               
00152c   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           /** EOF temperature.c ********************************************************/  C:\MCHPFSUSB\fw\CDC\user\temperature.c
                                           ;	RCS Header $Id: aarg.asm,v 1.1 2003/12/09 22:53:19 GrosbaJ Exp $               C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           REMB3                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           AARGB7		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           REMB2                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           AARGB6		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           REMB1                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           AARGB5		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           REMB0                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           AARGB4		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           AARGB3		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           AARGB2		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           AARGB1		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           AARGB0		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           AEXP		RES 1       ; 8 bit biased exponent for argument A                         C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           	GLOBAL	AARGB0, AARGB1, AARGB2, AARGB3                                           C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                   GLOBAL  AARGB4, AARGB5, AARGB6, AARGB7                                   C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           	GLOBAL  AEXP                                                                    C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           	GLOBAL  REMB3, REMB2, REMB1, REMB0                                              C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                   END                                                                      C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                   LIST P=18F4550                                                           C:\MCC18\SRC\TRADIT~1\PROC\p18f4550.asm
                                                   LIST                                                                     C:\MCC18\SRC\TRADIT~1\PROC\p18f4550.asm
                                                   END                                                                      C:\MCC18\SRC\TRADIT~1\PROC\p18f4550.asm
                                           ;	RCS Header $Id: barg.asm,v 1.1 2003/12/09 22:53:19 GrosbaJ Exp $               C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           BARGB3		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           BARGB2		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           BARGB1		RES 1                                                                    C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           BARGB0		RES 1       ; most significant byte of argument B                        C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           BEXP		RES 1       ; 8 bit biased exponent for argument B                         C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                   GLOBAL  BARGB3, BARGB2, BARGB1, BARGB0                                   C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                   GLOBAL  BEXP                                                             C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                   END                                                                      C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;	RCS Header $Id: cmath18.asm,v 1.1 2003/12/09 22:53:19 GrosbaJ Exp $            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           SIGN		RES 1       ; save location for sign in MSB                                C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           FPFLAGS		RES 1       ; floating point library exception flags                    C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                   GLOBAL  SIGN, FPFLAGS                                                    C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           	                                                                                C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                   END                                                                      C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           /*** Unsigned Integer Division: 16-bit by 16-bit                                 C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                            ***                                                                             C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                            *** Optimized: Dec. 21, 2000                                                    C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                            ***        by: Daniel R. Madill, Quanser Consulting Inc.                        C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                            ***       for: Saved (for the worst case) at least 5*16 = 80 instruction cycles C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                            ***            over the code supplied with MCC18 v1.00.12                       C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                            ***/                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           void FXD1616U (/*unsigned arg0, unsigned arg1*/)                                 C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           {                                                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                             // use INDF1 for the counter...                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                 _asm                                                                       C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                               // REM = 0                                                                   C:\mcc18\src\TRADIT~1\math\fxd1616u.c
00198a   6a03     CLRF      0x3,0x0            clrf REMB0, 0                                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
00198c   6a02     CLRF      0x2,0x0            clrf REMB1, 0                                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                               // INDF1 = 16                                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
00198e   0e10     MOVLW     0x10               movlw 16                                                                     C:\mcc18\src\TRADIT~1\math\fxd1616u.c
001990   6ee7     MOVWF     0xe7,0x0           movwf INDF1, 0                                                               C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                               // Clear the carry                                                           C:\mcc18\src\TRADIT~1\math\fxd1616u.c
001992   90d8     BCF       0xd8,0x0,0x0   	bcf STATUS, 0, 0                                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           loop:                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           	//AARG16 <<= 1; Carry is always clear at this point.                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
001994   3606     RLCF      0x6,0x1,0x0    	rlcf AARGB1, 1, 0                                                               C:\mcc18\src\TRADIT~1\math\fxd1616u.c
001996   3607     RLCF      0x7,0x1,0x0    	rlcf AARGB0, 1, 0                                                               C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           	//PROD = (PROD << 1) | (AARG16 >> 16)                                           C:\mcc18\src\TRADIT~1\math\fxd1616u.c
001998   3602     RLCF      0x2,0x1,0x0    	rlcf REMB1, 1, 0                                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
00199a   3603     RLCF      0x3,0x1,0x0    	rlcf REMB0, 1, 0                                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           	                                                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           	//if (PROD >= BARG16)                                                           C:\mcc18\src\TRADIT~1\math\fxd1616u.c
00199c   500b     MOVF      0xb,0x0,0x0    	movf BARGB1, 0, 0                                                               C:\mcc18\src\TRADIT~1\math\fxd1616u.c
00199e   5c02     SUBWF     0x2,0x0,0x0    	subwf REMB1, 0, 0                                                               C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019a0   500c     MOVF      0xc,0x0,0x0    	movf BARGB0, 0, 0                                                               C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019a2   5803     SUBWFB    0x3,0x0,0x0    	subwfb REMB0, 0, 0                                                              C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019a4   e305     BNC       0x19b0         	bnc endloop                                                                     C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                               //{                                                                          C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           	    //PROD -= BARG16;                                                           C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019a6   500b     MOVF      0xb,0x0,0x0    	    movf BARGB1, 0, 0                                                           C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019a8   5e02     SUBWF     0x2,0x1,0x0    	    subwf REMB1, 1, 0                                                           C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019aa   500c     MOVF      0xc,0x0,0x0    	    movf BARGB0, 0, 0                                                           C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019ac   5a03     SUBWFB    0x3,0x1,0x0    	    subwfb REMB0, 1, 0                                                          C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           	    //++AARG16; Since AARG16 was shift to the left above, the increment will    C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                   //          simply set the LSbit. Using incf also clears the carry, which C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                   //          means we don't have to clear the carry at the top of the loop. C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019ae   2a06     INCF      0x6,0x1,0x0            incf AARGB1, 1, 0                                                        C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                               //}                                                                          C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           endloop:                                                                         C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019b0   2ee7     DECFSZ    0xe7,0x1,0x0       decfsz INDF1, 1, 0    // does not affect the carry bit                       C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019b2   d7f0     BRA       0x1994             bra loop                                                                     C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                             _endasm                                                                        C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                             /* result in AARG already... */                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
0019b4   0012     RETURN    0x0            }                                                                                C:\mcc18\src\TRADIT~1\math\fxd1616u.c
                                           /* $Id: openspi.c,v 1.2.2.3 2004/05/15 23:51:25 curtiss Exp $ */                 C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           #include <p18cxxx.h>                                                             C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           #include <spi.h>                                                                 C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           /********************************************************************            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           *   Function Name:  OpenSPI                                         *            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           *   Return Value:   void                                            *            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           *   Parameters:     SSP peripheral setup bytes                      *            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           *   Description:    This function sets up the SSP module on a       *            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           *                   PIC18Cxxx device for use with a Microchip SPI   *            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           *                   EEPROM device or SPI bus device.                *            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           ********************************************************************/            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
00181a   cfd9     MOVFF     0xfd9,0xfe6    void OpenSPI( unsigned char sync_mode, unsigned char bus_mode, unsigned char smp_phase) C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
00181c   ffe6                                                                                                               
00181e   cfda     MOVFF     0xfda,0xfe6                                                                                     
001820   ffe6                                                                                                               
001822   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001824   ffd9                                                                                                               
001826   cfe2     MOVFF     0xfe2,0xfda                                                                                     
001828   ffda                                                                                                               
                                           {                                                                                C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
00182a   0e3f     MOVLW     0x3f             SSPSTAT &= 0x3F;                // power on state                              C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
00182c   16c7     ANDWF     0xc7,0x1,0x0                                                                                    
00182e   6ac6     CLRF      0xc6,0x0         SSPCON1 = 0x00;                 // power on state                              C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
001830   0efd     MOVLW     0xfd             SSPCON1 |= sync_mode;           // select serial mode                          C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
001832   50db     MOVF      0xdb,0x0,0x0                                                                                    
001834   12c6     IORWF     0xc6,0x1,0x0                                                                                    
001836   0efb     MOVLW     0xfb             SSPSTAT |= smp_phase;           // select data input sample phase              C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
001838   50db     MOVF      0xdb,0x0,0x0                                                                                    
00183a   12c7     IORWF     0xc7,0x1,0x0                                                                                    
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
00183c   0efc     MOVLW     0xfc             switch( bus_mode )                                                             C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
00183e   50db     MOVF      0xdb,0x0,0x0                                                                                    
001840   0a03     XORLW     0x3                                                                                             
001842   e009     BZ        0x1856                                                                                          
001844   0a01     XORLW     0x1                                                                                             
001846   e004     BZ        0x1850                                                                                          
001848   0a02     XORLW     0x2                                                                                             
00184a   e106     BNZ       0x1858                                                                                          
                                             {                                                                              C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                               case 0:                       // SPI bus mode 0,0                            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
00184c   8cc7     BSF       0xc7,0x6,0x0         SSPSTATbits.CKE = 1;        // data transmitted on rising edge             C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
00184e   d004     BRA       0x1858               break;                                                                     C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                               case 2:                       // SPI bus mode 1,0                            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
001850   8cc7     BSF       0xc7,0x6,0x0         SSPSTATbits.CKE = 1;        // data transmitted on falling edge            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
001852   88c6     BSF       0xc6,0x4,0x0         SSPCON1bits.CKP = 1;        // clock idle state high                       C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
001854   d001     BRA       0x1858               break;                                                                     C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                               case 3:                       // SPI bus mode 1,1                            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
001856   88c6     BSF       0xc6,0x4,0x0         SSPCON1bits.CKP = 1;        // clock idle state high                       C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                                 break;                                                                     C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                               default:                      // default SPI bus mode 0,1                    C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                                 break;                                                                     C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                             }                                                                              C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
001858   0efd     MOVLW     0xfd             switch( sync_mode )                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
00185a   50db     MOVF      0xdb,0x0,0x0                                                                                    
00185c   0a05     XORLW     0x5                                                                                             
00185e   e003     BZ        0x1866                                                                                          
001860   0a01     XORLW     0x1                                                                                             
001862   e104     BNZ       0x186c                                                                                          
                                             {                                                                              C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                               case 4:                       // slave mode w /SS enable                     C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           #if defined(__18F6410) || defined(__18F6490) || \                                C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                               defined(__18F8410) || defined(__18F8490)                                     C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                                 TRISFbits.TRISF7 = 1;       // define /SS pin as input                     C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           #else                                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
001864   8a92     BSF       0x92,0x5,0x0         TRISAbits.TRISA5 = 1;       // define /SS pin as input                     C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           #endif                                                                           C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                               case 5:                       // slave mode w/o /SS enable                   C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           #if defined(__18F2455) || defined(__18F2550) || \                                C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                               defined(__18F4455) || defined(__18F4550)                                     C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
001866   8293     BSF       0x93,0x1,0x0         TRISBbits.TRISB1 = 1;       // define clock pin as input                   C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           #else                                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                                 TRISCbits.TRISC3 = 1;       // define clock pin as input                   C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           #endif                                                                           C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
001868   9ec7     BCF       0xc7,0x7,0x0         SSPSTATbits.SMP = 0;        // must be cleared in slave SPI mode           C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
00186a   d001     BRA       0x186e               break;                                                                     C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                               default:                      // master mode, define clock pin as output     C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           #if defined(__18F2455) || defined(__18F2550) || \                                C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                               defined(__18F4455) || defined(__18F4550)                                     C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
00186c   9293     BCF       0x93,0x1,0x0         TRISBbits.TRISB1 = 0;       // define clock pin as output                  C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           #else                                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                                 TRISCbits.TRISC3 = 0;       // define clock pin as output                  C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           #endif                                                                           C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                                 break;                                                                     C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                             }                                                                              C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           #if defined(__18F2455) || defined(__18F2550) || \                                C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                               defined(__18F4455) || defined(__18F4550)                                     C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
00186e   9e94     BCF       0x94,0x7,0x0     TRISC &= 0x7F;                  // define SDO as output (master or slave)      C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
001870   8093     BSF       0x93,0x0,0x0     TRISB |= 0x01;                  // define SDI as input (master or slave)       C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           #else                                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                             TRISC &= 0xDF;                  // define SDO as output (master or slave)      C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                             TRISC |= 0x10;                  // define SDI as input (master or slave)       C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
                                           #endif                                                                           C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
001872   8ac6     BSF       0xc6,0x5,0x0     SSPCON1 |= SSPENB;              // enable synchronous serial port              C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
001874   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\mcc18\src\TRADIT~1\pmc\SPI\openspi.c
001876   cfe5     MOVFF     0xfe5,0xfda                                                                                     
001878   ffda                                                                                                               
00187a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00187c   ffd9                                                                                                               
00187e   0012     RETURN    0x0                                                                                             
                                           /* $Id: readspi.c,v 1.1 2003/12/09 22:52:09 GrosbaJ Exp $ */                     C:\mcc18\src\TRADIT~1\pmc\SPI\readspi.c
                                           #include <p18cxxx.h>                                                             C:\mcc18\src\TRADIT~1\pmc\SPI\readspi.c
                                           #include <spi.h>                                                                 C:\mcc18\src\TRADIT~1\pmc\SPI\readspi.c
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\SPI\readspi.c
                                           /********************************************************************            C:\mcc18\src\TRADIT~1\pmc\SPI\readspi.c
                                           *     Function Name:    ReadSPI                                     *            C:\mcc18\src\TRADIT~1\pmc\SPI\readspi.c
                                           *     Return Value:     contents of SSPBUF register                 *            C:\mcc18\src\TRADIT~1\pmc\SPI\readspi.c
                                           *     Parameters:       void                                        *            C:\mcc18\src\TRADIT~1\pmc\SPI\readspi.c
                                           *     Description:      Read single byte from SPI bus.              *            C:\mcc18\src\TRADIT~1\pmc\SPI\readspi.c
                                           ********************************************************************/            C:\mcc18\src\TRADIT~1\pmc\SPI\readspi.c
                                           unsigned char ReadSPI( void )                                                    C:\mcc18\src\TRADIT~1\pmc\SPI\readspi.c
                                           {                                                                                C:\mcc18\src\TRADIT~1\pmc\SPI\readspi.c
0019f2   6ac9     CLRF      0xc9,0x0         SSPBUF = 0x00;                  // initiate bus cycle                          C:\mcc18\src\TRADIT~1\pmc\SPI\readspi.c
0019f4   a0c7     BTFSS     0xc7,0x0,0x0     while ( !SSPSTATbits.BF );      // wait until cycle complete                   C:\mcc18\src\TRADIT~1\pmc\SPI\readspi.c
0019f6   d7fe     BRA       0x19f4                                                                                          
0019f8   50c9     MOVF      0xc9,0x0,0x0     return ( SSPBUF );              // return with byte read                       C:\mcc18\src\TRADIT~1\pmc\SPI\readspi.c
0019fa   0012     RETURN    0x0            }                                                                                C:\mcc18\src\TRADIT~1\pmc\SPI\readspi.c
                                           /* $Id: uputs.c,v 1.1 2003/12/09 22:52:09 GrosbaJ Exp $ */                       C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                           #include <p18cxxx.h>                                                             C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                           #include <usart.h>                                                               C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                           /**********************************************************************          C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                           *    Function Name:  putsUSART                                        *          C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                           *    Return Value:   void                                             *          C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                           *    Parameters:     data: pointer to string of data                  *          C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                           *    Description:    This routine transmits a string of characters    *          C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                           *                    to the USART including the null.                 *          C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                           **********************************************************************/          C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
0018d8   cfd9     MOVFF     0xfd9,0xfe6    void putsUSART( char *data)                                                      C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
0018da   ffe6                                                                                                               
0018dc   cfda     MOVFF     0xfda,0xfe6                                                                                     
0018de   ffe6                                                                                                               
0018e0   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0018e2   ffd9                                                                                                               
0018e4   cfe2     MOVFF     0xfe2,0xfda                                                                                     
0018e6   ffda                                                                                                               
                                           {                                                                                C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                             do                                                                             C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
                                             {  // Transmit a byte                                                          C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
0018e8   a2ac     BTFSS     0xac,0x1,0x0       while(BusyUSART());                                                          C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
0018ea   d7fe     BRA       0x18e8                                                                                          
0018ec   0efc     MOVLW     0xfc               putcUSART(*data);                                                            C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
0018ee   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0018f0   ffe9                                                                                                               
0018f2   0efd     MOVLW     0xfd                                                                                            
0018f4   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0018f6   ffea                                                                                                               
0018f8   50ef     MOVF      0xef,0x0,0x0                                                                                    
0018fa   6ee6     MOVWF     0xe6,0x0                                                                                        
0018fc   ecae     CALL      0x195c,0x0                                                                                      
0018fe   f00c                                                                                                               
001900   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001902   0efc     MOVLW     0xfc             } while( *data++ );                                                            C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
001904   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
001906   ffe9                                                                                                               
001908   2adb     INCF      0xdb,0x1,0x0                                                                                    
00190a   0efd     MOVLW     0xfd                                                                                            
00190c   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00190e   ffea                                                                                                               
001910   e301     BNC       0x1914                                                                                          
001912   2adb     INCF      0xdb,0x1,0x0                                                                                    
001914   50ef     MOVF      0xef,0x0,0x0                                                                                    
001916   e1e8     BNZ       0x18e8                                                                                          
001918   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\mcc18\src\TRADIT~1\pmc\USART\uputs.c
00191a   cfe5     MOVFF     0xfe5,0xfda                                                                                     
00191c   ffda                                                                                                               
00191e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001920   ffd9                                                                                                               
001922   0012     RETURN    0x0                                                                                             
                                           /* $Id: uwrite.c,v 1.1 2003/12/09 22:52:09 GrosbaJ Exp $ */                      C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                           #include <p18cxxx.h>                                                             C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                           #include <usart.h>                                                               C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                           extern union USART USART_Status;                                                 C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                           /********************************************************************            C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                           *    Function Name:  WriteUSART                                     *            C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                           *    Return Value:   none                                           *            C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                           *    Parameters:     data: data to transmit                         *            C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                           *    Description:    This routine transmits a byte out the USART.   *            C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                           ********************************************************************/            C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
00195c   cfd9     MOVFF     0xfd9,0xfe6    void WriteUSART(char data)                                                       C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
00195e   ffe6                                                                                                               
001960   cfda     MOVFF     0xfda,0xfe6                                                                                     
001962   ffe6                                                                                                               
001964   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001966   ffd9                                                                                                               
001968   cfe2     MOVFF     0xfe2,0xfda                                                                                     
00196a   ffda                                                                                                               
                                           {                                                                                C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
00196c   acac     BTFSS     0xac,0x6,0x0     if(TXSTAbits.TX9)  // 9-bit mode?                                              C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
00196e   d004     BRA       0x1978                                                                                          
                                             {                                                                              C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
001970   90ac     BCF       0xac,0x0,0x0       TXSTAbits.TX9D = 0;       // Set the TX9D bit according to the               C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
001972   0100     MOVLB     0x0                if(USART_Status.TX_NINE)  // USART Tx 9th bit in status reg                  C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
001974   b3ff     BTFSC     0xff,0x1,0x1                                                                                    
001976   80ac     BSF       0xac,0x0,0x0         TXSTAbits.TX9D = 1;                                                        C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                             }                                                                              C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
001978   0efd     MOVLW     0xfd             TXREG = data;      // Write the data byte to the USART                         C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
00197a   50db     MOVF      0xdb,0x0,0x0                                                                                    
00197c   6ead     MOVWF     0xad,0x0                                                                                        
00197e   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\mcc18\src\TRADIT~1\pmc\USART\uwrite.c
001980   cfe5     MOVFF     0xfe5,0xfda                                                                                     
001982   ffda                                                                                                               
001984   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001986   ffd9                                                                                                               
001988   0012     RETURN    0x0                                                                                             
                                           /* $Id: usartd.c,v 1.1 2003/12/09 22:52:09 GrosbaJ Exp $ */                      C:\mcc18\src\TRADIT~1\pmc\USART\usartd.c
                                           #include <p18cxxx.h>                                                             C:\mcc18\src\TRADIT~1\pmc\USART\usartd.c
                                           #include <usart.h>                                                               C:\mcc18\src\TRADIT~1\pmc\USART\usartd.c
                                                                                                                            C:\mcc18\src\TRADIT~1\pmc\USART\usartd.c
                                           // USART Status Structure                                                        C:\mcc18\src\TRADIT~1\pmc\USART\usartd.c
                                           union USART USART_Status;                                                        C:\mcc18\src\TRADIT~1\pmc\USART\usartd.c
